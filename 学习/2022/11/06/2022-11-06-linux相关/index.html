
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="记录一些关于数学、计算机的知识，以及一些日常。">
      
      
      
        <link rel="canonical" href="https://yfy.cqu.ai/%E5%AD%A6%E4%B9%A0/2022/11/06/2022-11-06-linux%E7%9B%B8%E5%85%B3/">
      
      
        <link rel="prev" href="../../../../../%E5%B7%A5%E5%85%B7/2022/11/06/2022-11-06-LXC%E4%BD%BF%E7%94%A8/">
      
      
        <link rel="next" href="../../../../../%E6%8A%98%E8%85%BE/2022/11/08/2022-11-08-VLAN%E5%AE%9E%E7%8E%B0%E5%8D%95%E7%BD%91%E5%8F%A3%E8%BD%AF%E8%B7%AF%E7%94%B1/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>linux相关 - Rain的随笔</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#linux科普" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../../.." title="Rain的随笔" class="md-header__button md-logo" aria-label="Rain的随笔" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Rain的随笔
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              linux相关
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="../../../../.." class="md-tabs__link">
        
  
    
  
  博客

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../about/" class="md-tabs__link">
        
  
    
  
  关于

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../tags/" class="md-tabs__link">
        
  
    
  
  标签

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../series/" class="md-tabs__link">
        
  
    
  
  系列

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../tools/" class="md-tabs__link">
        
  
    
  
  工具

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../archive/2024/" class="md-tabs__link">
          
  
  归档

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../category/homelab/" class="md-tabs__link">
          
  
  分类

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Rain的随笔" class="md-nav__button md-logo" aria-label="Rain的随笔" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Rain的随笔
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    博客
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    标签
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../series/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    系列
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    工具
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    归档
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            归档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    分类
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            分类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/homelab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    homelab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E4%B8%AA%E4%BA%BA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    个人
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E5%8D%9A%E5%AE%A2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    博客
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BD%91%E7%BB%9C%E8%87%AA%E7%94%B1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    如何实现网络自由
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    工具
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E6%8A%98%E8%85%BE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    折腾
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E6%9D%82%E6%96%87/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    杂文
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    编程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E8%99%9A%E6%8B%9F%E5%8C%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    虚拟化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E8%AE%BE%E5%A4%87/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    设备
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E8%AF%BE%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    课程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E9%98%85%E8%AF%BB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    阅读
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../../../.." class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
                  <span class="md-ellipsis">
                    回到主页
                  </span>
                </a>
              </div>
            </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    元数据
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg>
                        <time datetime="2022-11-06 18:14:50" class="md-ellipsis">2022年11月6日</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg>
                          <span class="md-ellipsis">
                            分类于
                            
                              <a href="../../../../../category/%E5%AD%A6%E4%B9%A0/">学习</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg>
                          <span class="md-ellipsis">
                            
                              需要 27 分钟阅读时间
                            
                          </span>
                        </div>
                      </li>
                    
                  </ul>
                </nav>
              </li>
            </ul>
          </nav>
          
            

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tty-pts" class="md-nav__link">
    <span class="md-ellipsis">
      tty, pts
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        
  
  

<nav class="md-tags" >
  
    
    
    
      <a href="../../../../../tags/#tty" class="md-tag">tty</a>
    
  
    
    
    
      <a href="../../../../../tags/#sed" class="md-tag">sed</a>
    
  
    
    
    
      <a href="../../../../../tags/#awk" class="md-tag">awk</a>
    
  
    
    
    
      <a href="../../../../../tags/#wifi" class="md-tag">wifi</a>
    
  
    
    
    
      <a href="../../../../../tags/#fdisk" class="md-tag">fdisk</a>
    
  
    
    
    
      <a href="../../../../../tags/#parted" class="md-tag">parted</a>
    
  
    
    
    
      <a href="../../../../../tags/#virtualbox" class="md-tag">virtualbox</a>
    
  
    
    
    
      <a href="../../../../../tags/#mount" class="md-tag">mount</a>
    
  
</nav>



<p>linux相关</p>
<!-- more -->

<h1 id="linux科普">linux科普<a class="headerlink" href="#linux科普" title="Permanent link">&para;</a></h1>
<h2 id="tty-pts">tty, pts<a class="headerlink" href="#tty-pts" title="Permanent link">&para;</a></h2>
<ul>
<li>tty表示终端(terminal or console)的统称。tty(tele typerwriter)电传打字机为早期电脑的输入输出设备，后面被显示器和键盘取代。</li>
<li>ctrl alt + F1-F6对应6个终端</li>
<li>ctrl alt + F7对应图形化界面</li>
<li>pts(pseudo terminal slave)表示伪终端。是一个程序（终端仿真器teminal emulators）
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>who<span class="w"> </span><span class="c1">#查看当前所有登录用户及终端</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>➜<span class="w">  </span>~<span class="w"> </span>who
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>yfy<span class="w">      </span>:1<span class="w">           </span><span class="m">2022</span>-10-24<span class="w"> </span><span class="m">14</span>:26<span class="w"> </span><span class="o">(</span>:1<span class="o">)</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>yfy<span class="w">      </span>pts/1<span class="w">        </span><span class="m">2022</span>-10-16<span class="w"> </span><span class="m">15</span>:36<span class="w"> </span><span class="o">(</span>tmux<span class="o">(</span><span class="m">1158265</span><span class="o">)</span>.%0<span class="o">)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>yfy<span class="w">      </span>pts/2<span class="w">        </span><span class="m">2022</span>-10-24<span class="w"> </span><span class="m">14</span>:43<span class="w"> </span><span class="o">(</span><span class="m">192</span>.168.1.180<span class="o">)</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>yfy<span class="w">      </span>pts/3<span class="w">        </span><span class="m">2022</span>-10-23<span class="w"> </span><span class="m">18</span>:57<span class="w"> </span><span class="o">(</span>tmux<span class="o">(</span><span class="m">1158265</span><span class="o">)</span>.%5<span class="o">)</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>yfy<span class="w">      </span>pts/4<span class="w">        </span><span class="m">2022</span>-10-16<span class="w"> </span><span class="m">15</span>:37<span class="w"> </span><span class="o">(</span>tmux<span class="o">(</span><span class="m">1158265</span><span class="o">)</span>.%2<span class="o">)</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>yfy<span class="w">      </span>pts/6<span class="w">        </span><span class="m">2022</span>-10-16<span class="w"> </span><span class="m">15</span>:38<span class="w"> </span><span class="o">(</span>tmux<span class="o">(</span><span class="m">1158265</span><span class="o">)</span>.%3<span class="o">)</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>yfy<span class="w">      </span>pts/7<span class="w">        </span><span class="m">2022</span>-10-16<span class="w"> </span><span class="m">15</span>:38<span class="w"> </span><span class="o">(</span>tmux<span class="o">(</span><span class="m">1158265</span><span class="o">)</span>.%4<span class="o">)</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>yfy<span class="w">      </span>pts/12<span class="w">       </span><span class="m">2022</span>-10-24<span class="w"> </span><span class="m">00</span>:36<span class="w"> </span><span class="o">(</span>tmux<span class="o">(</span><span class="m">1158265</span><span class="o">)</span>.%0<span class="o">)</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>who<span class="w"> </span>-m<span class="w"> </span><span class="c1"># 查看当前用户</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/pty/x<span class="w">   </span><span class="c1">#直接给对应终端发送消息</span>
</span></code></pre></div></li>
</ul>
<h1 id="安装配置linux">安装配置linux<a class="headerlink" href="#安装配置linux" title="Permanent link">&para;</a></h1>
<p>时区
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>timedatectl set-timezone Asia/Shanghai
</span></code></pre></div></p>
<h2 id="桌面环境">桌面环境<a class="headerlink" href="#桌面环境" title="Permanent link">&para;</a></h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>sudo apt install ubuntu-desktop
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>sudo apt install kde-plasma-desktop
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>sudo apt install lightdm
</span></code></pre></div>
<h1 id="基本命令">基本命令<a class="headerlink" href="#基本命令" title="Permanent link">&para;</a></h1>
<h2 id="终端交互">终端交互<a class="headerlink" href="#终端交互" title="Permanent link">&para;</a></h2>
<p>You：linux中进程组，会话，控制终端的作用。应用场景</p>
<p>ChatGPT
在 Linux 中，进程组、会话和控制终端是与进程管理和终端交互相关的概念。它们在多用户环境中起到重要的作用，可以帮助组织和管理进程。</p>
<h3 id="1-进程组process-group">1. 进程组（Process Group）：<a class="headerlink" href="#1-进程组process-group" title="Permanent link">&para;</a></h3>
<p><strong>作用：</strong></p>
<ul>
<li>进程组是一组相互关联的进程的集合，它们可以共享同一个终端。</li>
<li>进程组的创建可以用于在一个终端上同时运行多个相关的进程。</li>
</ul>
<p><strong>应用场景：</strong></p>
<ul>
<li>在命令行中使用管道 <code>|</code> 运算符时，创建的进程组允许将多个命令组合在一起，实现数据流的传递。</li>
<li>当用户同时在一个终端上启动多个任务时，这些任务可能会被放在同一个进程组中，以便一起管理和控制。</li>
</ul>
<h3 id="2-会话session">2. 会话（Session）：<a class="headerlink" href="#2-会话session" title="Permanent link">&para;</a></h3>
<p><strong>作用：</strong></p>
<ul>
<li>会话是一个或多个进程组的集合。一个会话由一个会话首领（session leader）进程来创建。</li>
<li>会话的创建和终止可以影响到其中的所有进程组。</li>
</ul>
<p><strong>应用场景：</strong></p>
<ul>
<li>当用户登录到系统时，通常会创建一个新的会话，该会话包含与用户交互的所有进程组。</li>
<li>会话的创建和终止可以用于实现用户登录和注销的管理。</li>
</ul>
<h3 id="3-控制终端controlling-terminal">3. 控制终端（Controlling Terminal）：<a class="headerlink" href="#3-控制终端controlling-terminal" title="Permanent link">&para;</a></h3>
<p><strong>作用：</strong></p>
<ul>
<li>控制终端是与一个会话关联的终端设备，它接收用户输入并显示输出。</li>
<li>控制终端的存在允许用户与前台进程组进行交互。</li>
</ul>
<p><strong>应用场景：</strong></p>
<ul>
<li>当用户在终端上输入命令时，输入将发送到与当前会话关联的控制终端，前台进程组会接收输入并产生输出。</li>
<li>控制终端的概念用于管理与用户交互的进程，以及将输入输出从用户终端传递到相应的进程。</li>
</ul>
<h3 id="示例场景">示例场景：<a class="headerlink" href="#示例场景" title="Permanent link">&para;</a></h3>
<p>假设你在使用一个终端窗口登录到系统，你启动了一个文件复制任务（进程组1）和一个文件搜索任务（进程组2）。这两个进程组都属于同一个会话，并且与你的控制终端关联。这样，你可以在终端中实时查看复制进度并与文件搜索任务进行交互。如果你注销登录，整个会话（包括两个进程组和控制终端）都会被终止。</p>
<p>这些概念的合理使用有助于更好地组织和管理进程，以及实现用户友好的终端交互。</p>
<h3 id="退出终端后命令不退出">退出终端后命令不退出<a class="headerlink" href="#退出终端后命令不退出" title="Permanent link">&para;</a></h3>
<ul>
<li>nohup command</li>
<li>setsid command<ul>
<li>将command放在新的session中执行</li>
</ul>
</li>
</ul>
<h2 id="linux命令option通用格式">linux命令option通用格式<a class="headerlink" href="#linux命令option通用格式" title="Permanent link">&para;</a></h2>
<ul>
<li>POSIX-styled的option由一个dash和一个字符组成</li>
<li>GNU-style的long option由两个dash和一个关键字(keyword)组成</li>
<li>关键字能被缩写，只要足够区分不同关键字</li>
<li>如果关键字需要一个参数(argument)，可以在关键字后紧跟一个等号=，然后紧跟着关键字的值。或者将关键字和值用空白字符(whitespace)分隔开。</li>
<li>如果关键字被多次赋值，则以最后一次的为准</li>
</ul>
<p>man wget
- 解析方法
  - GUN getopt
- 是否支持合并
- 是否支持选项放在参数后面
- <code>--</code>表示option结束。Since the options can be specified after the arguments, you may terminate them with <code>--</code>.  So the following will try to download URL -x, reporting failure to log: <code>wget -o log -- -x</code></p>
<h2 id="vim">vim<a class="headerlink" href="#vim" title="Permanent link">&para;</a></h2>
<p><a href="https://vim.rtorr.com/">Vim Cheat Sheet (rtorr.com)</a></p>
<h3 id="基本">基本<a class="headerlink" href="#基本" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a># insert mode
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>i, o, O
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a># 光标移动
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>i, j, k, l
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>gg, G
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>w, W, b, B # move word
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a># 复制粘贴
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>yy, p
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>dw # 剪切单词
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>/pattern   # 查找
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>n
</span></code></pre></div>
<h4 id="添加tab">添加tab<a class="headerlink" href="#添加tab" title="Permanent link">&para;</a></h4>
<ul>
<li>ctrl-v进入visual block模式（如果使用windows terminal，ctrl-v被设置为粘贴会导致无法进入），或者shift-v进入visual line模式。</li>
<li>"shift + dot"，被选中的行便会tab一次，重复"dot"可以tab任意次<ul>
<li>或者<code>:</code>进入命令模式，<code>&gt;</code>往右tab，<code>&lt;</code>往左tab</li>
</ul>
</li>
</ul>
<p>也可以直接使用命令模式，以下命令将1-5行向右tab 2次
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>:1,5&gt;&gt;
</span></code></pre></div></p>
<h3 id="高级">高级<a class="headerlink" href="#高级" title="Permanent link">&para;</a></h3>
<p>光标移动
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>H, M, L #  top, middle, bottom of screen
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>fx # jump to next occurrence of character x
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>} # jump to next paragraph (or function/block, when editing code)
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>{
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>zz # center cursor on screen
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>Ctrl + b - move back one full screen
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>Ctrl + f - move forward one full screen
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>Ctrl + d - move forward 1/2 a screen
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>Ctrl + u - move back 1/2 a screen
</span></code></pre></div></p>
<p>查找替换
- %表示整个文件range（否则只会替换第一次匹配）
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>:%s/xxx/yyy/g
</span></code></pre></div></p>
<h4 id="执行shell命令">执行shell命令<a class="headerlink" href="#执行shell命令" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>:!{cmd}
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>:!ls -alh # 查看当前目录下文件
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>:w !{cmd}   # buffer | cmd
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>:%!{cmd}   # buffer | cmd | buffer
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>:%!grep xxx  # 过滤文件内容，保留匹配的部分
</span></code></pre></div>
<h4 id="忘记sudo">忘记sudo<a class="headerlink" href="#忘记sudo" title="Permanent link">&para;</a></h4>
<p>write with sudo<a href="https://stackoverflow.com/questions/2600783/how-does-the-vim-write-with-sudo-trick-work">How does the vim "write with sudo" trick work? - Stack Overflow</a></p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>:w !sudo tee %
</span></code></pre></div>
- w命令完整格式：<code>:[range]w[rite] [++opt] !{cmd}</code>
  - 表示执行cmd，并将当前编辑缓冲区内容作为cmd输入
  - 例子<code>:w !grep xxx</code>，grep文件内容
- <code>%</code>：这里表示文件名
- <strong>因此上述命令将buffer内容pipe给sudo执行的tee命令，tee命令将stdin输出到当前文件和stdout，从而实现对文件的写入。</strong></p>
<p>为上述命令设置别名w!!
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>&quot; Allow saving of files as sudo when I forgot to start vim using sudo.
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>cmap w!! w !sudo tee &gt; /dev/null %
</span></code></pre></div></p>
<h4 id="编辑二进制文件">编辑二进制文件<a class="headerlink" href="#编辑二进制文件" title="Permanent link">&para;</a></h4>
<p><a href="https://vi.stackexchange.com/questions/2232/how-can-i-use-vim-as-a-hex-editor">binary file - How can I use Vim as a hex editor? - Vi and Vim Stack Exchange</a></p>
<p><code>:%!xxd</code>
- <code>:%!{cmd}</code>有点像loopback，把当前缓冲区pipe给cmd然后再将其输出写回到缓冲区。
- xxd输入二进制输出hex文本</p>
<p><code>:%!xxd -r</code>
- xxd -r输入hex文本输出二进制</p>
<p><code>:wq</code>
写回文件</p>
<h3 id="配置文件">配置文件<a class="headerlink" href="#配置文件" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>map &lt;C-c&gt; &quot;+y&lt;CR&gt;
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>map &lt;C-v&gt; &quot;+p&lt;CR&gt;
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>command! Vb normal! &lt;C-v&gt;
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>cmap w!! w !sudo tee &gt; /dev/null %
</span></code></pre></div>
<p>自定义命令：<a href="https://vi.stackexchange.com/questions/3699/is-there-a-command-to-enter-visual-block-mode">key bindings - Is there a command to enter Visual Block mode? - Vi and Vim Stack Exchange</a></p>
<h2 id="cp注意点">cp注意点<a class="headerlink" href="#cp注意点" title="Permanent link">&para;</a></h2>
<ul>
<li>cp file1 file2 ... dir</li>
<li>cp -r dir1 dir2<ul>
<li>如果dir2存在，则将dir1复制到dir2内，即dir2/dir1</li>
<li>如果dir2不存在，则将dir1复制为dir2</li>
</ul>
</li>
<li>cp dir1/* dir2</li>
<li>将dir1下所有文件复制到dir2内，如果dir1存在目录，则应添加-r选项</li>
</ul>
<h2 id="sed-awk-grep">sed, awk, grep<a class="headerlink" href="#sed-awk-grep" title="Permanent link">&para;</a></h2>
<p>这些命令要深入研究的话，内容都很多。比如awk可以算是一种用于处理文本的解释型编程语言。因此，比较好的方法是从需求出发，看看在linux下一般有哪些文字处理的需求，再看使用哪种工具比较方便简单。</p>
<h4 id="命令格式">命令格式<a class="headerlink" href="#命令格式" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>grep [option] pattern file
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>sed [options] &#39;command&#39; file(s)
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>sed [options] -f scriptfile file(s)
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>awk [options] &#39;pattern {action}&#39; [file]
</span></code></pre></div>
<h4 id="正则表达式">正则表达式<a class="headerlink" href="#正则表达式" title="Permanent link">&para;</a></h4>
<blockquote>
<p>基本正则表达式（Basic Regular Expressions）和扩展正则表达式（Extended Regular Expressions）是两种 POSIX 正则表达式风格。</p>
<p>BRE 可能是如今最老的正则风格了，对于部分特殊字符（如 <code>+</code>, <code>?</code>, <code>|</code>, <code>{</code>）需要加上转义符 <code>\</code> 才能表达其特殊含义。</p>
<p>ERE 与如今的现代正则风格较为一致，相比 BRE，上述特殊字符默认发挥特殊作用，加上 <code>\</code> 之后表达普通含义。</p>
</blockquote>
<h4 id="常见需求">常见需求<a class="headerlink" href="#常见需求" title="Permanent link">&para;</a></h4>
<ul>
<li>修改文件中某部分内容。一般可以使用正则表达式，匹配到对应位置，然后进行修改。</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>//将文件中所有的key<span class="o">=</span>xxx，修改为key<span class="o">=</span><span class="si">${</span><span class="nv">val</span><span class="si">}</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>//-i表示在原文件上修改，去掉后会将结果输出到命令行
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>//<span class="w"> </span>这里还用到了字符串拼接语法，将连个字符串写到一起就会拼接。单引号内不能进行转义，因此为了使用变量val需要使用双引号。
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/key=[0-9]+/&#39;</span><span class="s2">&quot;key=</span><span class="si">${</span><span class="nv">val</span><span class="si">}</span><span class="s2">/g&quot;</span>
</span></code></pre></div>
<p>sed其它命令:
  - s 替换
  - d 删除
  - c 选定行改成新文本
  - a 当前行下插入文本
  - i 当前行上插入文本
  <div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>//找到某一行，然后整行替换
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;/config_pio_local_num_iotasks/ c\config_pio_local_num_iotasks = 3&quot;</span>
</span></code></pre></div></p>
<p>多行命令
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>sed<span class="w"> </span>-i<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;/^port/c #port: 7890&#39;</span><span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;/^socks-port/c #socks-port: 7891&#39;</span><span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/^allow-lan.*/allow-lan: true/&#39;</span><span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;/^allow-lan/i mixed-port: 11223&#39;</span><span class="w"> </span>glados.yaml
</span></code></pre></div></p>
<p>awk
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>awk -F&#39;TXT&#39; &#39;{print $NF}&#39; |xargs  # TXT为分隔符，$NF为最后一列，xargs去除空格(strip
</span></code></pre></div></p>
<h2 id="其它">其它<a class="headerlink" href="#其它" title="Permanent link">&para;</a></h2>
<h3 id="head-tail">head, tail<a class="headerlink" href="#head-tail" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>tail         # 输出最后10行
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>tail -n k    # 输出最后k行
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>tail -n +k   # 输出从第k行（1开始）的所有行
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>head         # 输出前10行
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>head -n k    # 输出前k行
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>head -n -k   # 输出除结尾k行后的所有行
</span></code></pre></div>
<h3 id="xargs">xargs<a class="headerlink" href="#xargs" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>xargs [options] [command [initial-arguments]]
</span></code></pre></div>
<p>从标准输入读取items（使用blank或者newline分隔），然后执行command（默认/bin/echo）。使用-n决定每次传递多少iterm
<div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>➜  ~ echo 1 2 3 4 5 6 7 8 9 | xargs -n 3
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>1 2 3
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>4 5 6
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>7 8 9
</span></code></pre></div></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>-n max-args, --max-args=max-args
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>              Use at most max-args arguments per command line.  Fewer than max-args arguments will be used if the size (see the -s option) is exceeded, unless the -x option is given, in which case xargs will exit.
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>-r, --no-run-if-empty
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>    If the standard input does not contain any nonblanks, do not run the command.  Normally, the command is run once even if there is no input.  This option is a GNU extension.
</span></code></pre></div>
<h3 id="tar">tar<a class="headerlink" href="#tar" title="Permanent link">&para;</a></h3>
<p><a href="https://stackoverflow.com/questions/939982/how-do-i-tar-a-directory-of-files-and-folders-without-including-the-directory-it">archive - How do I tar a directory of files and folders without including the directory itself? - Stack Overflow</a></p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>tar czf xxx.tar.gz -C &lt;dir&gt; .
</span></code></pre></div>
- -C : change the current directory
- <code>.</code>: add the entire current directory</p>
<h3 id="cut">cut<a class="headerlink" href="#cut" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">for</span><span class="w"> </span>IPV6_SUBNET<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$NET_IPV6_SUBNETS</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="nv">SRC</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$IPV6_SUBNET</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;/&quot;</span><span class="w"> </span>-f<span class="w"> </span><span class="m">1</span><span class="k">)</span><span class="s2">&quot;/128&quot;</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>...
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="k">done</span>
</span></code></pre></div>
<h1 id="基本操作">基本操作<a class="headerlink" href="#基本操作" title="Permanent link">&para;</a></h1>
<h2 id="sudoer设置">sudoer设置<a class="headerlink" href="#sudoer设置" title="Permanent link">&para;</a></h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>vim /etc/sudoers
</span></code></pre></div>
<p>将用户添加到admin或sudo用户组即可</p>
<p>免密码：
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>%sudo   ALL=(ALL:ALL) NOPASSWD: ALL
</span></code></pre></div></p>
<p>sudoers每项含义（待续）</p>
<h2 id="linux-sshd设置">linux sshd设置<a class="headerlink" href="#linux-sshd设置" title="Permanent link">&para;</a></h2>
<p>允许ssh登录root</p>
<p>先改为yes，然后ssh-copy-id后，改为禁用密码
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>PermitRootLogin prohibit-password
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>#PermitRootLogin yes
</span></code></pre></div></p>
<p>禁用密码登录</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>PasswordAuthentication no
</span></code></pre></div>
<p>其它选项
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>PermitRootLogin prohibit-password
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>PubkeyAuthentication yes    # 允许公钥登录
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>PubkeyAcceptedKeyTypes=+ssh-rsa
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>PasswordAuthentication no   # 禁用密码登录
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>ChallengeResponseAuthentication no
</span></code></pre></div></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>Accepted password for yfy from 192.168.36.215 port 50342 ssh2
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>Accepted publickey for yfy from 192.168.36.180 port 26464 ssh2: RSA SHA256:z9yheNzateaIikTVkTXN1lmMPRIsp+H0ssbhU4Q8Kfg
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>pam_unix(sshd:session): session opened for user yfy(uid=1000) by (uid=0)
</span></code></pre></div>
<h2 id="move-running-process-to-tmux">move running process to tmux<a class="headerlink" href="#move-running-process-to-tmux" title="Permanent link">&para;</a></h2>
<p><a href="https://xai.sh/2020/10/16/Move-running-process-into-tmux-session.html">Move a running process into a tmux session | ./xai.sh</a></p>
<h2 id="测试磁盘速度">测试磁盘速度<a class="headerlink" href="#测试磁盘速度" title="Permanent link">&para;</a></h2>
<h3 id="dd">dd<a class="headerlink" href="#dd" title="Permanent link">&para;</a></h3>
<p>使用dd简单测试速度。可以区分usb 2.0和3.0；可以见识PCIe 4.0 ssd的速度。</p>
<p>注意需要开启direct，否则需要从userspace复制到kernel buffer，严重影响速度。block size对速度影响很大。 <a href="https://stackoverflow.com/questions/33485108/why-is-dd-with-the-direct-o-direct-flag-so-dramatically-faster">Why is dd with the 'direct' (O_DIRECT) flag so dramatically faster?</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>➜  speed_disk sudo dd if=/dev/zero of=/mnt/VM-Pool/ssd.test.file bs=4k count=300000 oflag=direct
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>300000+0 records in
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>300000+0 records out
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>1228800000 bytes (1.2 GB, 1.1 GiB) copied, 3.18978 s, 385 MB/s
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>➜  speed_disk sudo dd if=/dev/zero of=/mnt/VM-Pool/ssd.test.file bs=4M count=2000 oflag=direct
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>2000+0 records in
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>2000+0 records out
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>8388608000 bytes (8.4 GB, 7.8 GiB) copied, 1.94441 s, 4.3 GB/s
</span></code></pre></div>
<h3 id="fio">fio<a class="headerlink" href="#fio" title="Permanent link">&para;</a></h3>
<ul>
<li>I/O type</li>
<li>direct, buffered, atomic. : O_DIRECT, O_ATOMIC</li>
<li>readwrite=str, rw=str<ul>
<li>read: Sequential reads.</li>
<li>write: Sequential writes.</li>
<li>randread: Random reads.</li>
<li>randwrite: Random writes.</li>
<li>rw,readwrite: Sequential mixed reads and writes</li>
<li>randrw: Random mixed reads and writes.</li>
<li>trim, randtrim, trimwrite</li>
</ul>
</li>
<li>Block size</li>
<li>bs: The block size in bytes used for I/O units</li>
<li>Buffer and Memory</li>
<li>sync=str<ul>
<li>sync: Use synchronous file IO. O_SYNC</li>
<li>dsync: Use synchronous data IO. For the majority of I/O engines, this means using O_DSYNC.</li>
</ul>
</li>
<li>I/O size</li>
<li>size: The total size of file I/O for each thread of this job. Fio will run until this many bytes has been transferred, unless runtime is limited by  other  options  (such  as  runtime, for instance, or increased/decreased by io_size).</li>
<li>I/O engine</li>
<li>ioengine=str<ul>
<li>psync: Basic pread(2) or pwrite(2) I/O. Default on all supported operating systems except for Windows</li>
<li>libaio:  Linux native asynchronous I/O. Note that Linux may only support queued behavior with non-buffered  I/O  (set  direct=1 or buffer=0).  This engine defines engine specific options.</li>
</ul>
</li>
<li>I/O depth</li>
<li>iodepth=int<ul>
<li>Number of I/O units to keep in flight against the file. Note that increasing iodepth beyond 1 will not affect synchronous  ioengines  (except  for  small  degrees  when verify_async is in use). Even async engines may impose OS restrictions causing the desired depth not to be achieved. This may happen on Linux when using libaio and not setting <code>direct=1</code>', since buffered I/O is not async on that OS. Keep  an  eyeon the I/O depth distribution in the fio output to verify that the achieved depth is as expected. Default: 1.</li>
</ul>
</li>
</ul>
<p>stonewall
wait_for_previous  Wait for preceding jobs in the job file to exit, before starting this one. Can be used to insert serialization points in the job  file.  A stone  wall  also  implies  starting  a  new  reporting  group,  see  group_reporting.  Optionally you can use <code>stonewall=0</code> to disable or <code>stonewall=1</code> to enable it.</p>
<h4 id="配置文件_1">配置文件<a class="headerlink" href="#配置文件_1" title="Permanent link">&para;</a></h4>
<ul>
<li>global公共部分，影响后面每一个job</li>
<li>stonewall等待前面一个完成</li>
<li>filename指定共同使用一个文件（否则会根据job名自动生成）
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>sudo fio --directory=/root/ --filename=test.bin ssd-win-likely.fio
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>vim ssd-win-likely.fio #模仿windows下diskmark，测顺序读写和4k随机
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>[global]
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>ioengine=libaio
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>size=10g
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>direct=1
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>runtime=60
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>[seq-read-4m]
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>bs=4M
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>iodepth=32
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>rw=read
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>stonewall
</span><span id="__span-30-15"><a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>
</span><span id="__span-30-16"><a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>[seq-write-4m]
</span><span id="__span-30-17"><a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>bs=4M
</span><span id="__span-30-18"><a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a>iodepth=32
</span><span id="__span-30-19"><a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a>rw=write
</span><span id="__span-30-20"><a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a>stonewall
</span><span id="__span-30-21"><a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a>
</span><span id="__span-30-22"><a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a>[rand-read-4k]
</span><span id="__span-30-23"><a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a>bs=4k
</span><span id="__span-30-24"><a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a>iodepth=4
</span><span id="__span-30-25"><a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a>rw=randread
</span><span id="__span-30-26"><a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a>stonewall
</span><span id="__span-30-27"><a id="__codelineno-30-27" name="__codelineno-30-27" href="#__codelineno-30-27"></a>
</span><span id="__span-30-28"><a id="__codelineno-30-28" name="__codelineno-30-28" href="#__codelineno-30-28"></a>[rand-write-4k]
</span><span id="__span-30-29"><a id="__codelineno-30-29" name="__codelineno-30-29" href="#__codelineno-30-29"></a>bs=4k
</span><span id="__span-30-30"><a id="__codelineno-30-30" name="__codelineno-30-30" href="#__codelineno-30-30"></a>iodepth=4
</span><span id="__span-30-31"><a id="__codelineno-30-31" name="__codelineno-30-31" href="#__codelineno-30-31"></a>rw=randwrite
</span><span id="__span-30-32"><a id="__codelineno-30-32" name="__codelineno-30-32" href="#__codelineno-30-32"></a>stonewall
</span></code></pre></div></li>
</ul>
<h4 id="例子">例子<a class="headerlink" href="#例子" title="Permanent link">&para;</a></h4>
<p>aigo P7000Z 2TB pcie 4.0 (标称读7350, 写6750 MB/s)
- <em>使用上述配置文件测得只有3231, 330, 5999, 509MB/s，怀疑是连续测试导致过热降速。</em>
- 单独测试测得：顺序读7319MB/s，顺序写6620MB/s（4M, direct, QD=32, libaio）</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>sudo fio --filename=fio.img --bs=4M --direct=1 --iodepth=32 --size=10g --runtime=60 --rw=read --name=seq-read --ioengine=libaio
</span></code></pre></div>
<p>输出
<div class="language-text highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>seq-read: (g=0): rw=read, bs=(R) 4096KiB-4096KiB, (W) 4096KiB-4096KiB, (T) 4096KiB-4096KiB, ioengine=libaio, iodepth=32
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>fio-3.28
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>Starting 1 process
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>Jobs: 1 (f=1)
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>seq-read: (groupid=0, jobs=1): err= 0: pid=207476: Sun Apr  2 22:26:36 2023
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>  read: IOPS=1745, BW=6980MiB/s (7319MB/s)(10.0GiB/1467msec)
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>    slat (usec): min=66, max=988, avg=118.46, stdev=69.15
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>    clat (usec): min=4051, max=35006, avg=18079.05, stdev=1613.53
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>     lat (usec): min=4574, max=35099, avg=18197.64, stdev=1588.77
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>    clat percentiles (usec):
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>     |  1.00th=[11076],  5.00th=[17957], 10.00th=[17957], 20.00th=[17957],
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>     | 30.00th=[17957], 40.00th=[17957], 50.00th=[18220], 60.00th=[18220],
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>     | 70.00th=[18220], 80.00th=[18220], 90.00th=[18220], 95.00th=[18482],
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>     | 99.00th=[20579], 99.50th=[28181], 99.90th=[33817], 99.95th=[34341],
</span><span id="__span-32-15"><a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>     | 99.99th=[34866]
</span><span id="__span-32-16"><a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>   bw (  MiB/s): min= 6912, max= 7024, per=99.82%, avg=6968.00, stdev=79.20, samples=2
</span><span id="__span-32-17"><a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>   iops        : min= 1728, max= 1756, avg=1742.00, stdev=19.80, samples=2
</span><span id="__span-32-18"><a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>  lat (msec)   : 10=0.90%, 20=98.01%, 50=1.09%
</span><span id="__span-32-19"><a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>  cpu          : usr=0.00%, sys=22.10%, ctx=2530, majf=0, minf=32782
</span><span id="__span-32-20"><a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=0.2%, 8=0.3%, 16=0.6%, 32=98.8%, &gt;=64=0.0%
</span><span id="__span-32-21"><a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-32-22"><a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-32-23"><a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a>     issued rwts: total=2560,0,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-32-24"><a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a>     latency   : target=0, window=0, percentile=100.00%, depth=32
</span></code></pre></div></p>
<h4 id="结果">结果<a class="headerlink" href="#结果" title="Permanent link">&para;</a></h4>
<ul>
<li>西数紫盘 2TB： </li>
<li>read: IOPS=47, BW=192MiB/s (201MB/s)(4096MiB/21381msec)</li>
<li>write: IOPS=47, BW=188MiB/s (197MB/s)(4096MiB/21768msec); 0 zone resets</li>
<li>希捷酷鱼 4TB：</li>
<li>read: IOPS=35, BW=142MiB/s (149MB/s)(4096MiB/28785msec)</li>
<li>write: IOPS=34, BW=138MiB/s (144MB/s)(4096MiB/29777msec); 0 zone resets</li>
<li>btrfs混合(西数紫盘 2TB+希捷酷鱼 2/4TB)</li>
<li>read: IOPS=45, BW=182MiB/s (190MB/s)(4096MiB/22564msec)</li>
<li>
<p>write: IOPS=39, BW=160MiB/s (167MB/s)(4096MiB/25644msec); 0 zone resets</p>
</li>
<li>
<p>aigo 4.0</p>
</li>
<li>read: IOPS=83.7k, BW=327MiB/s (343MB/s)(10.0GiB/31321msec) 4k rand q=4</li>
<li>write: IOPS=125k, BW=487MiB/s (511MB/s)(10.0GiB/21008msec);</li>
<li>btrfs混合（4.0 + 3.0）</li>
<li>read: IOPS=540, BW=2163MiB/s (2268MB/s)(10.0GiB/4734msec) 4M seq q=32</li>
<li>read: IOPS=76.5k, BW=299MiB/s (313MB/s)(10.0GiB/34280msec) 4k rand q=4</li>
<li>write: IOPS=77.4k, BW=302MiB/s (317MB/s)(10.0GiB/33876msec) 4k rand q=4</li>
</ul>
<h2 id="生活相关">生活相关<a class="headerlink" href="#生活相关" title="Permanent link">&para;</a></h2>
<h3 id="禁止休眠">禁止休眠<a class="headerlink" href="#禁止休眠" title="Permanent link">&para;</a></h3>
<p><a href="https://www.tecmint.com/disable-suspend-and-hibernation-in-linux/">How to Disable Suspend and Hibernation Modes In Linux (tecmint.com)</a>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>sudo systemctl status sleep.target suspend.target hibernate.target hybrid-sleep.target
</span></code></pre></div></p>
<h3 id="禁止关闭笔记本盖子休眠">禁止关闭笔记本盖子休眠<a class="headerlink" href="#禁止关闭笔记本盖子休眠" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>vim /etc/systemd/logind.conf
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>HandleLidSwitch=lock   # 从suspend改为lock
</span></code></pre></div>
<p>man logind.conf</p>
<blockquote>
<p>Controls how logind shall handle the system power, reboot and sleep keys and the lid switch to trigger actions such as system power-off, reboot or suspend. Can be one of "ignore", "poweroff", "reboot", "halt", "kexec", "suspend", "hibernate", "hybrid-sleep", "suspend-then-hibernate", "lock", and "factory-reset". </p>
<p>If "ignore", systemd-logind will never handle these keys. If "lock", all running sessions will be screen-locked; otherwise, the specified action will be taken in the respective event. Only input devices with the "power-switch" udev tag will be watched for key/lid switch events. </p>
<p>HandlePowerKey= defaults to "poweroff", HandleRebootKey= defaults to "reboot", HandleSuspendKey= defaults to "suspend", HandleHibernateKey= defaults to "hibernate", HandlePowerKeyLongPress= defaults to "ignore", HandleRebootKeyLongPress= defaults to "poweroff", HandleSuspendKeyLongPress= defaults to "hibernate", HandleHibernateKeyLongPress= defaults to "ignore".  HandleLidSwitch= defaults to "suspend".  HandleLidSwitchExternalPower= is completely ignored by default (for backwards compatibility) — an explicit value must be set before it will be used to determine behaviour.  HandleLidSwitchDocked= defaults to "ignore". If the system is inserted in a docking station, or if more than one display is connected, the action specified by HandleLidSwitchDocked= occurs; if the system is on external power the action (if any) specified by HandleLidSwitchExternalPower= occurs; otherwise the HandleLidSwitch= action occurs.</p>
</blockquote>
<h3 id="连接wifi">连接wifi<a class="headerlink" href="#连接wifi" title="Permanent link">&para;</a></h3>
<h4 id="iwiwconfig等底层工具">iw,iwconfig等底层工具<a class="headerlink" href="#iwiwconfig等底层工具" title="Permanent link">&para;</a></h4>
<ul>
<li>iw</li>
<li>iwlist</li>
<li>wpa_supplicant: 用于连接WPA加密的wifi</li>
</ul>
<p>不使用networkmanger等工具，需要
- iw连接wifi
  - ifup interface
- 开启dhcpclient获得ip</p>
<p><a href="https://wiki.archlinux.org/title/Network_configuration/Wireless">Network configuration/Wireless - ArchWiki (archlinux.org)</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>█▓▒░root@king3399█▓▒░ Mon Aug 07 03:07:46pm
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>~/ iw dev wlan0 station dump
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>Station 3c:cd:57:f5:da:85 (on wlan0)
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>        inactive time:  0 ms
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>        rx bytes:       26025
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>        rx packets:     153
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>        tx bytes:       22842
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>        tx packets:     121
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>        tx failed:      0
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>        signal:         -63 dBm
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>        tx bitrate:     234.0 MBit/s
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>        rx bitrate:     390.0 MBit/s
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>        authorized:     yes
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>        authenticated:  yes
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>        associated:     yes
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>        WMM/WME:        yes
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a>        TDLS peer:      no
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a>        DTIM period:    1
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a>        beacon interval:100
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a>        short slot time:yes
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a>        connected time: 60 seconds
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a>        current time:   1691392108815 ms
</span><span id="__span-35-23"><a id="__codelineno-35-23" name="__codelineno-35-23" href="#__codelineno-35-23"></a>█▓▒░root@king3399█▓▒░ Mon Aug 07 03:08:28pm
</span><span id="__span-35-24"><a id="__codelineno-35-24" name="__codelineno-35-24" href="#__codelineno-35-24"></a>~/ iw dev wlan0 link
</span><span id="__span-35-25"><a id="__codelineno-35-25" name="__codelineno-35-25" href="#__codelineno-35-25"></a>Connected to 3c:cd:57:f5:da:85 (on wlan0)
</span><span id="__span-35-26"><a id="__codelineno-35-26" name="__codelineno-35-26" href="#__codelineno-35-26"></a>        SSID: ACSA-706-5G
</span><span id="__span-35-27"><a id="__codelineno-35-27" name="__codelineno-35-27" href="#__codelineno-35-27"></a>        freq: 5240
</span><span id="__span-35-28"><a id="__codelineno-35-28" name="__codelineno-35-28" href="#__codelineno-35-28"></a>        RX: 29153 bytes (171 packets)
</span><span id="__span-35-29"><a id="__codelineno-35-29" name="__codelineno-35-29" href="#__codelineno-35-29"></a>        TX: 24932 bytes (142 packets)
</span><span id="__span-35-30"><a id="__codelineno-35-30" name="__codelineno-35-30" href="#__codelineno-35-30"></a>        signal: -60 dBm
</span><span id="__span-35-31"><a id="__codelineno-35-31" name="__codelineno-35-31" href="#__codelineno-35-31"></a>        rx bitrate: 390.0 MBit/s
</span><span id="__span-35-32"><a id="__codelineno-35-32" name="__codelineno-35-32" href="#__codelineno-35-32"></a>        tx bitrate: 234.0 MBit/s
</span><span id="__span-35-33"><a id="__codelineno-35-33" name="__codelineno-35-33" href="#__codelineno-35-33"></a>
</span><span id="__span-35-34"><a id="__codelineno-35-34" name="__codelineno-35-34" href="#__codelineno-35-34"></a>        bss flags:      short-slot-time
</span><span id="__span-35-35"><a id="__codelineno-35-35" name="__codelineno-35-35" href="#__codelineno-35-35"></a>        dtim period:    1
</span><span id="__span-35-36"><a id="__codelineno-35-36" name="__codelineno-35-36" href="#__codelineno-35-36"></a>        beacon int:     100
</span></code></pre></div>
<p>扫描wifi
<div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>iwlist wlan0 scan |grep ESSID    # 列出wifi
</span></code></pre></div></p>
<h4 id="networkmanger">NetworkManger<a class="headerlink" href="#networkmanger" title="Permanent link">&para;</a></h4>
<p>GUI：基于GTK的<strong>nm-connection-editor</strong>
CLI：
- nmtui：使用起来很简单，可以编辑有线无线配置，激活连接等。
- nmcli：更加底层的命令行，功能还是很强大的</p>
<h5 id="nmcli基本使用">nmcli基本使用<a class="headerlink" href="#nmcli基本使用" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>nmcli conn
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>nmcli conn edit xxx
</span></code></pre></div>
<h5 id="wpa2-enterprise连接配置eduroam">WPA2 Enterprise连接配置（eduroam）<a class="headerlink" href="#wpa2-enterprise连接配置eduroam" title="Permanent link">&para;</a></h5>
<p>WPA2 Enterprise导致的wifi无法连接问题<a href="https://www.reddit.com/r/archlinux/comments/pb3r0f/cannot_connect_to_college_wifi_using/">(7) Cannot Connect to College WIFI using NetworkManager : archlinux (reddit.com)</a>
<div class="language-text highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>Failed to determine AP security information
</span></code></pre></div></p>
<p><a href="https://askubuntu.com/questions/262491/connect-to-a-wpa2-enterprise-connection-via-cli-no-desktop">12.10 - Connect to a WPA2-Enterprise Connection via CLI (no desktop) - Ask Ubuntu</a></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>nmcli<span class="w"> </span>con<span class="w"> </span>add<span class="w"> </span><span class="nb">type</span><span class="w"> </span>wifi<span class="w"> </span>ifname<span class="w"> </span>wlan0<span class="w"> </span>con-name<span class="w"> </span>eduroam<span class="w"> </span>ssid<span class="w"> </span>eduroam<span class="w"> </span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>You<span class="w"> </span>may<span class="w"> </span>edit<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>settings:<span class="w"> </span>connection,<span class="w"> </span><span class="m">802</span>-11-wireless<span class="w"> </span><span class="o">(</span>wifi<span class="o">)</span>,<span class="w"> </span><span class="m">802</span>-11-wireless-security<span class="w"> </span><span class="o">(</span>wifi-sec<span class="o">)</span>,<span class="w"> </span><span class="m">802</span>-1x,<span class="w"> </span>ethtool,<span class="w"> </span>match,<span class="w"> </span>ipv4,<span class="w"> </span>ipv6,<span class="w"> </span>hostname,<span class="w"> </span>tc,<span class="w"> </span>proxy
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>nmcli&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="m">802</span>-1x.eap<span class="w"> </span>peap
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>nmcli&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="m">802</span>-1x.phase2-auth<span class="w"> </span>mschapv2
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>nmcli&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="m">802</span>-1x.identity<span class="w"> </span>xxxxx
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>nmcli&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="m">802</span>-1x.password<span class="w"> </span>xxxxx
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>nmcli&gt;<span class="w"> </span><span class="nb">set</span><span class="w"> </span>wifi-sec.key-mgmt<span class="w"> </span>wpa-eap
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>nmcli&gt;<span class="w"> </span>save
</span><span id="__span-39-10"><a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a>Connection<span class="w"> </span><span class="s1">&#39;eduroam&#39;</span><span class="w"> </span><span class="o">(</span>ae79dc6c-b660-469d-9ecb-3a29504de969<span class="o">)</span><span class="w"> </span>successfully<span class="w"> </span>updated.
</span><span id="__span-39-11"><a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a>nmcli&gt;<span class="w"> </span>activate
</span></code></pre></div>
<h4 id="netplan连接wifi配置">netplan连接wifi配置<a class="headerlink" href="#netplan连接wifi配置" title="Permanent link">&para;</a></h4>
<p><a href="https://linuxhint.com/configure-wifi-ubuntu/">How to configure wifi in Ubuntu (linuxhint.com)</a>
<div class="language-text highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a># netplan yaml
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>network:
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>  version: 2
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>  renderer: networkd
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>  wifis:
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>      wlan0:
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a>        optional: true
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a>        dhcp4: true
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a>        dhcp6: true
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a>        access-points:
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a>          &quot;ustcnet&quot;: {}   # 没有密码
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a>          &quot;ssid2&quot;:
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a>            password: &quot;aaa&quot;
</span></code></pre></div></p>
<p>通过iwconfig查看是否连接成功，出现ESSID则为成功
<div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>➜  ~ iwconfig wlan0
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>wlan0     IEEE 802.11  ESSID:&quot;P2W_5G&quot;
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>          Mode:Managed  Frequency:5.745 GHz  Access Point: 1C:40:E8:11:89:CF
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>          Bit Rate=234 Mb/s   Tx-Power=22 dBm
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>          Retry short limit:7   RTS thr:off   Fragment thr:off
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>          Power Management:on
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>          Link Quality=70/70  Signal level=-35 dBm
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>          Tx excessive retries:0  Invalid misc:7   Missed beacon:0
</span></code></pre></div></p>
<h3 id="音乐">音乐<a class="headerlink" href="#音乐" title="Permanent link">&para;</a></h3>
<p><a href="https://www.reddit.com/r/VFIO/comments/q0oq9e/usb_bluetooth_passthrough_kvm/">USB Bluetooth passthrough KVM : VFIO (reddit.com)</a>
<a href="https://www.tecmint.com/command-line-music-players-for-linux/">The 5 Best Command Line Music Players for Linux (tecmint.com)</a>
<div class="language-text highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>sudo apt install cmus
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>cmus
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>5 # 浏览当前文件夹
</span></code></pre></div></p>
<p>使用vlc
<div class="language-text highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>cvlc file.mp3
</span></code></pre></div></p>
<h3 id="蓝牙">蓝牙<a class="headerlink" href="#蓝牙" title="Permanent link">&para;</a></h3>
<p><a href="https://wiki.archlinux.org/title/bluetooth">Bluetooth - ArchWiki (archlinux.org)</a></p>
<p>命令行工具<code>bluetoothctl</code></p>
<ol>
<li>(optional) Select a default controller with <code>select _MAC_address_</code>.</li>
<li>(optional) Enter <code>power on</code> to turn the power to the controller on if the device is set to off. It is on by default; see <a href="https://wiki.archlinux.org/title/bluetooth#Default_adapter_power_state">#Default adapter power state</a>.</li>
<li>Enter <code>devices</code> to get the MAC address of the device with which to pair.</li>
<li>Enter device discovery mode with <code>scan on</code> command if device is not yet on the list.</li>
<li>Turn the agent on with <code>agent on</code> or choose a specific agent: if you press tab twice after <code>agent</code> you should see a list of available agents. A bluetooth agent is what manages the Bluetooth 'pairing code'. It can either respond to a 'pairing code' coming in, or can send one out. The <code>default-agent</code> should be appropriate in most cases.<a href="https://askubuntu.com/questions/763939/bluetoothctl-what-is-a-bluetooth-agent">[1]</a></li>
<li>Enter <code>pair _MAC_address_</code> to do the pairing (tab completion works).</li>
<li>If using a device without a PIN, one may need to manually trust the device before it can reconnect successfully. Enter <code>trust _MAC_address_</code> to do so.</li>
<li>Enter <code>connect _MAC_address_</code> to establish a connection.</li>
</ol>
<h1 id="网络">网络<a class="headerlink" href="#网络" title="Permanent link">&para;</a></h1>
<h2 id="network相关">network相关<a class="headerlink" href="#network相关" title="Permanent link">&para;</a></h2>
<h3 id="网络配置方法">网络配置方法<a class="headerlink" href="#网络配置方法" title="Permanent link">&para;</a></h3>
<p><a href="https://wiki.debian.org/NetworkConfiguration">NetworkConfiguration - Debian Wiki</a>
- ifupdown
  - debian默认的方法
  - 配置文件为：<code>/etc/network/interfaces</code>
  - ifupdown2是新版，支持更加灵活的配置
- <a href="https://wiki.debian.org/NetworkManager">NetworkManger</a>
  - 目标是尽可能保证连接到网络。使用自动的规则配置网络，比如检测到有线设备就会连接
  - 常用于桌面发行版
- systemd
  - 相关的服务：systemd-networkd, systemd-resolved
  - 配置文件位于<code>/etc/system/network</code>，使用类似于ini格式
- netplan
  - 常见于ubuntu，底层可以基于systemd-networkd或NetworkManager （服务器版和桌面版）
  - 是另一层抽象，使用自己的配置文件<code>/etc/netplan/</code>，使用yaml格式。</p>
<p><a href="https://unix.stackexchange.com/questions/475146/how-exactly-are-networkmanager-networkd-netplan-ifupdown2-and-iproute2-inter">networking - How exactly are NetworkManager, networkd, netplan, ifupdown2, and iproute2 interacting? - Unix &amp; Linux Stack Exchange</a></p>
<h3 id="网络工具">网络工具<a class="headerlink" href="#网络工具" title="Permanent link">&para;</a></h3>
<p><a href="https://www.debian.org/doc/manuals/debian-reference/ch05.en.html">Chapter 5. Network setup (debian.org)</a>
- iproute2
- iptables
- ethtool
- mtr
- nmap
- tcpdump
- dnsutils: nslookup, dig</p>
<h2 id="dhcp">dhcp<a class="headerlink" href="#dhcp" title="Permanent link">&para;</a></h2>
<p>测试dhcp是否工作
- netplan（或者重启容器） + tcpdump  + wireshark</p>
<ul>
<li>-d: debug模式，前台运行</li>
<li>-n: 不设置接口</li>
<li>-s: 指定dhcp server（否则是广播）
<div class="language-text highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a> dhclient -d -n -w -s 192.168.35.1
</span></code></pre></div></li>
</ul>
<h2 id="dns">dns<a class="headerlink" href="#dns" title="Permanent link">&para;</a></h2>
<h3 id="dig">dig<a class="headerlink" href="#dig" title="Permanent link">&para;</a></h3>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>dig [@server] [-p port] [-t type] [-4] [-6] [+trace] name
</span></code></pre></div>
- @ 指定 DNS 查询使用的服务器名称或 IP ，IP 地址可以是用点分隔的 IPv4 地址也可以是冒号分隔的 IPv6 地址。当参数指定的值是服务器的主机名时，dig 命令会在查询该域名服务器前先解析该主机名；
- -p 指定 DNS 查询使用的端口号，默认情况下 DNS 查询使用标准的53端口，若使用非端口则需要通过 -p 参数指定，可使用此选项来测试已配置为侦听非标准端口号上的 DNS 服务器；
- -t 指定 DNS 查询的记录类型，常用的类型包括：A/AAAA/NS/MX/CNAME 等，缺省查询类型是 A ；
- -4 指定 dig 命令仅使用 IPv4 查询传输；
- -6 指定 dig 命令仅使用 IPv6 查询传输；
- <strong>+trace</strong> 跟踪从根名称服务器开始的迭代查询过程，缺省情况不使用跟踪。启用跟踪时，dig 命令会执行迭代查询以解析要查询的名称，显示来自用于解析查询的每个服务器的应答。</p>
<p>指定解析类型
- NS 记录：用来指定域名由哪个 DNS 服务器进行解析；
- CNAME 记录：用来定义域名的别名，方便实现将多个域名解析到同一个 IP 地址；
- A 记录：用来指定主机名对应的 IPv4 地址；
- AAAA 记录：用来指定主机名对应的 IPv6 地址；
- MX 记录：用来指定收件人域名的邮件服务器，SMTP 协议会根据 MX 记录的值来决定邮件的路由过程；
- PTR 记录：常用于反向地址解析，将 IP 地址解析到对应的名称；
- SOA 记录：称为起始授权机构记录，不同于 NS 记录用于标识多台域名解析服务器，SOA 记录用于在多台 NS 记录中哪一台是主 DNS 服务器。</p>
<p>USTC lug加群链接
<div class="language-text highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>dig jointele.ustclug.org TXT
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>;; ANSWER SECTION:
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>jointele.ustclug.org.   600     IN      TXT     &quot;(base64) aHR0cHM6Ly90Lm1lLytYOXg1V09qTVpVbGlZVGRs&quot;
</span></code></pre></div></p>
<h3 id="查看上游dns">查看上游dns<a class="headerlink" href="#查看上游dns" title="Permanent link">&para;</a></h3>
<p>有多种dns设置方式：
- 直接编辑/etc/resolve设置上游dns
- systemd-resolve服务（自动设置dns）</p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>systemd-resolve --status
</span></code></pre></div>
从ubuntu22.04开始
<div class="language-text highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>resolvectl status
</span></code></pre></div></p>
<p><a href="https://askubuntu.com/questions/1409726/systemd-resolve-command-not-found-in-ubuntu-22-04-desktop">systemd-resolve command not found in Ubuntu 22.04 desktop - Ask Ubuntu</a></p>
<h2 id="iptables">iptables<a class="headerlink" href="#iptables" title="Permanent link">&para;</a></h2>
<p>持久化
<div class="language-text highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>iptables-save &gt; /etc/iptables/rules.v4  # 
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>ip6tables-save &gt; /etc/iptables/rules.v6 
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>iptables-restore &lt; /etc/iptables/rules.v4
</span></code></pre></div>
安装iptabels-persistent</p>
<h2 id="遇到的问题">遇到的问题<a class="headerlink" href="#遇到的问题" title="Permanent link">&para;</a></h2>
<h3 id="bridge-iptable不生效">bridge iptable不生效<a class="headerlink" href="#bridge-iptable不生效" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>bridge-nf-call-iptables - BOOLEAN
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>    1 : pass bridged IPv4 traffic to iptables&#39; chains.
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>    0 : disable this.
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a>    Default: 1
</span></code></pre></div>
<h1 id="系统维护">系统维护<a class="headerlink" href="#系统维护" title="Permanent link">&para;</a></h1>
<h2 id="ldap">ldap<a class="headerlink" href="#ldap" title="Permanent link">&para;</a></h2>
<p><a href="https://docs.acsalab.com/ldap/">LDAP - ACSA Docs (acsalab.com)</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>
</span></code></pre></div>
<h2 id="systemd">systemd<a class="headerlink" href="#systemd" title="Permanent link">&para;</a></h2>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>list-units<span class="w"> </span>--type<span class="o">=</span>service<span class="w"> </span>--state<span class="o">=</span>running
</span></code></pre></div>
<h2 id="ssh证书">ssh证书<a class="headerlink" href="#ssh证书" title="Permanent link">&para;</a></h2>
<p><a href="https://docs.ustclug.org/infrastructure/sshca/">SSH Certificate Authority - LUG @ USTC (ustclug.org)</a>
<a href="https://ibug.io/blog/2019/12/manage-servers-with-ssh-ca/">Managing servers with OpenSSH Certificate Authority - iBug</a></p>
<ul>
<li>client验证server身份，需要将server公钥添加到known_hosts中。</li>
<li>当有多个服务器时，client需要同意多次（ssh时的yes）</li>
<li>当server公钥变更时，还得修改known_hosts</li>
<li>server验证client身份，同样需要将client public key添加到authorized_keys中。</li>
<li>多个服务端和客户端，需要将每个client公钥复制到每个server。</li>
<li>修改一个client需要修改所有server</li>
</ul>
<p>SSH CA(Certificate Authority)是一对受信任的密钥，用于签发证书。</p>
<blockquote>
<p>An SSH Certificate Authority (CA) is a trusted key pair that issues certificates.</p>
</blockquote>
<p>签发的证书可以用来授权client或者server。（通过信任host CA，client可以信任所有server，只要它们有host CA签名的证书。同样，通过信任user CA，server可以信任所有的client，只要它们有user CA签名的证书。）</p>
<blockquote>
<p>Certificates can be used for authentication on both the server side and the client side</p>
</blockquote>
<p>SSH CA和X.509证书系统不同的是，证书无法签发新的证书（即无法嵌套）</p>
<p><strong>host CA和user CA可以是不同的，也可以是相同的。</strong>
<img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20231124113058.png" /></p>
<h3 id="ssh-ca">SSH CA<a class="headerlink" href="#ssh-ca" title="Permanent link">&para;</a></h3>
<h4 id="创建ca">创建CA<a class="headerlink" href="#创建ca" title="Permanent link">&para;</a></h4>
<p>和创建一个通常的密钥对一样。
<div class="language-text highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a> sudo ssh-keygen -f yfy_ca -t ed25519 -C &quot;yfy CA&quot;
</span></code></pre></div>
- -t dsa | ecdsa | ecdsa-sk | ed25519 | ed25519-sk | rsa
- -C comment：添加到公钥结尾</p>
<h4 id="签发证书">签发证书<a class="headerlink" href="#签发证书" title="Permanent link">&para;</a></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>ssh-keygen<span class="w"> </span>-s<span class="w"> </span>/path/to/ssh_ca<span class="w"> </span><span class="se">\</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="w">           </span>-I<span class="w"> </span>certificate_identity<span class="w"> </span><span class="se">\</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="w">           </span>-n<span class="w"> </span>principals<span class="w"> </span><span class="se">\</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="w">          </span><span class="o">[</span>-O<span class="w"> </span>options<span class="o">]</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="w">          </span><span class="o">[</span>-V<span class="w"> </span>validity_interval<span class="o">]</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="w">           </span>public_key_file
</span></code></pre></div>
<h3 id="使用host-ca授权server端">使用host CA授权server端<a class="headerlink" href="#使用host-ca授权server端" title="Permanent link">&para;</a></h3>
<p>给server的公钥ssh_host_rsa_key.pub签名
<div class="language-text highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>ssh-keygen -s /path/to/ssh_ca \
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>           -I blog \
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>           -h \
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a>           -n blog.s.ustclug.org,blog.p.ustclug.org,10.254.0.15,202.141.176.98,202.141.160.98 \
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>           ssh_host_rsa_key.pub
</span></code></pre></div>
- -h 表示签发的是host证书（server端）
- -n 用于限制该证书只在提供的域名或者ip上有效。这样即使该证书被偷了，偷窃者也无法伪造我们的服务器。</p>
<p>添加到sshd配置中，这样client连接时会尝试提供该证书
<div class="language-text highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a># /etc/ssh/sshd_config
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>HostCertificate /etc/ssh/ssh_host_rsa_key-cert.pub
</span></code></pre></div></p>
<p>客户端信任CA机构
- 将CA公钥保存在my_ca.pub中
<div class="language-text highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>printf &quot;@cert-authority * &quot; | cat - my_ca.pub &gt;&gt; ~/.ssh/known_hosts
</span></code></pre></div>
- 保存在dns中
  - 利用{command1 &amp;&amp; command2 }将两条命令合并，将其输出重定向
<div class="language-text highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>{printf &quot;@cert-authority * &quot; &amp;&amp; dig ca.yfycloud.top TXT +noall +answer | awk -F&#39;TXT&#39; &#39;{print $NF}&#39; |xargs} &gt;&gt; ~/.ssh/known_hosts
</span></code></pre></div>
使用nslookup(windows bash下测试)
<div class="language-text highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>(printf &quot;@cert-authority * &quot; &amp;&amp; nslookup -q=txt ca.yfycloud.top |grep CA | xargs) &gt;&gt; ~/.ssh/known_hosts
</span></code></pre></div></p>
<h3 id="使用user-ca授权client端">使用user CA授权client端<a class="headerlink" href="#使用user-ca授权client端" title="Permanent link">&para;</a></h3>
<p>服务端信任user CA
<div class="language-text highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>TrustedUserCAKeys /etc/ssh/ssh_user_ca
</span></code></pre></div></p>
<p>给指定用户签发证书
<div class="language-text highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>ssh-keygen -s my_ca -I &lt;user name&gt; -n root,ubuntu id_rsa.pub
</span></code></pre></div>
- 将生成的id_rsa-cert.pub放至id_rsa.pub同一目录，ssh连接服务端时会自动读取。
- -n用于限制允许登录的用户</p>
<h2 id="包管理器apt">包管理器apt<a class="headerlink" href="#包管理器apt" title="Permanent link">&para;</a></h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>apt show pkg -a #查看包的所有仓库  # APT-Sources:
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>--no-install-recommends
</span></code></pre></div>
<h3 id="查询文件">查询文件<a class="headerlink" href="#查询文件" title="Permanent link">&para;</a></h3>
<p><a href="https://serverfault.com/questions/96964/list-of-files-installed-from-apt-package">linux - List of files installed from apt package - Server Fault</a>
<div class="language-text highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>apt install apt-file
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>apt-file update
</span></code></pre></div></p>
<p>列出包的内容
- 已安裝包：<code>dpkg -L deb</code>
- 未安裝包：<code>apt-file list $package</code>
- 有deb文件：<code>dpkg --contents $package.deb</code></p>
<p>查询文件位于哪个包中
<div class="language-text highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>dpkg -S /usr/bin/nvidia-xconfig
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>apt-file search /usr/bin/nvidia-xconfig
</span></code></pre></div></p>
<h3 id="源优先级">源优先级<a class="headerlink" href="#源优先级" title="Permanent link">&para;</a></h3>
<p>按照nvidia官网下载了本地版本的cuda deb，安装后在<code>/var/cuda-repo-ubuntu2004-12-1-local</code>可以看到deb包。但是apt install时仍然采用了nvidia仓库的。
解决方法：
- 直接注释掉<code>/etc/apt/source.list</code>中的nvidia仓库，然后apt update
  - 也有可能source.list中没有developer.download.nvidia.com，那么禁用<code>/etc/apt/source.list.d/</code>下的在线cuda仓库。如
    <code>mv cuda-ubuntu2004-x86_64.list cuda-ubuntu2004-x86_64.list.bak</code>。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>vim /etc/apt/preference.d/cuda-repository-pin-600
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a># Priority 越小优先级越高
</span><span id="__span-66-4"><a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a>Package: nsight-compute
</span><span id="__span-66-5"><a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a>Pin: origin *ubuntu.com*
</span><span id="__span-66-6"><a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>Pin-Priority: -1
</span><span id="__span-66-7"><a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a>
</span><span id="__span-66-8"><a id="__codelineno-66-8" name="__codelineno-66-8" href="#__codelineno-66-8"></a>Package: nsight-systems
</span><span id="__span-66-9"><a id="__codelineno-66-9" name="__codelineno-66-9" href="#__codelineno-66-9"></a>Pin: origin *ubuntu.com*
</span><span id="__span-66-10"><a id="__codelineno-66-10" name="__codelineno-66-10" href="#__codelineno-66-10"></a>Pin-Priority: -1
</span><span id="__span-66-11"><a id="__codelineno-66-11" name="__codelineno-66-11" href="#__codelineno-66-11"></a>
</span><span id="__span-66-12"><a id="__codelineno-66-12" name="__codelineno-66-12" href="#__codelineno-66-12"></a>Package: *
</span><span id="__span-66-13"><a id="__codelineno-66-13" name="__codelineno-66-13" href="#__codelineno-66-13"></a>Pin: release l=NVIDIA CUDA
</span><span id="__span-66-14"><a id="__codelineno-66-14" name="__codelineno-66-14" href="#__codelineno-66-14"></a>Pin-Priority: 600
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a>➜  ~ apt-cache policy gnome-shell-extension-ubuntu-dock
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>gnome-shell-extension-ubuntu-dock:
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>  Installed: (none)
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a>  Candidate: 72~ubuntu5.22.04.2.1
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a>  Version table:
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a>     72~ubuntu5.22.04.2.1 500
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a>        500 http://mirrors.ustc.edu.cn/ubuntu jammy-updates/main amd64 Packages
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a>     72~ubuntu5 500
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a>        500 http://mirrors.ustc.edu.cn/ubuntu jammy/main amd64 Packages
</span></code></pre></div>
<h2 id="用户管理">用户管理<a class="headerlink" href="#用户管理" title="Permanent link">&para;</a></h2>
<ul>
<li>adduser：交互式添加用户</li>
<li>useradd为更底层的命令</li>
<li>usermod -aG sudo user：将用户添加到sudo组</li>
<li>gpasswd -d user group: 将用户从组中删除</li>
</ul>
<h2 id="linux分区">linux分区<a class="headerlink" href="#linux分区" title="Permanent link">&para;</a></h2>
<p><strong>使用fdisk给磁盘分区并挂载</strong></p>
<p>列出磁盘信息</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>sudo fdisk -l [device]
</span></code></pre></div>
<p>进入交互模式</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>sudo fdisk [device]
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>m   #帮助
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>p   #打印当前分区表
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a>g   #创建gpt分区表
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>n   #创建分区
</span></code></pre></div>
<p>fdisk创建分区后</p>
<ul>
<li>通过<code>mkfs.ext4 /dev/sdb1</code>创建文件ext4系统（<em>p.s. 注意：不要使用sdb，而是sdb1指定分区</em>）
<div class="language-text highlight"><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a>mkfs.bfs     mkfs.cramfs  mkfs.ext2    mkfs.ext3    mkfs.ext4    mkfs.fat     mkfs.minix   mkfs.msdos   mkfs.ntfs    mkfs.vfat
</span></code></pre></div></li>
<li>通过<code>lsblk -f</code>显示UUID</li>
<li><code>-f</code>表示打印文件系统</li>
<li>在<code>/etc/fstab</code>中添加挂载条目，然后<code>mount -a</code>表示挂载fstab中的所有条目
  示例
  <div class="language-text highlight"><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>UUID=b7ee63d0-6cea-4615-b7ec-63449c8fa566 /mnt/Disk1    ext4    defaults 0 0
</span></code></pre></div></li>
<li>修改挂载点目录权限，默认只有root用户可以访问</li>
</ul>
<h3 id="swap">swap<a class="headerlink" href="#swap" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a>sudo dd if=/dev/zero of=/swapfile bs=1G count=16
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a>sudo mkswap swapfile
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a>sudo swapon swapfile
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a>
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a>#fstab 
</span><span id="__span-72-6"><a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a>/swapfile none swap sw 0 0
</span></code></pre></div>
<h3 id="mount">mount<a class="headerlink" href="#mount" title="Permanent link">&para;</a></h3>
<p><a href="https://help.ubuntu.com/community/Fstab">Fstab - Community Help Wiki (ubuntu.com)</a></p>
<p>mount只能由root用户操作，导致mount的目录所有者为root，普通用户无法访问</p>
<p>ext4 mount选项中也没有指定uid的方式挂载。<a href="https://man7.org/linux/man-pages/man5/ext4.5.html#Mount_options_for_ext4">ext4(5) - Linux manual page (man7.org)</a></p>
<p>解决办法是：mount之后使用chown命令将挂载的目录改为普通用户。<strong>由于用户信息是写入文件系统的</strong>，所以之后挂载时文件权限仍然是普通用户。</p>
<h3 id="问题">问题<a class="headerlink" href="#问题" title="Permanent link">&para;</a></h3>
<h4 id="使用fdisk扩展分区">使用fdisk扩展分区<a class="headerlink" href="#使用fdisk扩展分区" title="Permanent link">&para;</a></h4>
<p><del>貌似就是fdisk先删除，再创建，保证起始位置一样。</del></p>
<p>尝试发现并不行，fdisk时确实会提示已经有ext4信息了，fdisk后也不用重新创建文件系统，但是mount时会报错。重新创建文件系统后文件便没了。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a>➜  /mnt sudo mount -a
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a>mount: /mnt/Disk2: wrong fs type, bad option, bad superblock on /dev/sdb1, missing codepage or helper program, or other error.
</span></code></pre></div>
<h4 id="virtualbox将fix磁盘转换成动态磁盘">Virtualbox将fix磁盘转换成动态磁盘<a class="headerlink" href="#virtualbox将fix磁盘转换成动态磁盘" title="Permanent link">&para;</a></h4>
<ul>
<li>Virtualbox命令行支持转换</li>
<li>转换后，更改磁盘大小后，发现未分配空间在磁盘中间。原因是，分区表是dos格式，产生了扩展分区。直接使用gparted工具进行扩展即可</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a>编号  起始点  结束点  大小    类型      文件系统  标志
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a> 1    1049kB  538MB   537MB   primary   fat32     启动
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a> 2    539MB   53.7GB  53.1GB  extended
</span><span id="__span-74-4"><a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a> 5    539MB   53.7GB  53.1GB  logical   ext4
</span></code></pre></div>
<h2 id="日志journalctl">日志/journalctl<a class="headerlink" href="#日志journalctl" title="Permanent link">&para;</a></h2>
<p><a href="https://www.digitalocean.com/community/tutorials/how-to-use-journalctl-to-view-and-manipulate-systemd-logs">How To Use Journalctl to View and Manipulate Systemd Logs | DigitalOcean</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a>journalctl --list-boots
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a>journalctl -b # 自上次reboot开始log
</span><span id="__span-75-3"><a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a>journalctl -b -1 # 上一次reboot
</span><span id="__span-75-4"><a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a>
</span><span id="__span-75-5"><a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a>journalctl --since &quot;2015-01-10&quot; --until &quot;2015-01-11 03:00&quot;  # YYYY-MM-DD HH:MM:SS
</span><span id="__span-75-6"><a id="__codelineno-75-6" name="__codelineno-75-6" href="#__codelineno-75-6"></a>journalctl --since yesterday
</span><span id="__span-75-7"><a id="__codelineno-75-7" name="__codelineno-75-7" href="#__codelineno-75-7"></a>
</span><span id="__span-75-8"><a id="__codelineno-75-8" name="__codelineno-75-8" href="#__codelineno-75-8"></a>journalctl -k # 内核
</span></code></pre></div>
<h3 id="日志文件">日志文件<a class="headerlink" href="#日志文件" title="Permanent link">&para;</a></h3>
<ul>
<li><code>/run/log/journal/MACHINE-ID/</code>：存储在内存中，重启消失</li>
<li><code>/var/log/journal/MACHINE-ID</code>：存储在磁盘中</li>
</ul>
<p>查看大小：
<div class="language-text highlight"><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>journalctl --disk-usage  # 日志大小，包含归档日志
</span></code></pre></div>
<img alt="" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/picgo/20230326220602.png" /></p>
<p>清除：
- vacuum：删除归档的日志（不会删除active的）
- rotate：将active归档。可以合并到上条命令
<div class="language-text highlight"><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>journalctl --rotate
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a>
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a>journalctl --vacuum-time=1months  # 一个月以前的旧日志。格式：1m, 2h, 2weeks, 4months
</span><span id="__span-77-4"><a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a>journalctl --vacuum-size=100M     # 只保留新的100M大小的日志
</span></code></pre></div></p>
<p>设置最大日志大小：
<div class="language-text highlight"><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a>/etc/systemd/journald.conf
</span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a>SystemMaxUse=100M
</span></code></pre></div></p>
<p>SystemMaxUse=, RuntimeMaxUse=</p>
<blockquote>
<p>Enforce size limits on the journal files stored. The options prefixed with "System" apply to the journal files when stored on a persistent file system, more specifically /var/log/journal. The options prefixed with "Runtime" apply to the journal files when stored on a volatile in-memory file system, more specifically /run/log/journal.</p>
</blockquote>
<p>MaxFileSec=</p>
<blockquote>
<p>The maximum time to store entries in a single journal file before rotating to the next one.</p>
</blockquote>
<h3 id="查看重启原因">查看重启原因<a class="headerlink" href="#查看重启原因" title="Permanent link">&para;</a></h3>
<p>https://unix.stackexchange.com/a/278166</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a>last -x |tac |less  # last显示最后logged用户，tac将文本逆序
</span></code></pre></div>
<ul>
<li>正常顺序：</li>
<li>reboot没有对应的shutdown表示非正常关机
<div class="language-text highlight"><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a>shutdown system down  ... &lt;-- first the system shuts down   
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a>reboot   system boot  ... &lt;-- afterwards the system boots
</span><span id="__span-80-3"><a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a>runlevel (to lvl 3)  # runlevel3表示无图形界面，开机桌面环境可能是runlevel 5
</span></code></pre></div>
<img alt="" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230424194325.png" /></li>
</ul>
<h3 id="查看crontab日志">查看crontab日志<a class="headerlink" href="#查看crontab日志" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a>grep CRON /var/log/syslog
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a>
</span><span id="__span-81-3"><a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a>jou -u cron
</span></code></pre></div>
<h2 id="更换内核">更换内核<a class="headerlink" href="#更换内核" title="Permanent link">&para;</a></h2>
<h3 id="编译">编译<a class="headerlink" href="#编译" title="Permanent link">&para;</a></h3>
<p><a href="https://debian-handbook.info/browse/stable/sect.kernel-compilation.html">8.10. Compiling a Kernel (debian-handbook.info)</a></p>
<h4 id="disabling-the-debug-information">disabling the debug information<a class="headerlink" href="#disabling-the-debug-information" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a>$ make deb-pkg LOCALVERSION=-falcot KDEB_PKGVERSION=$(make kernelversion)-1
</span><span id="__span-82-2"><a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a>[...]
</span><span id="__span-82-3"><a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a>$ ls ../*.deb
</span><span id="__span-82-4"><a id="__codelineno-82-4" name="__codelineno-82-4" href="#__codelineno-82-4"></a>../linux-headers-5.10.46-falcot_5.10.46-1_amd64.deb
</span><span id="__span-82-5"><a id="__codelineno-82-5" name="__codelineno-82-5" href="#__codelineno-82-5"></a>../linux-image-5.10.46-falcot_5.10.46-1_amd64.deb
</span><span id="__span-82-6"><a id="__codelineno-82-6" name="__codelineno-82-6" href="#__codelineno-82-6"></a>../linux-image-5.10.46-falcot-dbg_5.10.46-1_amd64.deb
</span><span id="__span-82-7"><a id="__codelineno-82-7" name="__codelineno-82-7" href="#__codelineno-82-7"></a>../linux-libc-dev_5.10.46-1_amd64.deb
</span></code></pre></div>
<blockquote>
<p>The whole process requires around 20 GB of free space, at least 8 GB of RAM, and several hours of compilation (utilizing one core) for a standard amd64 Debian kernel. These requirements can be drastically reduced by disabling the debug information using <code>CONFIG_DEBUG_INFO=n</code>, but this will make it impossible to trace kernel errors (“oops”) using <code>gdb</code> and also stop the creation of the linux-image-<em>version</em>-dbg package.</p>
</blockquote>
<div class="language-text highlight"><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a># 获得当前官方kernel编译配置，如/boot/config-5.19.0-35-generic
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>kernel_config=$(ls /boot/config-* | grep generic | sort -Vr | head -n 1) 
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a>cp &quot;${kernel_config}&quot; .config
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a>
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a># 基于当前.confg，只询问新内核中新功能的配置
</span><span id="__span-83-6"><a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a>make oldconfig 
</span><span id="__span-83-7"><a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a>
</span><span id="__span-83-8"><a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a># 编译
</span><span id="__span-83-9"><a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a>make -j &quot;$(nproc)&quot; bindeb-pkg LOCALVERSION=&quot;${kernel_localversion}&quot; || exit
</span><span id="__span-83-10"><a id="__codelineno-83-10" name="__codelineno-83-10" href="#__codelineno-83-10"></a>
</span><span id="__span-83-11"><a id="__codelineno-83-11" name="__codelineno-83-11" href="#__codelineno-83-11"></a># 安装
</span><span id="__span-83-12"><a id="__codelineno-83-12" name="__codelineno-83-12" href="#__codelineno-83-12"></a>sudo dpkg -i ../linux-image-${kernel_version}${kernel_localversion}*.deb ../linux-headers-${kernel_version}${kernel_localversion}*.deb
</span><span id="__span-83-13"><a id="__codelineno-83-13" name="__codelineno-83-13" href="#__codelineno-83-13"></a>
</span><span id="__span-83-14"><a id="__codelineno-83-14" name="__codelineno-83-14" href="#__codelineno-83-14"></a># 更新grub，通过GRUB_DEFAULT选择编译的内核
</span><span id="__span-83-15"><a id="__codelineno-83-15" name="__codelineno-83-15" href="#__codelineno-83-15"></a>vim /etc/default/grub
</span><span id="__span-83-16"><a id="__codelineno-83-16" name="__codelineno-83-16" href="#__codelineno-83-16"></a>grub_line=&quot;GRUB_DEFAULT=\&quot;Advanced options for Ubuntu&gt;Ubuntu, with Linux ${kernel_version}${kernel_localversion}\&quot;&quot;
</span><span id="__span-83-17"><a id="__codelineno-83-17" name="__codelineno-83-17" href="#__codelineno-83-17"></a>sudo sed -i -e &quot;s/^#GRUB_DEFAULT=.*/\0\n${grub_line}/&quot; &quot;${grub_config}&quot;
</span><span id="__span-83-18"><a id="__codelineno-83-18" name="__codelineno-83-18" href="#__codelineno-83-18"></a>
</span><span id="__span-83-19"><a id="__codelineno-83-19" name="__codelineno-83-19" href="#__codelineno-83-19"></a>sudo update-grub
</span></code></pre></div>
<h4 id="missing-certificate">missing certificate<a class="headerlink" href="#missing-certificate" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Building a custom kernel based on these settings will fail if <code>debian/certs/debian-uefi-certs.pem</code> does not exist. This file can either be obtained from the kernel team's Git repository and placed into the source tree, or it can be replaced by your own certificate(s), or you'll have to disable the setting via <code>CONFIG_SYSTEM_TRUSTED_KEYS=""</code>.</p>
</blockquote>
<div class="language-text highlight"><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>sed -i -e &#39;/^CONFIG_SYSTEM_TRUSTED_KEYS=/ c\CONFIG_SYSTEM_TRUSTED_KEYS=\&quot;\&quot;&#39; .config
</span><span id="__span-84-2"><a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a>sed -i -e &#39;/^CONFIG_SYSTEM_REVOCATION_KEYS=/ c\CONFIG_SYSTEM_REVOCATION_KEY=\&quot;\&quot;&#39; .config
</span></code></pre></div>
<h3 id="dkms">dkms<a class="headerlink" href="#dkms" title="Permanent link">&para;</a></h3>
<p>使用patched kernel后，没有了zfs，无法启动lxc。
<a href="https://askubuntu.com/questions/1268519/ubuntu-20-04-building-patched-kernel-results-in-no-zfs-support">Ubuntu 20.04, building patched kernel results in no ZFS support - Ask Ubuntu</a></p>
<p>https://debian-handbook.info/browse/stable/sect.kernel-compilation.html#sect.modules-build
- 一些模块不能打包到linux内核中
- 使用dkms自动化编译这些模块。需要安装了对应的<code>linux-headers-*</code></p>
<blockquote>
<p>Compiling External Modules
Some modules are maintained outside of the official Linux kernel. To use them, they must be compiled alongside the matching kernel.
While we could manually extract the tarball and build the module, in practice we prefer to automate all this using the DKMS framework (Dynamic Kernel Module Support). Most modules offer the required DKMS integration in a package ending with a <code>-dkms</code> suffix.  In our case, installing dahdi-dkms is all that is needed to compile the kernel module for the current kernel provided that we have the linux-headers-* package matching the installed kernel. For instance, if you use linux-image-amd64, you would also install linux-headers-amd64.</p>
</blockquote>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>zfs-dkms
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a>
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a>dkms<span class="w"> </span>status
</span><span id="__span-85-4"><a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a><span class="c1"># zfs/2.1.5, 5.19.17, x86_64: installed</span>
</span><span id="__span-85-5"><a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a>
</span><span id="__span-85-6"><a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a>dkms<span class="w"> </span>build
</span><span id="__span-85-7"><a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a>
</span><span id="__span-85-8"><a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a>dkms<span class="w"> </span>install
</span><span id="__span-85-9"><a id="__codelineno-85-9" name="__codelineno-85-9" href="#__codelineno-85-9"></a>dkms<span class="w"> </span>uninstall<span class="w">  </span>zfs/2.1.5
</span><span id="__span-85-10"><a id="__codelineno-85-10" name="__codelineno-85-10" href="#__codelineno-85-10"></a>
</span><span id="__span-85-11"><a id="__codelineno-85-11" name="__codelineno-85-11" href="#__codelineno-85-11"></a>dkms<span class="w"> </span>add
</span><span id="__span-85-12"><a id="__codelineno-85-12" name="__codelineno-85-12" href="#__codelineno-85-12"></a>dkms<span class="w"> </span>remove<span class="w"> </span>zenpower/<span class="k">$(</span>VERSION<span class="k">)</span><span class="w">   </span>--all
</span></code></pre></div>
<p>例子：<a href="https://github.com/Ta180m/zenpower3">Ta180m/zenpower3: Migrated to Gitea (github.com)</a>
- 安装header
  - pve使用自己的内核，因此也是安装自己的header
<div class="language-text highlight"><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a>apt install linux-headers-$(uname -r)
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>
</span><span id="__span-86-3"><a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a>#pve
</span><span id="__span-86-4"><a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a>apt install proxmox-headers-$(uname -r)
</span></code></pre></div></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>dkms-install:
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a>        dkms --version &gt;&gt; /dev/null
</span><span id="__span-87-3"><a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a>        mkdir -p $(DKMS_ROOT_PATH)
</span><span id="__span-87-4"><a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a>        cp $(CURDIR)/dkms.conf $(DKMS_ROOT_PATH)
</span><span id="__span-87-5"><a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a>        cp $(CURDIR)/Makefile $(DKMS_ROOT_PATH)
</span><span id="__span-87-6"><a id="__codelineno-87-6" name="__codelineno-87-6" href="#__codelineno-87-6"></a>        cp $(CURDIR)/zenpower.c $(DKMS_ROOT_PATH)
</span><span id="__span-87-7"><a id="__codelineno-87-7" name="__codelineno-87-7" href="#__codelineno-87-7"></a>
</span><span id="__span-87-8"><a id="__codelineno-87-8" name="__codelineno-87-8" href="#__codelineno-87-8"></a>        sed -e &quot;s/@CFLGS@/${MCFLAGS}/&quot; \
</span><span id="__span-87-9"><a id="__codelineno-87-9" name="__codelineno-87-9" href="#__codelineno-87-9"></a>            -e &quot;s/@VERSION@/$(VERSION)/&quot; \
</span><span id="__span-87-10"><a id="__codelineno-87-10" name="__codelineno-87-10" href="#__codelineno-87-10"></a>            -i $(DKMS_ROOT_PATH)/dkms.conf
</span><span id="__span-87-11"><a id="__codelineno-87-11" name="__codelineno-87-11" href="#__codelineno-87-11"></a>
</span><span id="__span-87-12"><a id="__codelineno-87-12" name="__codelineno-87-12" href="#__codelineno-87-12"></a>        dkms add zenpower/$(VERSION)
</span><span id="__span-87-13"><a id="__codelineno-87-13" name="__codelineno-87-13" href="#__codelineno-87-13"></a>        dkms build zenpower/$(VERSION)
</span><span id="__span-87-14"><a id="__codelineno-87-14" name="__codelineno-87-14" href="#__codelineno-87-14"></a>        dkms install zenpower/$(VERSION)
</span><span id="__span-87-15"><a id="__codelineno-87-15" name="__codelineno-87-15" href="#__codelineno-87-15"></a>
</span><span id="__span-87-16"><a id="__codelineno-87-16" name="__codelineno-87-16" href="#__codelineno-87-16"></a>dkms-uninstall:
</span><span id="__span-87-17"><a id="__codelineno-87-17" name="__codelineno-87-17" href="#__codelineno-87-17"></a>        dkms remove zenpower/$(VERSION) --all
</span><span id="__span-87-18"><a id="__codelineno-87-18" name="__codelineno-87-18" href="#__codelineno-87-18"></a>        rm -rf $(DKMS_ROOT_PATH)
</span></code></pre></div>
<h3 id="删除内核">删除内核<a class="headerlink" href="#删除内核" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>dpkg --get-selections | grep 5.19.17
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>apt remove xxx
</span></code></pre></div>
<p>或者手动删除
<div class="language-text highlight"><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a>cd /boot/
</span><span id="__span-89-2"><a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a>rm -rf *3.19.8*
</span><span id="__span-89-3"><a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a>
</span><span id="__span-89-4"><a id="__codelineno-89-4" name="__codelineno-89-4" href="#__codelineno-89-4"></a>update-grub
</span></code></pre></div></p>
<h2 id="内核模块">内核模块<a class="headerlink" href="#内核模块" title="Permanent link">&para;</a></h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a>find /lib/modules/$(uname -r) -type f -name &#39;*.ko&#39;
</span><span id="__span-90-2"><a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a>
</span><span id="__span-90-3"><a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a>modprobe xxx
</span><span id="__span-90-4"><a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a>modprobe -r xxx # 删除
</span><span id="__span-90-5"><a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a>
</span><span id="__span-90-6"><a id="__codelineno-90-6" name="__codelineno-90-6" href="#__codelineno-90-6"></a>
</span><span id="__span-90-7"><a id="__codelineno-90-7" name="__codelineno-90-7" href="#__codelineno-90-7"></a>lsmod |grep xxx
</span><span id="__span-90-8"><a id="__codelineno-90-8" name="__codelineno-90-8" href="#__codelineno-90-8"></a>rmmod xxx
</span></code></pre></div>
<ol>
<li>
<p><code>depmod</code>: 用于更新内核模块依赖信息。<code>depmod</code> 命令会扫描系统中的内核模块，并为它们生成一个依赖关系文件，通常在 <code>/lib/modules/</code> 目录下。这个文件通常被命名为 <code>modules.dep</code>，它列出了每个模块及其依赖的其他模块，以确保内核模块正确加载和卸载。</p>
</li>
<li>
<p><code>lsmod</code>: 用于列出当前加载到内核中的模块。<code>lsmod</code> 命令会显示已加载模块的列表，以及它们的大小、使用次数和依赖关系。</p>
</li>
<li>
<p><code>modprobe</code>: 用于动态加载和卸载内核模块。<code>modprobe</code> 命令可以根据模块名称自动加载模块，并处理其依赖关系。它还可以用于卸载模块，或者通过参数指定模块选项。</p>
</li>
<li>
<p><code>insmod</code>: 用于手动加载一个内核模块。<code>insmod</code> 命令可以直接加载指定的模块文件，但不会处理模块的依赖关系。因此，通常建议使用 <code>modprobe</code> 来加载模块，以确保正确处理依赖关系。</p>
</li>
<li>
<p><code>rmmod</code>: 用于从内核中卸载一个已加载的模块。<code>rmmod</code> 命令接受模块名称作为参数，并会尝试卸载该模块，前提是它没有被其他模块所使用。</p>
</li>
<li>
<p><code>modinfo</code>: 用于获取有关内核模块的信息。<code>modinfo</code> 命令可以列出有关模块的信息，如作者、描述、参数等。</p>
</li>
<li>
<p><code>ls /lib/modules/</code>: 这个命令用于查看系统中可用的内核模块。在 <code>/lib/modules/</code> 目录下，你可以找到与已安装内核版本相关的模块文件和依赖信息。</p>
</li>
</ol>
<h1 id="硬件相关">硬件相关<a class="headerlink" href="#硬件相关" title="Permanent link">&para;</a></h1>
<h2 id="关闭beepbell">关闭beep/bell<a class="headerlink" href="#关闭beepbell" title="Permanent link">&para;</a></h2>
<p><a href="https://linuxconfig.org/turn-off-beep-bell-on-linux-terminal">Turn off beep / bell on linux terminal - Linux Tutorials - Learn Linux Configuration</a></p>
<h2 id="查看cpucache">查看CPU,cache<a class="headerlink" href="#查看cpucache" title="Permanent link">&para;</a></h2>
<p>查看cache大小
- vim /proc/cpuinfo
  - cache_size不知道具体含义，L2/per core？
  - cache_alignment为L1 cache line大小?
<div class="language-text highlight"><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a>cache size      : 512 KB
</span><span id="__span-91-2"><a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a>clflush size    : 64
</span><span id="__span-91-3"><a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a>cache_alignment : 64
</span><span id="__span-91-4"><a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a>address sizes   : 48 bits physical, 48 bits virtual
</span></code></pre></div></p>
<ul>
<li>lscpu</li>
<li>
<p>很详细，可以看到cpu flag, numa, cache
<div class="language-text highlight"><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a>Caches (sum of all):
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a>  L1d:                   256 KiB (8 instances)
</span><span id="__span-92-3"><a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a>  L1i:                   256 KiB (8 instances)
</span><span id="__span-92-4"><a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a>  L2:                    4 MiB (8 instances)
</span><span id="__span-92-5"><a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a>  L3:                    32 MiB (1 instance)
</span><span id="__span-92-6"><a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a>NUMA:
</span><span id="__span-92-7"><a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a>  NUMA node(s):          1
</span><span id="__span-92-8"><a id="__codelineno-92-8" name="__codelineno-92-8" href="#__codelineno-92-8"></a>  NUMA node0 CPU(s):     0-15
</span></code></pre></div></p>
</li>
<li>
<p>getconf -a | grep CACHE</p>
</li>
<li>可以看到cache line大小
<div class="language-text highlight"><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a>LEVEL1_ICACHE_SIZE                 32768
</span><span id="__span-93-2"><a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a>LEVEL1_ICACHE_ASSOC
</span><span id="__span-93-3"><a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a>LEVEL1_ICACHE_LINESIZE             64
</span><span id="__span-93-4"><a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a>LEVEL1_DCACHE_SIZE                 32768
</span><span id="__span-93-5"><a id="__codelineno-93-5" name="__codelineno-93-5" href="#__codelineno-93-5"></a>LEVEL1_DCACHE_ASSOC                8
</span><span id="__span-93-6"><a id="__codelineno-93-6" name="__codelineno-93-6" href="#__codelineno-93-6"></a>LEVEL1_DCACHE_LINESIZE             64
</span><span id="__span-93-7"><a id="__codelineno-93-7" name="__codelineno-93-7" href="#__codelineno-93-7"></a>LEVEL2_CACHE_SIZE                  524288
</span><span id="__span-93-8"><a id="__codelineno-93-8" name="__codelineno-93-8" href="#__codelineno-93-8"></a>LEVEL2_CACHE_ASSOC                 8
</span><span id="__span-93-9"><a id="__codelineno-93-9" name="__codelineno-93-9" href="#__codelineno-93-9"></a>LEVEL2_CACHE_LINESIZE              64
</span><span id="__span-93-10"><a id="__codelineno-93-10" name="__codelineno-93-10" href="#__codelineno-93-10"></a>LEVEL3_CACHE_SIZE                  33554432
</span><span id="__span-93-11"><a id="__codelineno-93-11" name="__codelineno-93-11" href="#__codelineno-93-11"></a>LEVEL3_CACHE_ASSOC                 0
</span><span id="__span-93-12"><a id="__codelineno-93-12" name="__codelineno-93-12" href="#__codelineno-93-12"></a>LEVEL3_CACHE_LINESIZE              64
</span><span id="__span-93-13"><a id="__codelineno-93-13" name="__codelineno-93-13" href="#__codelineno-93-13"></a>LEVEL4_CACHE_SIZE
</span><span id="__span-93-14"><a id="__codelineno-93-14" name="__codelineno-93-14" href="#__codelineno-93-14"></a>LEVEL4_CACHE_ASSOC
</span><span id="__span-93-15"><a id="__codelineno-93-15" name="__codelineno-93-15" href="#__codelineno-93-15"></a>LEVEL4_CACHE_LINESIZE
</span></code></pre></div></li>
</ul>
<h2 id="lspci">lspci<a class="headerlink" href="#lspci" title="Permanent link">&para;</a></h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a>apt install pciutils
</span></code></pre></div>
<h3 id="常用选项">常用选项<a class="headerlink" href="#常用选项" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a>lspci -k  #查看内核驱动
</span><span id="__span-95-2"><a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a>
</span><span id="__span-95-3"><a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a>lspci -nn #查看设备id
</span><span id="__span-95-4"><a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a>
</span><span id="__span-95-5"><a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a>lspci -vv # 查看pcie链路速度：LnkCap, LnkSta
</span><span id="__span-95-6"><a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a>- 2.5 GT/s = PCI-e gen 1
</span><span id="__span-95-7"><a id="__codelineno-95-7" name="__codelineno-95-7" href="#__codelineno-95-7"></a>- 5 GT/s = PCI-e gen 2
</span><span id="__span-95-8"><a id="__codelineno-95-8" name="__codelineno-95-8" href="#__codelineno-95-8"></a>- 8 GT/s = PCI-e gen 3
</span></code></pre></div>
<h3 id="指定设备">指定设备<a class="headerlink" href="#指定设备" title="Permanent link">&para;</a></h3>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a>-s [[[[&lt;domain&gt;]:]&lt;bus&gt;]:][&lt;device&gt;][.[&lt;func&gt;]]
</span></code></pre></div>
- domain: 0 to ffff
- bus: 0-ff
- device: 0-ff
- function: 0-7
- 可以省去或者设置为<code>*</code>表示任意值
<div class="language-text highlight"><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a>-d [vendor]:[device][:class[:prog-if]]
</span></code></pre></div>
- vendor: e.g. 10de
- device: : e.g. 1c02</p>
<h3 id="查看树状结构">查看树状结构<a class="headerlink" href="#查看树状结构" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a>lspci -tv
</span></code></pre></div>
<ul>
<li>03.1：是 slot and function number of the PCIe root hub</li>
<li>[08]表示在其后面的设备的bus为08</li>
<li>00.0为device和function编号
<div class="language-text highlight"><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a>+-03.1-[08]--+-00.0  NVIDIA Corporation GP106 [GeForce GTX 1060 3GB]
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a>           |            \-00.1  NVIDIA Corporation GP106 High Definition Audio Controller
</span></code></pre></div></li>
</ul>
<h2 id="监控温度功耗">监控(温度、功耗)<a class="headerlink" href="#监控温度功耗" title="Permanent link">&para;</a></h2>
<h3 id="ssd温度">SSD温度<a class="headerlink" href="#ssd温度" title="Permanent link">&para;</a></h3>
<p><a href="https://www.cyberciti.biz/faq/linux-find-nvme-ssd-temperature-using-command-line/">Linux find NVMe SSD temperature using command line - nixCraft (cyberciti.biz)</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a>apt install nvme-cli
</span><span id="__span-100-2"><a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a>
</span><span id="__span-100-3"><a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a>sudo nvme smart-log /dev/nvme0
</span></code></pre></div>
<h3 id="cpu频率功耗">CPU频率、功耗<a class="headerlink" href="#cpu频率功耗" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a>lscpu -e
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>CPU NODE SOCKET CORE L1d:L1i:L2:L3 ONLINE    MAXMHZ    MINMHZ      MHZ
</span><span id="__span-101-3"><a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a>  0    0      0    0 0:0:0:0           是 4850.1948 2200.0000 3023.077
</span><span id="__span-101-4"><a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a>  1    0      0    1 1:1:1:0           是 4850.1948 2200.0000 3167.647
</span><span id="__span-101-5"><a id="__codelineno-101-5" name="__codelineno-101-5" href="#__codelineno-101-5"></a>  2    0      0    2 2:2:2:0           是 4850.1948 2200.0000 2529.517
</span><span id="__span-101-6"><a id="__codelineno-101-6" name="__codelineno-101-6" href="#__codelineno-101-6"></a>  3    0      0    3 3:3:3:0           是 4850.1948 2200.0000 2895.147
</span><span id="__span-101-7"><a id="__codelineno-101-7" name="__codelineno-101-7" href="#__codelineno-101-7"></a>  4    0      0    4 4:4:4:0           是 4850.1948 2200.0000 3068.640
</span><span id="__span-101-8"><a id="__codelineno-101-8" name="__codelineno-101-8" href="#__codelineno-101-8"></a>  5    0      0    5 5:5:5:0           是 4850.1948 2200.0000 2814.150
</span><span id="__span-101-9"><a id="__codelineno-101-9" name="__codelineno-101-9" href="#__codelineno-101-9"></a>  6    0      0    6 6:6:6:0           是 4850.1948 2200.0000 3097.454
</span><span id="__span-101-10"><a id="__codelineno-101-10" name="__codelineno-101-10" href="#__codelineno-101-10"></a>  7    0      0    7 7:7:7:0           是 4850.1948 2200.0000 3148.684
</span><span id="__span-101-11"><a id="__codelineno-101-11" name="__codelineno-101-11" href="#__codelineno-101-11"></a>  8    0      0    0 0:0:0:0           是 4850.1948 2200.0000 2938.599
</span><span id="__span-101-12"><a id="__codelineno-101-12" name="__codelineno-101-12" href="#__codelineno-101-12"></a>  9    0      0    1 1:1:1:0           是 4850.1948 2200.0000 3376.774
</span><span id="__span-101-13"><a id="__codelineno-101-13" name="__codelineno-101-13" href="#__codelineno-101-13"></a> 10    0      0    2 2:2:2:0           是 4850.1948 2200.0000 4420.665
</span><span id="__span-101-14"><a id="__codelineno-101-14" name="__codelineno-101-14" href="#__codelineno-101-14"></a> 11    0      0    3 3:3:3:0           是 4850.1948 2200.0000 2996.655
</span><span id="__span-101-15"><a id="__codelineno-101-15" name="__codelineno-101-15" href="#__codelineno-101-15"></a> 12    0      0    4 4:4:4:0           是 4850.1948 2200.0000 3100.166
</span><span id="__span-101-16"><a id="__codelineno-101-16" name="__codelineno-101-16" href="#__codelineno-101-16"></a> 13    0      0    5 5:5:5:0           是 4850.1948 2200.0000 2894.990
</span><span id="__span-101-17"><a id="__codelineno-101-17" name="__codelineno-101-17" href="#__codelineno-101-17"></a> 14    0      0    6 6:6:6:0           是 4850.1948 2200.0000 3244.797
</span><span id="__span-101-18"><a id="__codelineno-101-18" name="__codelineno-101-18" href="#__codelineno-101-18"></a> 15    0      0    7 7:7:7:0           是 4850.1948 2200.0000 2897.287
</span></code></pre></div>
<p><a href="https://wiki.archlinux.org/title/CPU_frequency_scaling">CPU frequency scaling - ArchWiki (archlinux.org)</a></p>
<p>查看功耗
<div class="language-text highlight"><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a>sudo turbostat
</span></code></pre></div></p>
<h2 id="音频">音频<a class="headerlink" href="#音频" title="Permanent link">&para;</a></h2>
<h3 id="alsa">ALSA<a class="headerlink" href="#alsa" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a>yfy@TianYi310 ➜  /dev aplay -l
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>**** PLAYBACK 硬體裝置清單 ****
</span><span id="__span-103-3"><a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a>card 0: PCH [HDA Intel PCH], device 0: CX20751/2 Analog [CX20751/2 Analog]
</span><span id="__span-103-4"><a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a>  子设备: 1/1
</span><span id="__span-103-5"><a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a>  子设备 #0: subdevice #0
</span><span id="__span-103-6"><a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a>card 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]
</span><span id="__span-103-7"><a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a>  子设备: 1/1
</span><span id="__span-103-8"><a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a>  子设备 #0: subdevice #0
</span><span id="__span-103-9"><a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a>card 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]
</span><span id="__span-103-10"><a id="__codelineno-103-10" name="__codelineno-103-10" href="#__codelineno-103-10"></a>  子设备: 1/1
</span><span id="__span-103-11"><a id="__codelineno-103-11" name="__codelineno-103-11" href="#__codelineno-103-11"></a>  子设备 #0: subdevice #0
</span><span id="__span-103-12"><a id="__codelineno-103-12" name="__codelineno-103-12" href="#__codelineno-103-12"></a>card 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]
</span><span id="__span-103-13"><a id="__codelineno-103-13" name="__codelineno-103-13" href="#__codelineno-103-13"></a>  子设备: 1/1
</span><span id="__span-103-14"><a id="__codelineno-103-14" name="__codelineno-103-14" href="#__codelineno-103-14"></a>  子设备 #0: subdevice #0
</span><span id="__span-103-15"><a id="__codelineno-103-15" name="__codelineno-103-15" href="#__codelineno-103-15"></a>card 0: PCH [HDA Intel PCH], device 9: HDMI 3 [HDMI 3]
</span><span id="__span-103-16"><a id="__codelineno-103-16" name="__codelineno-103-16" href="#__codelineno-103-16"></a>  子设备: 1/1
</span><span id="__span-103-17"><a id="__codelineno-103-17" name="__codelineno-103-17" href="#__codelineno-103-17"></a>  子设备 #0: subdevice #0
</span><span id="__span-103-18"><a id="__codelineno-103-18" name="__codelineno-103-18" href="#__codelineno-103-18"></a>card 0: PCH [HDA Intel PCH], device 10: HDMI 4 [HDMI 4]
</span><span id="__span-103-19"><a id="__codelineno-103-19" name="__codelineno-103-19" href="#__codelineno-103-19"></a>  子设备: 1/1
</span><span id="__span-103-20"><a id="__codelineno-103-20" name="__codelineno-103-20" href="#__codelineno-103-20"></a>  子设备 #0: subdevice #0
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a>root@p2w \u@\h:\w\$ cat /proc/asound/modules
</span><span id="__span-104-2"><a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a> 0 snd_usb_audio
</span><span id="__span-104-3"><a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a>
</span><span id="__span-104-4"><a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a>root@p2w \u@\h:\w\$ arecord -l
</span><span id="__span-104-5"><a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a>**** List of CAPTURE Hardware Devices ****
</span><span id="__span-104-6"><a id="__codelineno-104-6" name="__codelineno-104-6" href="#__codelineno-104-6"></a>card 0: Lanseyaoji [Lanseyaoji], device 0: USB Audio [USB Audio]
</span><span id="__span-104-7"><a id="__codelineno-104-7" name="__codelineno-104-7" href="#__codelineno-104-7"></a>  Subdevices: 1/1
</span><span id="__span-104-8"><a id="__codelineno-104-8" name="__codelineno-104-8" href="#__codelineno-104-8"></a>  Subdevice #0: subdevice #0
</span></code></pre></div>
<h4 id="arecord-aplay">arecord, aplay<a class="headerlink" href="#arecord-aplay" title="Permanent link">&para;</a></h4>
<p>arecord, aplay - command-line sound recorder and player for ALSA soundcard driver</p>
<p><code>arecord -d 10 -f cd -t wav -D copy foobar.wav</code> will record foobar.wav as a 10-second, CD-quality wave file</p>
<p>aplay播放貌似只支持WAVE格式，mp3播放是噪音
<div class="language-text highlight"><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a>yfy@TianYi310 ➜  Downloads aplay &#39;Laco - NEXUS.mp3&#39;
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>正在播放 原始資料 &#39;Laco - NEXUS.mp3&#39; : Signed 16 bit Little Endian, 频率8000Hz， Mono
</span><span id="__span-105-3"><a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a>^C被信号 中断...退出
</span><span id="__span-105-4"><a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a>yfy@TianYi310 ➜  Downloads aplay filename.wav
</span><span id="__span-105-5"><a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a>正在播放 WAVE &#39;filename.wav&#39; : Signed 16 bit Little Endian, 频率44100Hz， Stereo
</span></code></pre></div></p>
<h5 id="aplay--l-没有设备">aplay -l 没有设备<a class="headerlink" href="#aplay--l-没有设备" title="Permanent link">&para;</a></h5>
<p>但是root用户有。这也导致pulseaudio list sinks时只有伪设备。</p>
<p><a href="https://askubuntu.com/questions/706602/how-do-i-get-sound-with-an-hda-card">alsa - How do I get sound with an HDA card? - Ask Ubuntu</a>
<a href="https://superuser.com/questions/469036/alsa-does-not-find-sound-devices-as-user-but-can-as-root-after-kernel-upgrade">audio - ALSA does not find sound devices as user but can as root after kernel upgrade - Super User</a></p>
<p>没有尝试参考1，而是直接修改了/dev/snd的权限777（添加用户到audio组没有作用），问题解决。</p>
<h3 id="pulseaudio">PulseAudio<a class="headerlink" href="#pulseaudio" title="Permanent link">&para;</a></h3>
<h4 id="system-wide模式和per-user模式">system-wide模式和per-user模式<a class="headerlink" href="#system-wide模式和per-user模式" title="Permanent link">&para;</a></h4>
<p>推荐使用per-user模式，system-wide模式不安全。<a href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/SystemWide/">Running PulseAudio as System-Wide Daemon – PulseAudio (www.freedesktop.org)</a></p>
<p>per-user模式，每个用户需要使用时启动pulseaudio。system模式适合没有普通用户的嵌入式设备</p>
<h4 id="运行server">运行server<a class="headerlink" href="#运行server" title="Permanent link">&para;</a></h4>
<p><a href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Running/">Running (www.freedesktop.org)</a></p>
<p>有桌面环境情况下一般情况下会自动启动。也可以手动启动</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a>pulseaudio --kill # 关闭pulseaudio server
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a>pulseaudio # 运行在前台，ctrl-C结束。便于实时查看日志
</span><span id="__span-106-4"><a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a>pulseaudio --daemonize # daemon模式，运行在后台
</span><span id="__span-106-5"><a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a>pulseaudio -vv --log-time # 显示更多log
</span></code></pre></div>
<p><code>~/.config/pulse/</code>优先级高于<code>/etc/pulse/</code></p>
<ul>
<li>default.pa : <strong>The default PulseAudio Startup Script</strong> Commands in this file run when the daemon is started or restarted. Run <code>man default.pa</code> for documentation.</li>
<li>daemon.conf: <strong>The PulseAudio daemon configuration file</strong> Run <code>man pulse-daemon.conf</code> for documentation.</li>
<li>system.pa：仅用于system-wide模式</li>
</ul>
<h4 id="控制命令pactl">控制命令pactl<a class="headerlink" href="#控制命令pactl" title="Permanent link">&para;</a></h4>
<p><a href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/CLI/">CLI (www.freedesktop.org)</a></p>
<p>通过<code>pactl</code>命令和pulseaudio daemon进行交互</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a>pactl list sources # 查看输入设备
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>pactl list sinks # 查看输出设备
</span><span id="__span-107-3"><a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a>
</span><span id="__span-107-4"><a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a># 调节音量
</span><span id="__span-107-5"><a id="__codelineno-107-5" name="__codelineno-107-5" href="#__codelineno-107-5"></a>pactl set-sink-mute &lt;device&gt; toggle/true/false  # device tab自动补全
</span><span id="__span-107-6"><a id="__codelineno-107-6" name="__codelineno-107-6" href="#__codelineno-107-6"></a>pactl set-sink-volume &lt;device&gt; 30%
</span></code></pre></div>
<h4 id="让麦克风输出到扬声器">让麦克风输出到扬声器<a class="headerlink" href="#让麦克风输出到扬声器" title="Permanent link">&para;</a></h4>
<p><a href="https://askubuntu.com/questions/123798/how-to-hear-my-voice-in-speakers-with-a-mic">sound - How to hear my voice in speakers with a mic? - Ask Ubuntu</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a>pactl load-module module-loopback latency_msec=1
</span><span id="__span-108-2"><a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a>
</span><span id="__span-108-3"><a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a># stop
</span><span id="__span-108-4"><a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a>pactl unload-module module-loopback
</span></code></pre></div>
<p>另一个办法直接使用alsa命令。
<div class="language-text highlight"><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a>arecord -f cd - | aplay - # 延迟很高
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a>arecord -f cd - | tee output.wav | aplay - #  play while saving
</span><span id="__span-109-3"><a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a>
</span><span id="__span-109-4"><a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a>arecord --buffer-time=1 - | aplay --buffer-time=1 - # 改善延迟
</span></code></pre></div></p>
<h5 id="将指定source输出到指定sink">将指定source输出到指定sink<a class="headerlink" href="#将指定source输出到指定sink" title="Permanent link">&para;</a></h5>
<p><a href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/#module-loopback">Modules – PulseAudio (www.freedesktop.org)</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a>pactl load-module module-loopback latency_msec=1 source=2 sink=0  # 数字为index
</span></code></pre></div>
<h4 id="录指定应用声音">录指定应用声音<a class="headerlink" href="#录指定应用声音" title="Permanent link">&para;</a></h4>
<p><em>p.s 关键点</em>
- 直接对输出到扬声器的声音录制，自己就听不到声音了。使用combined，对输出到headphone的声音复制一份，然后对其进行录制</p>
<p>参考：<a href="https://ro-che.info/articles/2017-07-21-record-audio-linux">Linux audio recording guide (ro-che.info)</a></p>
<ol>
<li>Create a “null” sink that you will be recording. Let’s call it <code>recording</code>.</li>
<li><strong>Create a combined sink that will send its input to both headphones and the <code>recording</code> sink.</strong> Otherwise, you will be able to record a stream but not hear it yourself. So, let’s call this sink <code>combined</code>.</li>
<li>Direct the sound from the specific applications you want to record into the combined sink.</li>
<li>Record the monitor of the <code>recording</code> sink to a file.</li>
</ol>
<p>添加combined设备
<div class="language-text highlight"><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a>pacmd load-module module-null-sink sink_name=recording sink_properties=device.description=recording
</span><span id="__span-111-2"><a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a>pacmd load-module module-combine-sink sink_name=combined sink_properties=device.description=combined \
</span><span id="__span-111-3"><a id="__codelineno-111-3" name="__codelineno-111-3" href="#__codelineno-111-3"></a>  slaves=recording,alsa_output.pci-0000_00_1f.3.analog-stereo
</span></code></pre></div></p>
<p>将combined设置为默认输出，然后开始录制
<div class="language-text highlight"><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a>parecord --channels=1 -d recording.monitor filename.wav
</span></code></pre></div></p>
<ul>
<li>parecord录制没有压缩，只能使用parecord录制吗？</li>
</ul>
<h3 id="音频网络串流">音频网络串流<a class="headerlink" href="#音频网络串流" title="Permanent link">&para;</a></h3>
<h4 id="参考">参考<a class="headerlink" href="#参考" title="Permanent link">&para;</a></h4>
<ul>
<li>linux 到安卓设备：<a href="https://superuser.com/questions/605445/how-to-stream-my-gnu-linux-audio-output-to-android-devices-over-wi-fi">How to stream my GNU/Linux audio output to Android devices over WI-FI? - Super User</a></li>
<li>windows到linux：<a href="https://superuser.com/questions/323329/streaming-audio-from-windows-to-linux-using-pulseaudio">Streaming audio from Windows to Linux using PulseAudio - Super User</a></li>
<li>windows上安装音频驱动，linux上安装scream receiver：<a href="https://github.com/duncanthrax/scream">duncanthrax/scream: Virtual network sound card for Microsoft Windows (github.com)</a></li>
<li>
<p>windows到android</p>
</li>
<li>
<p>手机到laptop, 通过pulseaudio：<a href="https://news.ycombinator.com/item?id=24441112">How to stream audio from your phone to your laptop with PulseAudio | Hacker News (ycombinator.com)</a></p>
</li>
</ul>
<h4 id="pulseaudio_1">pulseaudio<a class="headerlink" href="#pulseaudio_1" title="Permanent link">&para;</a></h4>
<p><a href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Network/#index2h3">Network Setup – PulseAudio (www.freedesktop.org)</a></p>
<h5 id="direct模式">direct模式<a class="headerlink" href="#direct模式" title="Permanent link">&para;</a></h5>
<p>最简单的方式
- 在需要实际播放声音的设备上（server端），开启<code>module-native-protocol-tcp</code>允许网络连接。
- 然后在客户端上，设置PULSE_SERVER。这样客户端的声音就会交给服务端输出
  - 可以通过环境变量<code>PULSE_SERVER</code>
  - Alternatively you can modify <code>~/.pulse/client.conf</code> or <code>/etc/pulse/client.conf</code> and set <code>default-server</code>.
  <div class="language-text highlight"><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a>export PULSE_SERVER=tcp:&lt;server_ip&gt;:4713
</span></code></pre></div></p>
<p>android上有pulse server软件：<a href="https://play.google.com/store/apps/details?id=x.org.server">XServer XSDL - Google Play 上的应用</a>
- 延迟挺低的</p>
<h5 id="tunnel模式">tunnel模式<a class="headerlink" href="#tunnel模式" title="Permanent link">&para;</a></h5>
<p>通过tunnel，可以创建一个新的sink，将所有音频通过网络发送到另一个server上（source也一样）。好处是可以无缝切换使用本地还是远程设备。</p>
<p><a href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/#module-tunnel-sinksource">Modules – PulseAudio (www.freedesktop.org)</a></p>
<p>假设A，B两个机器，A有麦克风，B有扬声器。可以通过以下配置，让A获得B的扬声器，B获得A的麦克风。
<div class="language-text highlight"><pre><span></span><code><span id="__span-114-1"><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a># A
</span><span id="__span-114-2"><a id="__codelineno-114-2" name="__codelineno-114-2" href="#__codelineno-114-2"></a>load-module module-native-protocol-tcp auth-anonymous=1
</span><span id="__span-114-3"><a id="__codelineno-114-3" name="__codelineno-114-3" href="#__codelineno-114-3"></a>load-module module-tunnel-sink server=192.168.36.215
</span><span id="__span-114-4"><a id="__codelineno-114-4" name="__codelineno-114-4" href="#__codelineno-114-4"></a>
</span><span id="__span-114-5"><a id="__codelineno-114-5" name="__codelineno-114-5" href="#__codelineno-114-5"></a># B
</span><span id="__span-114-6"><a id="__codelineno-114-6" name="__codelineno-114-6" href="#__codelineno-114-6"></a>load-module module-native-protocol-tcp auth-anonymous=1
</span><span id="__span-114-7"><a id="__codelineno-114-7" name="__codelineno-114-7" href="#__codelineno-114-7"></a>load-module module-tunnel-source server=192.168.36.230
</span></code></pre></div></p>
<h5 id="rtp">RTP<a class="headerlink" href="#rtp" title="Permanent link">&para;</a></h5>
<blockquote>
<p>RTP is the <em>Realtime Transfer Protocol</em>. It is a well-known protocol for transferring audio and video data over IP. Two related protocols are SDP and SAP. SDP is the <em>Session Description Protocol</em> and can be used to describe RTP sessions. SAP is the <em>Session Announcement Protocol</em> and can be used to announce RTP sessions that are described with SDP. (Modern SIP based VoIP phones use RTP/SDP for their sessions, too) All three protocols are defined in IETF RFCs (RFC3550, RFC3551, RFC2327, RFC2327). They can be used in both multicast and unicast fashions. PulseAudio exclusively uses multicast RTP/SDP/SAP containing audio data.</p>
</blockquote>
<ul>
<li>可以用于1对多，多对多等场景。</li>
<li>
<p>RTP基于IP层的协议延迟可能更低？</p>
</li>
<li>
<p>pulseaudio目前只支持LAN内。没法在跨LAN的两台设备中实现。</p>
<blockquote>
<p><strong>The current implementation is designed to be used exclusively in local area networks,</strong> though Internet use is theoretically supported. Only uncompressed audio is supported, hence you won't be able to transmit more than a few streams at the same time over a standard LAN.</p>
</blockquote>
</li>
</ul>
<h5 id="rygel">Rygel<a class="headerlink" href="#rygel" title="Permanent link">&para;</a></h5>
<blockquote>
<p>Your best bet is probably to setup a proper media server (like Rygel, which works well with Pulseaudio) to transcode the raw audio to something like MP3 and stream that instead.</p>
</blockquote>
<h5 id="其它module">其它module<a class="headerlink" href="#其它module" title="Permanent link">&para;</a></h5>
<p>module-simple-protocol-tcp</p>
<p>An implementation of a simple protocol which allows playback by using simple tools like netcat. Just connect to the listening socket of this module and write the audio data to it, or read it from it for playback, resp. recording.</p>
<h4 id="vlc进行http串流">vlc进行http串流<a class="headerlink" href="#vlc进行http串流" title="Permanent link">&para;</a></h4>
<ul>
<li>优点：客户端不用安装软件，只需要打开浏览器</li>
<li>缺点：延迟有3-4s，不适用于播放视频场景</li>
</ul>
<p><em>关键点：source中默认有一个monitor的源，该源就可以获得输出到扬声器的声音</em></p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-115-1"><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a>cvlc -vvv pulse://XXXX --sout &#39;#transcode{acodec=mp3,ab=128,channels=2}:standard{access=http,dst=0.0.0.0:8888/pc.mp3}&#39;
</span></code></pre></div>
设备上</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-116-1"><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a>http://your.local.ip.address:8888/pc.mp3
</span></code></pre></div>
<h4 id="各种串流">各种串流<a class="headerlink" href="#各种串流" title="Permanent link">&para;</a></h4>
<h5 id="windows-to-linux">windows to linux<a class="headerlink" href="#windows-to-linux" title="Permanent link">&para;</a></h5>
<h5 id="linux-to-anything">linux to anything<a class="headerlink" href="#linux-to-anything" title="Permanent link">&para;</a></h5>
<p><img alt="" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/picgo/20230322144833.png" /></p>
<h2 id="视频">视频<a class="headerlink" href="#视频" title="Permanent link">&para;</a></h2>
<h3 id="v4l2">v4l2<a class="headerlink" href="#v4l2" title="Permanent link">&para;</a></h3>
<p>列出所有设备
<div class="language-text highlight"><pre><span></span><code><span id="__span-117-1"><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a>root@tianyi ➜  ~ v4l2-ctl --list-devices
</span><span id="__span-117-2"><a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a>USB2 Video: USB2 Video (usb-0000:00:14.0-4):
</span><span id="__span-117-3"><a id="__codelineno-117-3" name="__codelineno-117-3" href="#__codelineno-117-3"></a>        /dev/video2
</span><span id="__span-117-4"><a id="__codelineno-117-4" name="__codelineno-117-4" href="#__codelineno-117-4"></a>        /dev/video3
</span><span id="__span-117-5"><a id="__codelineno-117-5" name="__codelineno-117-5" href="#__codelineno-117-5"></a>        /dev/media1
</span><span id="__span-117-6"><a id="__codelineno-117-6" name="__codelineno-117-6" href="#__codelineno-117-6"></a>
</span><span id="__span-117-7"><a id="__codelineno-117-7" name="__codelineno-117-7" href="#__codelineno-117-7"></a>EasyCamera: EasyCamera (usb-0000:00:14.0-5):
</span><span id="__span-117-8"><a id="__codelineno-117-8" name="__codelineno-117-8" href="#__codelineno-117-8"></a>        /dev/video0
</span><span id="__span-117-9"><a id="__codelineno-117-9" name="__codelineno-117-9" href="#__codelineno-117-9"></a>        /dev/video1
</span><span id="__span-117-10"><a id="__codelineno-117-10" name="__codelineno-117-10" href="#__codelineno-117-10"></a>        /dev/media0
</span></code></pre></div></p>
<p>笔记本自带摄像头
<div class="language-text highlight"><pre><span></span><code><span id="__span-118-1"><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a>root@tianyi ➜  ~ v4l2-ctl -d /dev/video0 --all
</span><span id="__span-118-2"><a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a>Driver Info:
</span><span id="__span-118-3"><a id="__codelineno-118-3" name="__codelineno-118-3" href="#__codelineno-118-3"></a>        Driver name      : uvcvideo
</span><span id="__span-118-4"><a id="__codelineno-118-4" name="__codelineno-118-4" href="#__codelineno-118-4"></a>        Card type        : EasyCamera: EasyCamera
</span><span id="__span-118-5"><a id="__codelineno-118-5" name="__codelineno-118-5" href="#__codelineno-118-5"></a>        Bus info         : usb-0000:00:14.0-5
</span><span id="__span-118-6"><a id="__codelineno-118-6" name="__codelineno-118-6" href="#__codelineno-118-6"></a>        Driver version   : 6.2.16
</span><span id="__span-118-7"><a id="__codelineno-118-7" name="__codelineno-118-7" href="#__codelineno-118-7"></a>        Capabilities     : 0x84a00001
</span><span id="__span-118-8"><a id="__codelineno-118-8" name="__codelineno-118-8" href="#__codelineno-118-8"></a>                Video Capture
</span><span id="__span-118-9"><a id="__codelineno-118-9" name="__codelineno-118-9" href="#__codelineno-118-9"></a>                Metadata Capture
</span><span id="__span-118-10"><a id="__codelineno-118-10" name="__codelineno-118-10" href="#__codelineno-118-10"></a>                Streaming
</span><span id="__span-118-11"><a id="__codelineno-118-11" name="__codelineno-118-11" href="#__codelineno-118-11"></a>                Extended Pix Format
</span><span id="__span-118-12"><a id="__codelineno-118-12" name="__codelineno-118-12" href="#__codelineno-118-12"></a>                Device Capabilities
</span><span id="__span-118-13"><a id="__codelineno-118-13" name="__codelineno-118-13" href="#__codelineno-118-13"></a>        Device Caps      : 0x04200001
</span><span id="__span-118-14"><a id="__codelineno-118-14" name="__codelineno-118-14" href="#__codelineno-118-14"></a>                Video Capture
</span><span id="__span-118-15"><a id="__codelineno-118-15" name="__codelineno-118-15" href="#__codelineno-118-15"></a>                Streaming
</span><span id="__span-118-16"><a id="__codelineno-118-16" name="__codelineno-118-16" href="#__codelineno-118-16"></a>                Extended Pix Format
</span><span id="__span-118-17"><a id="__codelineno-118-17" name="__codelineno-118-17" href="#__codelineno-118-17"></a>
</span><span id="__span-118-18"><a id="__codelineno-118-18" name="__codelineno-118-18" href="#__codelineno-118-18"></a>Priority: 2
</span><span id="__span-118-19"><a id="__codelineno-118-19" name="__codelineno-118-19" href="#__codelineno-118-19"></a>Video input : 0 (Input 1: ok)
</span><span id="__span-118-20"><a id="__codelineno-118-20" name="__codelineno-118-20" href="#__codelineno-118-20"></a>Format Video Capture:
</span><span id="__span-118-21"><a id="__codelineno-118-21" name="__codelineno-118-21" href="#__codelineno-118-21"></a>        Width/Height      : 640/480
</span><span id="__span-118-22"><a id="__codelineno-118-22" name="__codelineno-118-22" href="#__codelineno-118-22"></a>        Pixel Format      : &#39;YUYV&#39; (YUYV 4:2:2)
</span><span id="__span-118-23"><a id="__codelineno-118-23" name="__codelineno-118-23" href="#__codelineno-118-23"></a>        Field             : None
</span><span id="__span-118-24"><a id="__codelineno-118-24" name="__codelineno-118-24" href="#__codelineno-118-24"></a>        Bytes per Line    : 1280
</span><span id="__span-118-25"><a id="__codelineno-118-25" name="__codelineno-118-25" href="#__codelineno-118-25"></a>        Size Image        : 614400
</span><span id="__span-118-26"><a id="__codelineno-118-26" name="__codelineno-118-26" href="#__codelineno-118-26"></a>        Colorspace        : sRGB
</span><span id="__span-118-27"><a id="__codelineno-118-27" name="__codelineno-118-27" href="#__codelineno-118-27"></a>        Transfer Function : Rec. 709
</span><span id="__span-118-28"><a id="__codelineno-118-28" name="__codelineno-118-28" href="#__codelineno-118-28"></a>        YCbCr/HSV Encoding: ITU-R 601
</span><span id="__span-118-29"><a id="__codelineno-118-29" name="__codelineno-118-29" href="#__codelineno-118-29"></a>        Quantization      : Default (maps to Limited Range)
</span><span id="__span-118-30"><a id="__codelineno-118-30" name="__codelineno-118-30" href="#__codelineno-118-30"></a>        Flags             :
</span><span id="__span-118-31"><a id="__codelineno-118-31" name="__codelineno-118-31" href="#__codelineno-118-31"></a>Crop Capability Video Capture:
</span><span id="__span-118-32"><a id="__codelineno-118-32" name="__codelineno-118-32" href="#__codelineno-118-32"></a>        Bounds      : Left 0, Top 0, Width 640, Height 480
</span><span id="__span-118-33"><a id="__codelineno-118-33" name="__codelineno-118-33" href="#__codelineno-118-33"></a>        Default     : Left 0, Top 0, Width 640, Height 480
</span><span id="__span-118-34"><a id="__codelineno-118-34" name="__codelineno-118-34" href="#__codelineno-118-34"></a>        Pixel Aspect: 1/1
</span><span id="__span-118-35"><a id="__codelineno-118-35" name="__codelineno-118-35" href="#__codelineno-118-35"></a>Selection Video Capture: crop_default, Left 0, Top 0, Width 640, Height 480, Flags:
</span><span id="__span-118-36"><a id="__codelineno-118-36" name="__codelineno-118-36" href="#__codelineno-118-36"></a>Selection Video Capture: crop_bounds, Left 0, Top 0, Width 640, Height 480, Flags:
</span><span id="__span-118-37"><a id="__codelineno-118-37" name="__codelineno-118-37" href="#__codelineno-118-37"></a>Streaming Parameters Video Capture:
</span><span id="__span-118-38"><a id="__codelineno-118-38" name="__codelineno-118-38" href="#__codelineno-118-38"></a>        Capabilities     : timeperframe
</span><span id="__span-118-39"><a id="__codelineno-118-39" name="__codelineno-118-39" href="#__codelineno-118-39"></a>        Frames per second: 30.000 (30/1)
</span><span id="__span-118-40"><a id="__codelineno-118-40" name="__codelineno-118-40" href="#__codelineno-118-40"></a>        Read buffers     : 0
</span></code></pre></div></p>
<p>采集卡
<div class="language-text highlight"><pre><span></span><code><span id="__span-119-1"><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a>root@tianyi ➜  ~ v4l2-ctl -d /dev/video2 --all
</span><span id="__span-119-2"><a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a>Driver Info:
</span><span id="__span-119-3"><a id="__codelineno-119-3" name="__codelineno-119-3" href="#__codelineno-119-3"></a>        Driver name      : uvcvideo
</span><span id="__span-119-4"><a id="__codelineno-119-4" name="__codelineno-119-4" href="#__codelineno-119-4"></a>        Card type        : USB2 Video: USB2 Video
</span><span id="__span-119-5"><a id="__codelineno-119-5" name="__codelineno-119-5" href="#__codelineno-119-5"></a>        Bus info         : usb-0000:00:14.0-4
</span><span id="__span-119-6"><a id="__codelineno-119-6" name="__codelineno-119-6" href="#__codelineno-119-6"></a>        Driver version   : 6.2.16
</span><span id="__span-119-7"><a id="__codelineno-119-7" name="__codelineno-119-7" href="#__codelineno-119-7"></a>        Capabilities     : 0x84a00001
</span><span id="__span-119-8"><a id="__codelineno-119-8" name="__codelineno-119-8" href="#__codelineno-119-8"></a>                Video Capture
</span><span id="__span-119-9"><a id="__codelineno-119-9" name="__codelineno-119-9" href="#__codelineno-119-9"></a>                Metadata Capture
</span><span id="__span-119-10"><a id="__codelineno-119-10" name="__codelineno-119-10" href="#__codelineno-119-10"></a>                Streaming
</span><span id="__span-119-11"><a id="__codelineno-119-11" name="__codelineno-119-11" href="#__codelineno-119-11"></a>                Extended Pix Format
</span><span id="__span-119-12"><a id="__codelineno-119-12" name="__codelineno-119-12" href="#__codelineno-119-12"></a>                Device Capabilities
</span><span id="__span-119-13"><a id="__codelineno-119-13" name="__codelineno-119-13" href="#__codelineno-119-13"></a>        Device Caps      : 0x04200001
</span><span id="__span-119-14"><a id="__codelineno-119-14" name="__codelineno-119-14" href="#__codelineno-119-14"></a>                Video Capture
</span><span id="__span-119-15"><a id="__codelineno-119-15" name="__codelineno-119-15" href="#__codelineno-119-15"></a>                Streaming
</span><span id="__span-119-16"><a id="__codelineno-119-16" name="__codelineno-119-16" href="#__codelineno-119-16"></a>                Extended Pix Format
</span><span id="__span-119-17"><a id="__codelineno-119-17" name="__codelineno-119-17" href="#__codelineno-119-17"></a>Priority: 2
</span><span id="__span-119-18"><a id="__codelineno-119-18" name="__codelineno-119-18" href="#__codelineno-119-18"></a>Video input : 0 (Input 1: ok)
</span><span id="__span-119-19"><a id="__codelineno-119-19" name="__codelineno-119-19" href="#__codelineno-119-19"></a>Format Video Capture:
</span><span id="__span-119-20"><a id="__codelineno-119-20" name="__codelineno-119-20" href="#__codelineno-119-20"></a>        Width/Height      : 2560/1600
</span><span id="__span-119-21"><a id="__codelineno-119-21" name="__codelineno-119-21" href="#__codelineno-119-21"></a>        Pixel Format      : &#39;MJPG&#39; (Motion-JPEG)
</span><span id="__span-119-22"><a id="__codelineno-119-22" name="__codelineno-119-22" href="#__codelineno-119-22"></a>        Field             : None
</span><span id="__span-119-23"><a id="__codelineno-119-23" name="__codelineno-119-23" href="#__codelineno-119-23"></a>        Bytes per Line    : 0
</span><span id="__span-119-24"><a id="__codelineno-119-24" name="__codelineno-119-24" href="#__codelineno-119-24"></a>        Size Image        : 8192000
</span><span id="__span-119-25"><a id="__codelineno-119-25" name="__codelineno-119-25" href="#__codelineno-119-25"></a>        Colorspace        : sRGB
</span><span id="__span-119-26"><a id="__codelineno-119-26" name="__codelineno-119-26" href="#__codelineno-119-26"></a>        Transfer Function : Rec. 709
</span><span id="__span-119-27"><a id="__codelineno-119-27" name="__codelineno-119-27" href="#__codelineno-119-27"></a>        YCbCr/HSV Encoding: ITU-R 601
</span><span id="__span-119-28"><a id="__codelineno-119-28" name="__codelineno-119-28" href="#__codelineno-119-28"></a>        Quantization      : Default (maps to Full Range)
</span><span id="__span-119-29"><a id="__codelineno-119-29" name="__codelineno-119-29" href="#__codelineno-119-29"></a>        Flags             :
</span><span id="__span-119-30"><a id="__codelineno-119-30" name="__codelineno-119-30" href="#__codelineno-119-30"></a>Crop Capability Video Capture:
</span><span id="__span-119-31"><a id="__codelineno-119-31" name="__codelineno-119-31" href="#__codelineno-119-31"></a>        Bounds      : Left 0, Top 0, Width 2560, Height 1600
</span><span id="__span-119-32"><a id="__codelineno-119-32" name="__codelineno-119-32" href="#__codelineno-119-32"></a>        Default     : Left 0, Top 0, Width 2560, Height 1600
</span><span id="__span-119-33"><a id="__codelineno-119-33" name="__codelineno-119-33" href="#__codelineno-119-33"></a>        Pixel Aspect: 1/1
</span><span id="__span-119-34"><a id="__codelineno-119-34" name="__codelineno-119-34" href="#__codelineno-119-34"></a>Selection Video Capture: crop_default, Left 0, Top 0, Width 2560, Height 1600, Flags:
</span><span id="__span-119-35"><a id="__codelineno-119-35" name="__codelineno-119-35" href="#__codelineno-119-35"></a>Selection Video Capture: crop_bounds, Left 0, Top 0, Width 2560, Height 1600, Flags:
</span><span id="__span-119-36"><a id="__codelineno-119-36" name="__codelineno-119-36" href="#__codelineno-119-36"></a>Streaming Parameters Video Capture:
</span><span id="__span-119-37"><a id="__codelineno-119-37" name="__codelineno-119-37" href="#__codelineno-119-37"></a>        Capabilities     : timeperframe
</span><span id="__span-119-38"><a id="__codelineno-119-38" name="__codelineno-119-38" href="#__codelineno-119-38"></a>        Frames per second: 30.000 (30/1)
</span><span id="__span-119-39"><a id="__codelineno-119-39" name="__codelineno-119-39" href="#__codelineno-119-39"></a>        Read buffers     : 0
</span></code></pre></div></p>
<h1 id="其它软件">其它软件<a class="headerlink" href="#其它软件" title="Permanent link">&para;</a></h1>
<h2 id="zerotier">zerotier<a class="headerlink" href="#zerotier" title="Permanent link">&para;</a></h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-120-1"><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a>curl -s https://install.zerotier.com | sudo bash
</span></code></pre></div>
<p>join network
<div class="language-text highlight"><pre><span></span><code><span id="__span-121-1"><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a>% zerotier-cli info
</span><span id="__span-121-2"><a id="__codelineno-121-2" name="__codelineno-121-2" href="#__codelineno-121-2"></a>200 info 8af72edda7 1.10.2 ONLINE
</span><span id="__span-121-3"><a id="__codelineno-121-3" name="__codelineno-121-3" href="#__codelineno-121-3"></a>
</span><span id="__span-121-4"><a id="__codelineno-121-4" name="__codelineno-121-4" href="#__codelineno-121-4"></a>% zerotier-cli join d5e04297a16fa690
</span><span id="__span-121-5"><a id="__codelineno-121-5" name="__codelineno-121-5" href="#__codelineno-121-5"></a>200 join OK
</span></code></pre></div></p>
<h3 id="非snap安装chromium">非snap安装chromium<a class="headerlink" href="#非snap安装chromium" title="Permanent link">&para;</a></h3>
<p><a href="https://launchpad.net/~savoury1/+archive/ubuntu/chromium">Chromium - web browser (Xenial &amp; newer) : Rob Savoury (launchpad.net)</a></p>







  
  




  



      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../../../../../%E5%B7%A5%E5%85%B7/2022/11/06/2022-11-06-LXC%E4%BD%BF%E7%94%A8/" class="md-footer__link md-footer__link--prev" aria-label="上一页: LXC使用">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                LXC使用
              </div>
            </div>
          </a>
        
        
          
          <a href="../../../../../%E6%8A%98%E8%85%BE/2022/11/08/2022-11-08-VLAN%E5%AE%9E%E7%8E%B0%E5%8D%95%E7%BD%91%E5%8F%A3%E8%BD%AF%E8%B7%AF%E7%94%B1/" class="md-footer__link md-footer__link--next" aria-label="下一页: VLAN实现单网口软路由">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                VLAN实现单网口软路由
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/TheRainstorm" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.footer", "content.code.copy", "toc.follow", "toc.integrate"], "search": "../../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../../../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>