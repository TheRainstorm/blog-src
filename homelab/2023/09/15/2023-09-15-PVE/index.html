
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="记录一些关于数学、计算机的知识，以及一些日常。">
      
      
      
        <link rel="canonical" href="https://yfy.cqu.ai/homelab/2023/09/15/2023-09-15-PVE/">
      
      
        <link rel="prev" href="../../../../../%E6%9D%82%E6%96%87/2023/09/01/2023-09-01-%E5%86%8D%E6%AC%A1%E7%90%86%E8%A7%A3Cache%E8%AE%BE%E8%AE%A1/">
      
      
        <link rel="next" href="../../../../../%E6%8A%98%E8%85%BE/2023/10/30/2023-10-30-openwrt-x86%E5%8D%87%E7%BA%A7/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>PVE - Rain的随笔</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#安装" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../../.." title="Rain的随笔" class="md-header__button md-logo" aria-label="Rain的随笔" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Rain的随笔
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              PVE
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="../../../../.." class="md-tabs__link">
        
  
    
  
  博客

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../about/" class="md-tabs__link">
        
  
    
  
  关于

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../tags/" class="md-tabs__link">
        
  
    
  
  标签

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../series/" class="md-tabs__link">
        
  
    
  
  系列

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../tools/" class="md-tabs__link">
        
  
    
  
  工具

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../archive/2024/" class="md-tabs__link">
          
  
  归档

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../category/homelab/" class="md-tabs__link">
          
  
  分类

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Rain的随笔" class="md-nav__button md-logo" aria-label="Rain的随笔" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Rain的随笔
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    博客
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    标签
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../series/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    系列
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    工具
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    归档
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            归档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    分类
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            分类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/homelab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    homelab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E4%B8%AA%E4%BA%BA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    个人
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E5%8D%9A%E5%AE%A2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    博客
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BD%91%E7%BB%9C%E8%87%AA%E7%94%B1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    如何实现网络自由
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    工具
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E6%8A%98%E8%85%BE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    折腾
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E6%9D%82%E6%96%87/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    杂文
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    编程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E8%99%9A%E6%8B%9F%E5%8C%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    虚拟化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E8%AE%BE%E5%A4%87/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    设备
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E8%AF%BE%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    课程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E9%98%85%E8%AF%BB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    阅读
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../../../.." class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
                  <span class="md-ellipsis">
                    回到主页
                  </span>
                </a>
              </div>
            </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    元数据
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg>
                        <time datetime="2023-09-15 20:31:00" class="md-ellipsis">2023年9月15日</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg>
                          <span class="md-ellipsis">
                            分类于
                            
                              <a href="../../../../../category/homelab/">homelab</a>, 
                              <a href="../../../../../category/%E8%99%9A%E6%8B%9F%E5%8C%96/">虚拟化</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg>
                          <span class="md-ellipsis">
                            
                              需要 33 分钟阅读时间
                            
                          </span>
                        </div>
                      </li>
                    
                  </ul>
                </nav>
              </li>
            </ul>
          </nav>
          
            

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#安装" class="md-nav__link">
    <span class="md-ellipsis">
      安装
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pve配置" class="md-nav__link">
    <span class="md-ellipsis">
      PVE配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PVE配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#网络配置" class="md-nav__link">
    <span class="md-ellipsis">
      网络配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#存储配置" class="md-nav__link">
    <span class="md-ellipsis">
      存储配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="存储配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#基础概念" class="md-nav__link">
    <span class="md-ellipsis">
      基础概念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#配置文件" class="md-nav__link">
    <span class="md-ellipsis">
      配置文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#命令行工具" class="md-nav__link">
    <span class="md-ellipsis">
      命令行工具
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#不同backend" class="md-nav__link">
    <span class="md-ellipsis">
      不同backend
    </span>
  </a>
  
    <nav class="md-nav" aria-label="不同backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dir" class="md-nav__link">
    <span class="md-ellipsis">
      dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zfs" class="md-nav__link">
    <span class="md-ellipsis">
      zfs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lvm" class="md-nav__link">
    <span class="md-ellipsis">
      lvm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lvm-thin" class="md-nav__link">
    <span class="md-ellipsis">
      lvm-thin
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#证书管理" class="md-nav__link">
    <span class="md-ellipsis">
      证书管理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="证书管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trusted-certificates-via-lets-encrypt-acme" class="md-nav__link">
    <span class="md-ellipsis">
      Trusted certificates via Let’s Encrypt (ACME)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#虚拟机" class="md-nav__link">
    <span class="md-ellipsis">
      虚拟机
    </span>
  </a>
  
    <nav class="md-nav" aria-label="虚拟机">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#命令行" class="md-nav__link">
    <span class="md-ellipsis">
      命令行
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#直通磁盘" class="md-nav__link">
    <span class="md-ellipsis">
      直通磁盘
    </span>
  </a>
  
    <nav class="md-nav" aria-label="直通磁盘">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#直通分区" class="md-nav__link">
    <span class="md-ellipsis">
      直通分区
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#显示设备" class="md-nav__link">
    <span class="md-ellipsis">
      显示设备
    </span>
  </a>
  
    <nav class="md-nav" aria-label="显示设备">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#介绍" class="md-nav__link">
    <span class="md-ellipsis">
      介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virgl" class="md-nav__link">
    <span class="md-ellipsis">
      virgl
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#隐藏kvm" class="md-nav__link">
    <span class="md-ellipsis">
      隐藏KVM
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lxc容器" class="md-nav__link">
    <span class="md-ellipsis">
      LXC容器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LXC容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#容器镜像" class="md-nav__link">
    <span class="md-ellipsis">
      容器镜像
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pct命令行" class="md-nav__link">
    <span class="md-ellipsis">
      PCT命令行
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#配置文件_1" class="md-nav__link">
    <span class="md-ellipsis">
      配置文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#特权容器" class="md-nav__link">
    <span class="md-ellipsis">
      特权容器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="特权容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#特权容器转非特权容器" class="md-nav__link">
    <span class="md-ellipsis">
      特权容器转非特权容器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#路径映射挂载" class="md-nav__link">
    <span class="md-ellipsis">
      路径映射（挂载）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="路径映射（挂载）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#用户映射" class="md-nav__link">
    <span class="md-ellipsis">
      用户映射
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#添加gpu" class="md-nav__link">
    <span class="md-ellipsis">
      添加gpu
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#遇到问题" class="md-nav__link">
    <span class="md-ellipsis">
      遇到问题
    </span>
  </a>
  
    <nav class="md-nav" aria-label="遇到问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#无法创建openwrt" class="md-nav__link">
    <span class="md-ellipsis">
      无法创建openwrt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#备份和恢复" class="md-nav__link">
    <span class="md-ellipsis">
      备份和恢复
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pve显卡直通" class="md-nav__link">
    <span class="md-ellipsis">
      PVE显卡直通
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PVE显卡直通">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#非grub修改内核参数方法" class="md-nav__link">
    <span class="md-ellipsis">
      非grub修改内核参数方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#步骤" class="md-nav__link">
    <span class="md-ellipsis">
      步骤
    </span>
  </a>
  
    <nav class="md-nav" aria-label="步骤">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#修改内核参数" class="md-nav__link">
    <span class="md-ellipsis">
      修改内核参数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-module" class="md-nav__link">
    <span class="md-ellipsis">
      kernel module
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kernel module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#设置尽早加载" class="md-nav__link">
    <span class="md-ellipsis">
      设置尽早加载
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#设置模块参数" class="md-nav__link">
    <span class="md-ellipsis">
      设置模块参数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#更新initramfs" class="md-nav__link">
    <span class="md-ellipsis">
      更新initramfs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acs-override" class="md-nav__link">
    <span class="md-ellipsis">
      ACS override
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#遇到的问题" class="md-nav__link">
    <span class="md-ellipsis">
      遇到的问题
    </span>
  </a>
  
    <nav class="md-nav" aria-label="遇到的问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#第一张gpu直通问题" class="md-nav__link">
    <span class="md-ellipsis">
      第一张gpu直通问题
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amd-6500xt-43错误" class="md-nav__link">
    <span class="md-ellipsis">
      amd 6500xt 43错误
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows随机蓝屏bosd" class="md-nav__link">
    <span class="md-ellipsis">
      windows随机蓝屏BOSD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43错误" class="md-nav__link">
    <span class="md-ellipsis">
      43错误
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amd-reset-bug" class="md-nav__link">
    <span class="md-ellipsis">
      AMD reset bug
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6500xt性能很差" class="md-nav__link">
    <span class="md-ellipsis">
      6500xt性能很差
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unbind-gpu" class="md-nav__link">
    <span class="md-ellipsis">
      unbind gpu
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#资料收集" class="md-nav__link">
    <span class="md-ellipsis">
      资料收集
    </span>
  </a>
  
    <nav class="md-nav" aria-label="资料收集">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redhat" class="md-nav__link">
    <span class="md-ellipsis">
      redhat
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#其它问题" class="md-nav__link">
    <span class="md-ellipsis">
      其它问题
    </span>
  </a>
  
    <nav class="md-nav" aria-label="其它问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#直通ax200没有蓝牙解决" class="md-nav__link">
    <span class="md-ellipsis">
      直通AX200没有蓝牙（解决）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#修改hostname寄" class="md-nav__link">
    <span class="md-ellipsis">
      修改hostname寄
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#备份单个disk" class="md-nav__link">
    <span class="md-ellipsis">
      备份单个disk
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zerotier无法启动" class="md-nav__link">
    <span class="md-ellipsis">
      zerotier无法启动
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#磁盘测速" class="md-nav__link">
    <span class="md-ellipsis">
      磁盘测速
    </span>
  </a>
  
    <nav class="md-nav" aria-label="磁盘测速">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pcie40-爱国者2t" class="md-nav__link">
    <span class="md-ellipsis">
      pcie4.0 爱国者2T
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#三星981at" class="md-nav__link">
    <span class="md-ellipsis">
      三星981at
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#n5105-铠侠rc20-500gb" class="md-nav__link">
    <span class="md-ellipsis">
      n5105 铠侠rc20 500GB
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pci-subvendor-id" class="md-nav__link">
    <span class="md-ellipsis">
      pci subvendor id
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary时间为1970" class="md-nav__link">
    <span class="md-ellipsis">
      summary时间为1970
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        
  
  

<nav class="md-tags" >
  
    
    
    
      <a href="../../../../../tags/#pve" class="md-tag">pve</a>
    
  
</nav>



  <h1>PVE</h1>

<p>PVE用法、配置个人记录</p>
<!-- more -->

<h2 id="安装">安装<a class="headerlink" href="#安装" title="Permanent link">&para;</a></h2>
<p>安装注意事项
- 之后修改hostname很麻烦，因此一开始就确定好
- zfs是我比较推荐的系统盘格式，后面创建虚拟机，lxc容器，磁盘镜像都会直接使用zfs的zvol功能，因此可以使用zfs自己管理这些磁盘镜像，非常方便。</p>
<p>换源：<a href="http://mirrors.ustc.edu.cn/help/proxmox.html">Proxmox 源使用帮助 — USTC Mirror Help 文档</a></p>
<p>常用命令工具：<a href="https://pve.proxmox.com/wiki/Command_Line_Tools">Command Line Tools - Proxmox VE</a></p>
<h2 id="pve配置">PVE配置<a class="headerlink" href="#pve配置" title="Permanent link">&para;</a></h2>
<h3 id="网络配置">网络配置<a class="headerlink" href="#网络配置" title="Permanent link">&para;</a></h3>
<p>网络采用ifupdown
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>/etc/network/interfaces
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>ifreload -a  # 应用更改
</span></code></pre></div></p>
<ul>
<li>创建两个br，居然不支持设置两个default route。解决办法是在interface配置文件中通过post-up自己添加
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>auto vmbr0
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>iface vmbr0 inet static
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>        address 210.45.76.204/24
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>        bridge-ports enp7s0
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>        bridge-stp off
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        bridge-fd 0
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>        post-up ip ru add from 210.45.76.204 lookup vmbr0 prior 3
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>        post-up ip ro add table vmbr0 default via 210.45.76.254 dev vmbr0
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>        post-up ip ro add default via 210.45.76.254 dev vmbr0 metric 200
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>auto vmbr1
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>iface vmbr1 inet static
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>        address 192.168.35.254/24
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>        bridge-ports enxf8e43b0a274a
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>        bridge-stp off
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>        bridge-fd 0
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>        post-up ip ro add default via 192.168.35.1 dev vmbr1 metric 100
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>        pre-down ip ro del default dev vmbr1
</span></code></pre></div></li>
</ul>
<h3 id="存储配置">存储配置<a class="headerlink" href="#存储配置" title="Permanent link">&para;</a></h3>
<p><a href="https://pve.proxmox.com/pve-docs/chapter-pvesm.html">Proxmox VE Storage</a></p>
<h4 id="基础概念">基础概念<a class="headerlink" href="#基础概念" title="Permanent link">&para;</a></h4>
<p>storage（池）类型
- file level：可以存储任何类型内容
- block：存储大的raw images</p>
<blockquote>
<p>1: Disk images for VMs are stored in ZFS volume (zvol) datasets, which provide block device functionality.
2: On file based storages, snapshots are possible with the <em>qcow2</em> format.</p>
</blockquote>
<p>存储的数据类型</p>
<p>A storage can support several content types, for example virtual disk images, cdrom iso images, container templates or container root directories. Not all storage types support all content types. One can set this property to select what this storage is used for.
- images: QEMU/KVM VM images.
- rootdir: Allow to store container data.
- vztmpl: Container templates.
- backup: Backup files (vzdump).
- iso: ISO images
- snippets: Snippet files, for example guest hook scripts</p>
<h4 id="配置文件">配置文件<a class="headerlink" href="#配置文件" title="Permanent link">&para;</a></h4>
<p>/etc/pve/storage.cfg
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>dir: local
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>        path /var/lib/vz
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>        content iso,vztmpl,backup
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a># default image store on ZFS based installation
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>zfspool: local-zfs
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>        pool rpool/data
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>        sparse
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>        content images,rootdir
</span></code></pre></div></p>
<p><strong>local更像是存储只读的数据</strong>
<strong>local-zfs则存放读写的数据</strong>
- 虚拟机的disk为zvol
- lxc容器的rootdir为dataset</p>
<p>Volume id格式（许多命令都需要该格式参数）
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>local:230/example-image.raw
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>local:iso/debian-501-amd64-netinst.iso
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>local:vztmpl/debian-5.0-joomla_1.5.9-1_i386.tar.gz
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>iscsi-storage:0.0.2.scsi-14f504e46494c4500494b5042546d2d646744372d31616d61
</span></code></pre></div></p>
<h4 id="命令行工具">命令行工具<a class="headerlink" href="#命令行工具" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>pvesm add &lt;TYPE&gt; &lt;STORAGE_ID&gt; &lt;OPTIONS&gt;
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>pvesm add dir &lt;STORAGE_ID&gt; --path &lt;PATH&gt;
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>pvesm add nfs &lt;STORAGE_ID&gt; --path &lt;PATH&gt; --server &lt;SERVER&gt; --export &lt;EXPORT&gt;
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>pvesm add lvm &lt;STORAGE_ID&gt; --vgname &lt;VGNAME&gt;
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>pvesm add iscsi &lt;STORAGE_ID&gt; --portal &lt;HOST[:PORT]&gt; --target &lt;TARGET&gt;
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>pvesm set &lt;STORAGE_ID&gt; &lt;OPTIONS&gt;
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>pvesm set &lt;STORAGE_ID&gt; --shared 1
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>pvesm set local --format qcow2
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>pvesm set &lt;STORAGE_ID&gt; --content iso
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>pvesm alloc &lt;STORAGE_ID&gt; &lt;VMID&gt; &lt;name&gt; &lt;size&gt; [--format &lt;raw|qcow2&gt;]
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>pvesm alloc local &lt;VMID&gt; &#39;&#39; 4G  # name为空则自动生成
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>pvesm free &lt;VOLUME_ID&gt;
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>pvesm status
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>pvesm list &lt;STORAGE_ID&gt; [--vmid &lt;VMID&gt;]
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>pvesm path &lt;VOLUME_ID&gt; #查看实际路径
</span></code></pre></div>
<h4 id="不同backend">不同backend<a class="headerlink" href="#不同backend" title="Permanent link">&para;</a></h4>
<h5 id="dir">dir<a class="headerlink" href="#dir" title="Permanent link">&para;</a></h5>
<p>可以存储任何类型数据（virtual disk images, containers, templates, ISO images or backup files.）</p>
<blockquote>
<p>You can mount additional storages via standard linux /etc/fstab, and then define a directory storage for that mount point. This way you can use any file system supported by Linux.</p>
</blockquote>
<p>默认layout</p>
<table>
<thead>
<tr>
<th>Content type</th>
<th>Subdir</th>
</tr>
</thead>
<tbody>
<tr>
<td>VM images</td>
<td><code>images/&lt;VMID&gt;/</code></td>
</tr>
<tr>
<td>ISO images</td>
<td>template/iso/</td>
</tr>
<tr>
<td>Container templates</td>
<td>template/cache/</td>
</tr>
<tr>
<td>Backup files</td>
<td>dump/</td>
</tr>
<tr>
<td>Snippets</td>
<td>snippets/</td>
</tr>
</tbody>
</table>
<p>例子
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>dir: backup
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>        path /mnt/backup
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>        content backup
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>        prune-backups keep-last=7
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>        max-protected-backups 3
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>        content-dirs backup=custom/backup/dir
</span></code></pre></div></p>
<h5 id="zfs">zfs<a class="headerlink" href="#zfs" title="Permanent link">&para;</a></h5>
<h5 id="lvm">lvm<a class="headerlink" href="#lvm" title="Permanent link">&para;</a></h5>
<p><a href="https://pve.proxmox.com/pve-docs/chapter-pvesm.html#storage_lvm">Proxmox VE Storage</a>
<a href="https://blog.programster.org/proxmox-storage-guide">Proxmox Storage Guide | Programster's Blog</a></p>
<table>
<thead>
<tr>
<th>Content types</th>
<th>Image formats</th>
<th>Shared</th>
<th>Snapshots</th>
<th>Clones</th>
</tr>
</thead>
<tbody>
<tr>
<td>images rootdir</td>
<td>raw</td>
<td>possible</td>
<td>no</td>
<td>no</td>
</tr>
</tbody>
</table>
<h5 id="lvm-thin">lvm-thin<a class="headerlink" href="#lvm-thin" title="Permanent link">&para;</a></h5>
<p>支持thin provisioning（稀疏分配）</p>
<p>LVM normally allocates blocks when you create a volume. LVM thin pools instead allocates blocks when they are written. This behaviour is called thin-provisioning</p>
<h3 id="证书管理">证书管理<a class="headerlink" href="#证书管理" title="Permanent link">&para;</a></h3>
<p>pve的 REST API 和 web GUI 是由<code>pveproxy</code>服务提供的，它使用的证书可以是以下几种
1. By default the node-specific certificate in <code>/etc/pve/nodes/NODENAME/pve-ssl.pem</code> is used. This certificate is signed by the cluster CA and therefore not automatically trusted by browsers and operating systems.
2. use an externally provided certificate (e.g. signed by a commercial CA).
3. use ACME (Let’s Encrypt) to get a trusted certificate with automatic renewal, this is also integrated in the Proxmox VE API and web interface.
在2和3的情况下，使用的证书位于<code>/etc/pve/nodes/NODENAME/pveproxy-ssl.pem</code>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>-rw-r----- 1 root www-data 3.2K Dec  2 14:46 pveproxy-ssl.key
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>-rw-r----- 1 root www-data 5.8K Dec  2 14:46 pveproxy-ssl.pem
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>-rw-r----- 1 root www-data 1.7K Sep 13 21:04 pve-ssl.key
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>-rw-r----- 1 root www-data 1.8K Sep 13 21:04 pve-ssl.pem
</span></code></pre></div></p>
<p>证书使用pvenode命令管理</p>
<h4 id="trusted-certificates-via-lets-encrypt-acme">Trusted certificates via Let’s Encrypt (ACME)<a class="headerlink" href="#trusted-certificates-via-lets-encrypt-acme" title="Permanent link">&para;</a></h4>
<ul>
<li>首先需要注册一个ACME账号，仅需要提供邮箱用于接收通知</li>
<li>web界面：Datacenter -&gt; ACME</li>
<li>
<p>命令行
  <div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>pvenode acme account register account-name mail@example.com
</span></code></pre></div></p>
</li>
<li>
<p>然后添加一个ACME plugin，用于自动申请和更新证书，支持许多dns服务商</p>
</li>
<li>plugin ID：自己取一个标识名称，后面为node申请证书时需要指定</li>
<li>DNS API：选择自己的DNS服务商（如果没有的话，并且有其它支持的域名的话，可以搜索DNS Validation through CNAME Alias方案）</li>
<li>
<p>后面的数据则根据API的不同是不同的</p>
<ul>
<li>cloudflare支持粗粒度的Global API Key和API Token两种验证方式：<a href="https://dash.cloudflare.com/profile/api-tokens">User API Tokens | Cloudflare</a>
<img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20231202172323.png" /></li>
</ul>
</li>
<li>
<p>然后就是为node添加证书</p>
</li>
<li>Node -&gt; Certificates，ACME选择Add</li>
<li>选择challenge type并填写证书对应的域名</li>
<li>然后选择Account然后Order Certificates Now即可
<img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20231202172857.png" /></li>
</ul>
<h2 id="虚拟机">虚拟机<a class="headerlink" href="#虚拟机" title="Permanent link">&para;</a></h2>
<h3 id="命令行">命令行<a class="headerlink" href="#命令行" title="Permanent link">&para;</a></h3>
<p><a href="https://pve.proxmox.com/pve-docs/qm.1.html">qm(1) (proxmox.com)</a></p>
<p>不必填所有参数，创建后在web中再添加
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>qm create 120 --cores 2 --cpu host --memory 1024 --name u22-test --scsihw virtio-scsi-single --scsi0 local-zfs:vm-120-disk-root 
</span></code></pre></div></p>
<h3 id="直通磁盘">直通磁盘<a class="headerlink" href="#直通磁盘" title="Permanent link">&para;</a></h3>
<p><a href="https://pve.proxmox.com/wiki/Passthrough_Physical_Disk_to_Virtual_Machine_(VM)">Passthrough Physical Disk to Virtual Machine (VM) - Proxmox VE</a></p>
<p>很简单，不需要pci直通之类的。本质上和kvm添加一个磁盘是一样的
- 磁盘只看做一个块文件，内部会重新创建分区表？</p>
<ul>
<li>
<p>Hot-Plug/Add physical device as new virtual SCSI disk
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>qm set 592 -scsi2 /dev/disk/by-id/ata-ST3000DM001-1CH166_Z1F41BLC
</span></code></pre></div></p>
</li>
<li>
<p>Hot-Unplug/Remove virtual disk
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>qm unlink 592 --idlist scsi2
</span></code></pre></div></p>
</li>
</ul>
<h4 id="直通分区">直通分区<a class="headerlink" href="#直通分区" title="Permanent link">&para;</a></h4>
<p>只需要把上面by-id路径指定具体分区即可</p>
<p><a href="https://forum.proxmox.com/threads/is-it-possible-to-passthrough-a-partition-of-a-drive-to-a-vm-and-not-the-entire-disk.109974/">Is it possible to passthrough a partition of a drive to a VM? and not the entire disk? | Proxmox Support Forum</a></p>
<blockquote>
<p>I think "qm set" disk passthrough should work with partitions too:<br />
<a href="https://pve.proxmox.com/wiki/Passthrough_Physical_Disk_to_Virtual_Machine_(VM)">https://pve.proxmox.com/wiki/Passthrough_Physical_Disk_to_Virtual_Machine_(VM)</a><br />
Then its just for example <code>qm set 592 -scsi2 /dev/disk/by-id/ata-ST3000DM001-1CH166_Z1F41BLC-part3</code> instead of <code>qm set 592 -scsi2 /dev/disk/by-id/ata-ST3000DM001-1CH166_Z1F41BLC</code></p>
</blockquote>
<h3 id="显示设备">显示设备<a class="headerlink" href="#显示设备" title="Permanent link">&para;</a></h3>
<h4 id="介绍">介绍<a class="headerlink" href="#介绍" title="Permanent link">&para;</a></h4>
<p><a href="https://www.kraxel.org/blog/2019/09/display-devices-in-qemu/">VGA and other display devices in qemu | 🇺🇦 kraxel’s news</a></p>
<p>qxl
- 支持2d加速，但是该功能现在已经变得不再有用了。软件通常使用OpenGL或Vulkan，3d渲染。</p>
<blockquote>
<p>This device has support for 2D acceleration. This becomes more and more useless though as modern display devices don't have dedicated 2D acceleration support any more and use the 3D engine for everything. The same happens on the software side, modern desktops are rendering with opengl or vulkan instead of using 2D acceleration.</p>
</blockquote>
<p>virtio vga
- 支持硬件辅组的opengl加速
- 目前只有linux下有驱动，因此只在linux工作</p>
<blockquote>
<p>This device has (optional) hardware-assisted opengl acceleration support. This can be enabled using the <code>virgl=on</code> property, which in turn needs opengl support enabled (<code>gl=on</code>) in the qemu display.</p>
</blockquote>
<h4 id="virgl">virgl<a class="headerlink" href="#virgl" title="Permanent link">&para;</a></h4>
<p><a href="https://www.reddit.com/r/VFIO/comments/ufseh1/virgl_vs_gpu_passthrough_vs_virtio_or_qxl/">(7) VirGL vs GPU passthrough vs VirtIO or QXL : VFIO (reddit.com)</a></p>
<blockquote>
<p>为了显示 3D 图形，游戏需要为 GPU 打开一个“上下文”。（无论是Direct3D，OpenGL，Vulkan等）。打开此上下文后，他们可以向 GPU 发送命令以上传纹理、运行着色器、渲染内容等。
VirGL允许访客在主机的GPU上打开这些上下文。为此，它需要在 VM 中拥有自己的特殊驱动程序，这些驱动程序独立于底层 GPU 类型。
未来很可能是 GPU-P (or GPU partitioning).。此功能允许物理 GPU 提供多个虚拟分区，允许主机和来宾使用相同的物理 GPU。有几种方法可以做到这一点，但目前它不受官方支持（在消费者卡中）。</p>
</blockquote>
<p>适合轻量的3d加速（桌面compositor）</p>
<blockquote>
<p>if you need 3D accel (eg even for desktop compositor effects, no heavy gaming) this is what you want. Otherwise you go with Intel GVT-g or full GPU passthrough.</p>
</blockquote>
<p>目前还不支持HW Video编解码加速</p>
<blockquote>
<p>One feature I would like is being able to use HW video decode too, but presently that requires passing in full GPU or vGPU.</p>
</blockquote>
<p>设置后，在win10中样子
<img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20231002160224.png" /></p>
<p><img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20231002161058.png" /></p>
<p>可以玩简单OpenGL游戏：测试了东方
不能玩yuzu模拟器，选择OpenGL时，可以选择GLSL，但是不能运行游戏。选vulkan没有设备。</p>
<h3 id="隐藏kvm">隐藏KVM<a class="headerlink" href="#隐藏kvm" title="Permanent link">&para;</a></h3>
<p>著名二字游戏无法在虚拟机中运行
<img alt="原神无法虚拟机启动.jpg" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/%E5%8E%9F%E7%A5%9E%E6%97%A0%E6%B3%95%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%90%AF%E5%8A%A8.jpg" /></p>
<p>https://forum.proxmox.com/threads/hide-vm-from-guest.34905/post-176978
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>args: -cpu &#39;host,-hypervisor,+kvm_pv_unhalt,+kvm_pv_eoi,hv_spinlocks=0x1fff,hv_vapic,hv_time,hv_reset,hv_vpindex,hv_runtime,hv_relaxed,kvm=off,hv_vendor_id=intel&#39;
</span></code></pre></div></p>
<blockquote>
<p>Guest operating systems can test bit 31 of ECX of CPUID leaf 0x1, so <strong>-hypervisor</strong> flag prevent this.<br />
I can't add links <img alt=":(" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" title="Frown    :(" />. You can read more about virtual machine detection mechanism in vmware knowledge base. Article is called "Mechanisms to determine if software is running in a VMware virtual machine"</p>
</blockquote>
<p>更新一点的2022
<a href="https://forum.proxmox.com/threads/cant-hide-vm-status-in-windows-guest.96779/">Can't hide 'VM' status in Windows guest | Proxmox Support Forum</a></p>
<blockquote>
<p>In VM config:<br />
args: -cpu host,hv_vapic,hv_stimer,+invtsc,[more-flags],-hypervisor</p>
</blockquote>
<p>经尝试上面的命令启动时会报错，需要添加更多flag
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>root@ryzen-pve ➜  ~ qm start 200
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>kvm: Hyper-V synthetic timers (hv-stimer) requires Hyper-V clocksources (hv-time)
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>start failed: QEMU exited with code 1
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>root@ryzen-pve ➜  ~ vim /etc/pve/qemu-server/200.conf
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>root@ryzen-pve ➜  ~ qm start 200
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>kvm: Hyper-V synthetic timers (hv-stimer) requires Hyper-V synthetic interrupt controller (hv-synic)
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>start failed: QEMU exited with code 1
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>root@ryzen-pve ➜  ~ vim /etc/pve/qemu-server/200.conf
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>root@ryzen-pve ➜  ~ qm start 200
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>kvm: Hyper-V synthetic interrupt controller (hv-synic) requires Hyper-V VP_INDEX MSR (hv-vpindex)
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>start failed: QEMU exited with code 1
</span></code></pre></div></p>
<p>最后需要补充完整到
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>args: -cpu host,hv_vapic,hv_stimer,hv_time,hv_synic,hv_vpindex,+invtsc,-hypervisor
</span></code></pre></div>
注意，不要再加cpu: x86-64-v3这样的参数了。我刚开始加了，导致进入vm，N卡驱动报43错误</p>
<p>其它
- virt-manger中类似方法：<a href="https://forums.unraid.net/topic/126098-%E6%B1%82%E5%8A%A9%EF%BC%81win11-wm-%E6%89%93%E5%BC%80%E5%8E%9F%E7%A5%9E-%E6%98%BE%E7%A4%BA%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8B%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C/">求助！win11 wm 打开原神 显示虚拟机下无法运行 - Chinese / 简体中文 - Unraid</a>
- <a href="https://www.wunote.cn/article/4801/">Proxmox VE(PVE)虚拟机绕过软件的虚拟机检查来玩原神 - 某咸鱼的笔记 (wunote.cn)</a></p>
<h2 id="lxc容器">LXC容器<a class="headerlink" href="#lxc容器" title="Permanent link">&para;</a></h2>
<p>https://pve.proxmox.com/wiki/Linux_Container</p>
<h3 id="容器镜像">容器镜像<a class="headerlink" href="#容器镜像" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a> pveam update
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a> pveam available
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>pveam available --section system
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>pveam download local debian-10.0-standard_10.0-1_amd64.tar.gz
</span></code></pre></div>
<p>导入容器镜像
只能通过webui upload?</p>
<h3 id="pct命令行">PCT命令行<a class="headerlink" href="#pct命令行" title="Permanent link">&para;</a></h3>
<p><a href="https://pve.proxmox.com/wiki/Linux_Container#_managing_containers_with_tt_span_class_monospaced_pct_span_tt">Linux Container - Proxmox VE</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>pct list
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>pct console &lt;vmid&gt; [OPTIONS]
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>pct enter &lt;vmid&gt;
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>pct start
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>pct destroy 100 --purge # --purge_, if you want to additionally remove the container from replication jobs, backup jobs and HA resource configurations.
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a># pct set 100 -net0 name=eth0,bridge=vmbr0,ip=192.168.15.147/24,gw=192.168.15.1
</span></code></pre></div>
<p><a href="https://pve.proxmox.com/pve-docs/pct.1.html">pct(1) (proxmox.com)</a>
TASK ERROR: unable to create CT 100 - unable to detect OS distribution
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>pct create 100 /mnt/ryzen-pve-storage/template/cache/openwrt-23.05.0-x86-64-rootfs.tar.gz \
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>--storage local-lvm \
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>--ostype unmanaged \
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>--unprivileged 1 \
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>--hostname op1 \
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>--rootfs local-lvm:8 \
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>--cores 4 \
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>--memory 1024 \
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>--swap 1024 \
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>--features keyctl=1,nesting=1
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>--password xxxx
</span></code></pre></div></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>pct create 700 local:vztmpl/openwrt-23.05.0-x86-64-generic-rootfs.tar.gz \
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>--storage local-zfs \
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>--ostype unmanaged \
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>--unprivileged 1 \
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>--hostname op1 \
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>--rootfs local-zfs:1 \
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>--cores 4 \
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>--memory 1024 \
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>--swap 0 \
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>--features keyctl=1,nesting=1
</span></code></pre></div>
<p><em>unmanaged</em> can be used to skip and OS specific setup</p>
<h3 id="配置文件_1">配置文件<a class="headerlink" href="#配置文件_1" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>/etc/pve/lxc/&lt;CTID&gt;.conf
</span></code></pre></div>
<p>Currently there are three types of mount points: storage backed mount points, bind mounts, and device mounts.
- Storage Backed Mount Points
    - Image based
    - ZFS subvolumes
    - Directories
<div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>pct set 100 -mp0 thin1:10,mp=/path/in/container
</span></code></pre></div></p>
<ul>
<li>Bind Mount Points：Bind mounts allow you to access arbitrary directories from your Proxmox VE host inside a container
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>pct set 100 -mp0 /mnt/bindmounts/shared,mp=/shared
</span></code></pre></div></li>
</ul>
<h3 id="特权容器">特权容器<a class="headerlink" href="#特权容器" title="Permanent link">&para;</a></h3>
<h4 id="特权容器转非特权容器">特权容器转非特权容器<a class="headerlink" href="#特权容器转非特权容器" title="Permanent link">&para;</a></h4>
<p><a href="https://forum.proxmox.com/threads/convert-privileged-to-unprivileged-container.31066/">Convert privileged to unprivileged container | Proxmox Support Forum</a>
<div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>pct restore 1234 var/lib/vz/dump/vzdump-lxc-1234-2016_03_02-02_31_03.tar.gz -ignore-unpack-errors 1 -unprivileged
</span></code></pre></div></p>
<p>转个特权级结果这么麻烦。<a href="https://forum.proxmox.com/threads/convert-privileged-to-unprivileged-container.31066/post-261883">community</a>有通过挂载镜像，然后修改其内容的方法，但是看上去貌似有点野，因此还是不使用了。</p>
<p>尝试了
- 编辑配置文件直接添加unprivileged: yes。但是打开容器后，所有文件都变成了nobody。（也许手动chown以下就可以了？）
- 尝试按照官方通过backup恢复。
  - 但是恢复后，jellyfin docker启动不起来，貌似是权限的问题。jellyfin配置文件不知为何就是无法chown，root用户chown结果报没有权限。
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>pct restore 111 /var/lib/vz/dump/vzdump-lxc-110-2023_09_29-23_05_38.tar.zst -ignore-unpack-errors 1 -unprivileged --features keyctl=1,nesting=1  --storage local-zfs
</span></code></pre></div></p>
<p>算了，还是用原来特权容器。</p>
<h3 id="路径映射挂载">路径映射（挂载）<a class="headerlink" href="#路径映射挂载" title="Permanent link">&para;</a></h3>
<p>参考
  - <a href="https://itsembedded.com/sysadmin/proxmox_bind_unprivileged_lxc/">Proxmox: bind mountpoint from host to unprivileged LXC container :: It's Embedded! (itsembedded.com)</a>
  - <a href="https://pve.proxmox.com/wiki/Unprivileged_LXC_containers">Unprivileged LXC containers - Proxmox VE</a></p>
<p>Bind mounting：类似于目录的硬链接（linux目录不能硬链接）</p>
<p>直接映射（基本上只读）
- 需要重启容器生效
- host创建的文件在guest中为nobody（只要文件权限不严格，应该是可读的）
- guest创建的文件在host上为high-mapped(100000+)  uid
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a># pct命令
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>pct set 300 -mp0 /mnt/Disk2/BT/downloads/links,mp=/media
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a># 配置文件
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>mp0: /mnt/bindmounts/shared,mp=/shared
</span></code></pre></div></p>
<h4 id="用户映射">用户映射<a class="headerlink" href="#用户映射" title="Permanent link">&para;</a></h4>
<p>编辑容器配置文件
- 0 100000 1005表示0开始的1005长度段映射到host 10000开始1005长度段
- 以下配置将1005单独映射到host 1005
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a># uid map: from uid 0 map 1005 uids (in the ct) to the range starting 100000 (on the host), so 0..1004 (ct) → 100000..101004 (host)
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>lxc.idmap = u 0 100000 1005
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>lxc.idmap = g 0 100000 1005
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a># we map 1 uid starting from uid 1005 onto 1005, so 1005 → 1005
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>lxc.idmap = u 1005 1005 1
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>lxc.idmap = g 1005 1005 1
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a># we map the rest of 65535 from 1006 upto 101006, so 1006..65535 → 101006..165535
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>lxc.idmap = u 1006 101006 64530
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>lxc.idmap = g 1006 101006 64530
</span></code></pre></div></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>lxc.idmap = u 0 100000 1000
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>lxc.idmap = g 0 100000 1000
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>lxc.idmap = u 1000 1000 1
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>lxc.idmap = g 1000 1000 1
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>lxc.idmap = u 1001 101001 64534
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>lxc.idmap = g 1001 101001 64534
</span></code></pre></div>
<p>编辑/etc/suuid(subgid)，使得root用户允许使用1000的uid
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>root:100000:65536
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>root:1000:1
</span></code></pre></div>
否则会报如下错误
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>lxc_map_ids: 3701 newuidmap failed to write mapping &quot;newuidmap: uid range [1000-1001) -&gt; [1000-1001) not allowed&quot;: newuidmap 793824 0 100000 1000 1000 1000 1 1001 101001 64534  
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>lxc_spawn: 1788 Failed to set up id mapping.  
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>__lxc_start: 2107  
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>TASK ERROR: startup for container &#39;110&#39; failed
</span></code></pre></div></p>
<h3 id="添加gpu">添加gpu<a class="headerlink" href="#添加gpu" title="Permanent link">&para;</a></h3>
<p>容器配置文件中添加
<div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>lxc.cgroup2.devices.allow: c 226:0 rwm
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>lxc.cgroup2.devices.allow: c 226:128 rwm
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>lxc.cgroup2.devices.allow: c 29:0 rwm
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>lxc.mount.entry: /dev/dri dev/dri none bind,optional,create=dir
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>lxc.mount.entry: /dev/fb0 dev/fb0 none bind,optional,create=file
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>lxc.apparmor.profile: unconfined
</span></code></pre></div></p>
<p>lxc.cgroup2.devices.allow设置允许在LXC容器中使用的设备规则
- <code>c</code> 表示字符设备。
- <code>195:*</code> 是一个设备规则，它指定了一组允许的字符设备。在这里，<code>195</code> 是主设备号（major number），而 <code>*</code> 表示允许任何次设备号（minor number），这意味着允许使用主设备号为 195 的所有字符设备。
- <code>rwm</code> 表示权限设置，<code>r</code> 表示允许读取，<code>w</code> 表示允许写入，<code>m</code> 表示允许创建设备文件。</p>
<p><code>lxc.mount.entry: /dev/dri dev/dri none bind,optional,create=dir</code>
- 这个配置条目将主机上的 <code>/dev/dri</code> 目录挂载到 LXC 容器内的 <code>dev/dri</code> 目录。
- <code>none</code> 表示没有特定的文件系统类型。
- <code>bind</code> 表示使用绑定挂载（bind mount），这意味着容器内的 <code>dev/dri</code> 目录会映射到主机上的 <code>/dev/dri</code> 目录，容器内的操作将影响到主机上的设备。
- <code>optional</code> 表示这个挂载是可选的，如果 <code>/dev/dri</code> 在主机上不存在，容器仍然会启动。
- <code>create=dir</code> 表示如果容器内的目录不存在，它将在容器内创建一个目录。
- <code>create=file</code> 表示如果容器内的文件不存在，它将在容器内创建一个文件</p>
<p>AppArmor 是一个 Linux 内核安全模块，用于限制程序的能力，包括容器，以增强安全性。
<code>lxc.apparmor.profile</code> 被设置为 "unconfined"，这意味着容器不受 AppArmor 个人资料的限制。它有更多自由，但也有较少的安全限制。</p>
<h3 id="遇到问题">遇到问题<a class="headerlink" href="#遇到问题" title="Permanent link">&para;</a></h3>
<h4 id="无法创建openwrt">无法创建openwrt<a class="headerlink" href="#无法创建openwrt" title="Permanent link">&para;</a></h4>
<p>从openwrt下载的rootfs无法创建lxc容器了
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>TASK ERROR: unable to create CT 102 - unable to detect OS distribution
</span></code></pre></div></p>
<p>必须命令行设置ostype
<div class="language-text highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>pct create 102 local:vztmpl/openwrt-23.05.0-x86-64-imagebuilder.tar.gz \
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>--storage local-zfs \
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>--ostype unmanaged \
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>--unprivileged 1 \
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>--hostname op9 \
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>--rootfs local-zfs:1 \
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>--cores 4 \
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>--memory 512 \
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>--swap 0 \
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>--features keyctl=1,nesting=1
</span></code></pre></div></p>
<h2 id="备份和恢复">备份和恢复<a class="headerlink" href="#备份和恢复" title="Permanent link">&para;</a></h2>
<p><a href="https://pve.proxmox.com/wiki/Backup_and_Restore">Backup and Restore - Proxmox VE</a></p>
<p>LXC
<div class="language-text highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a> pct restore 100 vzdump-lxc-100-2023_10_03-15_38_23.tar.zst --storage local-zfs
</span></code></pre></div></p>
<p>qm
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>
</span></code></pre></div></p>
<h2 id="pve显卡直通">PVE显卡直通<a class="headerlink" href="#pve显卡直通" title="Permanent link">&para;</a></h2>
<p><a href="https://pve.proxmox.com/wiki/PCI(e)_Passthrough">PCI(e) Passthrough - Proxmox VE</a>
<a href="https://pve.proxmox.com/wiki/PCI_Passthrough">PCI Passthrough - Proxmox VE</a>
<a href="https://www.reddit.com/r/homelab/comments/b5xpua/the_ultimate_beginners_guide_to_gpu_passthrough/">(7) The Ultimate Beginner's Guide to GPU Passthrough (Proxmox, Windows 10) : homelab (reddit.com)</a></p>
<h3 id="非grub修改内核参数方法">非grub修改内核参数方法<a class="headerlink" href="#非grub修改内核参数方法" title="Permanent link">&para;</a></h3>
<p>我使用zfs，pve8.0 root分区也位于zfs，使用systemd-boot引导。因此内核参数需要在<code>/etc/kernel/cmdline</code>修改。</p>
<ul>
<li>Grub：The kernel commandline needs to be placed in the variable GRUB_CMDLINE_LINUX_DEFAULT in the file <code>/etc/default/grub</code>. Running <code>update-grub</code> appends its content to all linux entries in /boot/grub/grub.cfg.</li>
<li>Systemd-boot</li>
<li>The kernel commandline needs to be placed as one line in <code>/etc/kernel/cmdline</code>. To apply your changes, run <code>proxmox-boot-tool refresh</code>, which sets it as the option line for all config files in <code>loader/entries/proxmox-*.conf</code>.</li>
</ul>
<h3 id="步骤">步骤<a class="headerlink" href="#步骤" title="Permanent link">&para;</a></h3>
<h4 id="修改内核参数">修改内核参数<a class="headerlink" href="#修改内核参数" title="Permanent link">&para;</a></h4>
<p><em>p.s grub和systemd-boot修改方法不一样，这里以systemd-boot为说明</em></p>
<ul>
<li><code>intel_iommu=on | amd_iommu=on</code>：For Intel CPUs, you may also need to enable the IOMMU on the <a href="https://pve.proxmox.com/wiki/Host_Bootloader#sysboot_edit_kernel_cmdline">kernel command line</a> for older (pre-5.15) kernels. For AMD CPUs it should be enabled automatically.</li>
<li>
<p><code>iommu=pt</code>：If your hardware supports IOMMU passthrough mode, enabling this mode might increase performance.</p>
</li>
<li>
<p>(optional)启用acs override</p>
</li>
</ul>
<p>最后的内核参数
<div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>/etc/kernel/cmdline
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>root=ZFS=rpool/ROOT/pve-1 boot=zfs amd_iommu=on iommu=pt pcie_acs_override=downstream,multifunction
</span></code></pre></div></p>
<p>更新引导参数
<code>proxmox-boot-tool refresh</code></p>
<h4 id="kernel-module">kernel module<a class="headerlink" href="#kernel-module" title="Permanent link">&para;</a></h4>
<h5 id="设置尽早加载">设置尽早加载<a class="headerlink" href="#设置尽早加载" title="Permanent link">&para;</a></h5>
<p>保证以下module尽早加载，将其添加到<code>/etc/modules</code>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>vfio
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>vfio_iommu_type1
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>vfio_pci
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>vfio_virqfd
</span></code></pre></div></p>
<h5 id="设置模块参数">设置模块参数<a class="headerlink" href="#设置模块参数" title="Permanent link">&para;</a></h5>
<p>修改一些内核模块的参数，位于<code>/etc/modprobe.d</code></p>
<p>vifo.conf
- disable_vga后，pve启动时显示器会无法使用（vifo接管显卡后，屏幕便会卡住不变了）
<div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>options vfio-pci ids=10de:1b81,10de:10f0,10de:1c02,10de:10f1 disable_vga=1
</span></code></pre></div></p>
<p>kvm.conf
<div class="language-text highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>options kvm ignore_msrs=1 report_ignored_msrs=0
</span></code></pre></div></p>
<p>blacklist.conf
<div class="language-text highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>blacklist nouveau
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>blacklist nvidia*
</span></code></pre></div></p>
<h5 id="更新initramfs">更新initramfs<a class="headerlink" href="#更新initramfs" title="Permanent link">&para;</a></h5>
<p>每当修改内核模块后，需要重新生成initramfs。
<code>update-initramfs -u</code>
- u: update
- k: 指定一个内核版本或者all指定所有</p>
<h3 id="acs-override">ACS override<a class="headerlink" href="#acs-override" title="Permanent link">&para;</a></h3>
<p><a href="http://vfio.blogspot.com/2014/08/vfiovga-faq.html">VFIO tips and tricks: VFIO+VGA FAQ</a></p>
<blockquote>
<p>pcie_acs_override =
        [PCIE] Override missing PCIe ACS support for:
    downstream
        All downstream ports - full ACS capabilties
    multifunction
        All multifunction devices - multifunction ACS subset
    id:nnnn:nnnn
        Specfic device - full ACS capabilities
        Specified as vid:did (vendor/device ID) in hex</p>
</blockquote>
<h3 id="遇到的问题">遇到的问题<a class="headerlink" href="#遇到的问题" title="Permanent link">&para;</a></h3>
<h4 id="第一张gpu直通问题">第一张gpu直通问题<a class="headerlink" href="#第一张gpu直通问题" title="Permanent link">&para;</a></h4>
<p>960（第一个槽），需要关闭显示器重启pve，才能正确工作。添加内核参数video=efifb:off后，连接显示器重启没问题？</p>
<blockquote>
<p><code>video=efifb:off</code> and related kernel parameters don't work on Proxmox anymore. Use <a href="https://forum.proxmox.com/posts/478351/">this work-around</a> when doing <a href="https://pve.proxmox.com/pve-docs/pve-admin-guide.html#qm_pci_passthrough">passthrough</a> of the boot (or only) GPU.<br />
Also, <code>amd_iommu=on</code> really does nothing and <code>iommu=pt</code> does mostly nothing. And <a href="https://pve.proxmox.com/pve-docs/pve-admin-guide.html#sysboot_determine_bootloader_used">not all</a> Proxmox installations use GRUB.</p>
<p>What a nice post! I've been looking for a solution to this BAR 3 issues all night. Big Thanks!<br />
By the way, I also found better solution on a reddit post. It is adding "<code>initcall_blacklist=sysfb_init</code>" to kernel parameter. No need "<code>video=efifb:off</code>" or "<code>video=simplefb:off</code>" in kernel parameter. I also tested, it does solve the problem!<br />
Reference:<br />
<a href="https://www.reddit.com/r/VFIO/comments/uud5sx/possible_to_let_simplefb_stay_away_from_the_gpu/?sort=old">https://www.reddit.com/r/VFIO/comme...let_simplefb_stay_away_from_the_gpu/?sort=old</a><br />
<a href="https://www.reddit.com/r/Proxmox/comments/vc9hw3/latest_proxmox_7_the_kernel_breaks_my_gpu/?sort=old">https://www.reddit.com/r/Proxmox/comments/vc9hw3/latest_proxmox_7_the_kernel_breaks_my_gpu/?sort=old</a></p>
</blockquote>
<h4 id="amd-6500xt-43错误">amd 6500xt 43错误<a class="headerlink" href="#amd-6500xt-43错误" title="Permanent link">&para;</a></h4>
<p>给czw直通6500xt，结果即使安装完amd驱动后仍然报43错误。最后发现是AMD GPU的问题，需要关闭Resizable BAR/Smart Access Memory <a href="https://pve.proxmox.com/wiki/PCI_Passthrough#BIOS_options">https://pve.proxmox.com/wiki/PCI_Passthrough#BIOS_options</a>  </p>
<blockquote>
<p>"Resizable BAR'/'Smart Access Memory': Some AMD GPUs (Vega and up) experience 'Code 43' in Windows guests if this is enabled on the host. It's not supported in VMs either way (yet), so the recommended setting is 'off'."</p>
</blockquote>
<p>https://forum.proxmox.com/threads/gpu-passthrough-radeon-6800xt-and-beyond.86932/post-561971</p>
<p>总结
- 有用
  - 关闭bios csm和smart access memory
  - 添加内核参数<code>initcall_blacklist=sysfb_init</code>（<code>video=efifb:off</code>仍然保留），重启pve
- 无用
  - 我自己评论的：I firstly tryed another method, since driver 43 error is a common problem when using libvirt to create VM. see <a href="https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF#Video_card_driver_virtualisation_detection">ovmf arch wiki 43</a>.  So I did similar thing: edit guest qemu config file(/etc/pve/qemu-sever/ VM id.conf), modify cpu property to "cpu: host,hidden=1,hv-vender-id=123456789".</p>
<h4 id="windows随机蓝屏bosd">windows随机蓝屏BOSD<a class="headerlink" href="#windows随机蓝屏bosd" title="Permanent link">&para;</a></h4>
<p>VIDEO_DXGKRNL
- 10来分钟就蓝屏，没有触发条件
- gfe安装最新驱动，安装完成时黑屏，只能在pve console里操作。
    - 可以再次点击快速安装安装驱动
    - 可以看到设备管理器中显卡报13错误
    - 重启后显示安装上了，但是如果重新安装又是以上步骤</p>
<p>尝试
- 关闭vnc, parsec, 小飞机等可能修改显卡的软件
- 勾上primay gpu
- 使用网上下载的msi 公版vbios，设置romfile参数<a href="https://www.techpowerup.com/vgabios/183948/msi-gtx1070-8192-160520">VGA Bios Collection: MSI GTX 1070 8 GB | TechPowerUp</a>
- 安装studio驱动（仍然会有上面问题）</p>
<p><a href="https://forum.proxmox.com/threads/urgent-help-windows-10-crash-bsod-video_dxgkrnl_fatal_error.131828/">Urgent Help, Windows 10 Crash!!! BSOD VIDEO_DXGKRNL_FATAL_ERROR | Proxmox Support Forum</a></p>
<p>把下面句子翻译成英文：
我遇到了完全一样的问题，我的win10虚拟机最近开始随机蓝屏。它过去3个星期是很正常的。我尝试了很多方法（reinstall win10, try win11, pass vbios rom file），问题仍没解决。直到我看到了你的帖子，我也尝试把CPU从host改为kvm64，问题居然神奇的解决了。</p>
<p>经过我之前非常多的尝试，我发现了一个能够稳定触发BOSD的方法，那就是使用GPU-Z软件导出GPU的vbios，每次确认导出时，win10系统就会蓝屏。</p>
<p>并且我也发现了一个不太正常的现象。GPU-Z只有在第一次打开时UEFI状态是勾上的，关闭GPU-Z软件然后再打开，UEFI就会变为未勾选状态。并打开GPU-Z软件几秒后，bus interface也会从PCIex16 3.0@x16 3.0变为 PCI。</p>
<p>在将CPU从host换成KVM64后，上面的问题就被解决了。GPU-Z UEFI和bus interface显示的都是正确的。</p>
<p><a href="https://forum.proxmox.com/threads/video_dxgkrnl_fatal_error-in-a-windows-vm-workarounds.94890/">VIDEO_DXGKRNL_FATAL_ERROR in a Windows VM - workarounds? | Proxmox Support Forum</a>
- 这个帖子认为是MSI这种软件读取了底层的不存在的寄存器导致系统崩溃</p>
<h4 id="43错误">43错误<a class="headerlink" href="#43错误" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>显卡驱动检测虚拟机
最早使用KVM创建虚拟机，遇到的便是这个。安装英伟达最新驱动即可</p>
<blockquote>
<p>Video card drivers by AMD incorporate very basic virtual machine detection targeting Hyper-V extensions. Should this detection mechanism trigger, the drivers will refuse to run, resulting in a black screen.
Nvidia guest drivers prior to version 465 exhibited a similar behaviour which resulted in a generic error 43 in the card's device manager status. Systems using these older drivers therefore also need the above modification. In addition, they also require hiding the KVM CPU leaf</p>
</blockquote>
</li>
<li>
<p><a href="https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF#Code_43_while_Resizable_Bar_is_turned_on_in_the_bios">Resizable Bar is turned on in the bios</a></p>
</li>
</ol>
<p>If you own a GPU that supports Resizable BAR / SAM and have the corresponding BIOS option enabled, you might get code 43 because this feature is disabled in QEMU <a href="https://github.com/qemu/qemu/commit/3412d8ec9810b819f8b79e8e0c6b87217c876e32">[11]</a>. Linux Kernel release 6.1 added option to manipulate PCIe Resizable BARs through <a href="https://en.wikipedia.org/wiki/sysfs" title="wikipedia:sysfs">sysfs</a>, so you can try permanently resizing it using a <a href="https://wiki.archlinux.org/title/Udev" title="Udev">udev</a> rule:
<div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>/etc/udev/rules.d/01-amd.rules
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>ACTION==&quot;add&quot;, SUBSYSTEM==&quot;pci&quot;, ATTR{vendor}==&quot;0x1002&quot;, ATTR{device}==&quot;0x73bf&quot;, ATTR{resource0_resize}=&quot;14&quot;
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>ACTION==&quot;add&quot;, SUBSYSTEM==&quot;pci&quot;, ATTR{vendor}==&quot;0x1002&quot;, ATTR{device}==&quot;0x73bf&quot;, ATTR{resource2_resize}=&quot;8&quot;
</span></code></pre></div></p>
<p>Alternatively, to temporarily resize the PCIe BAR, you can write the new size to <code>/sys/bus/pci/devices/_device_address_/resource_number__resize</code>, where <em>device_address</em> is the address of your GPU, such as <code>0000:03:00.0</code> (note that for changing this parameter, no driver can be loaded for the device).</p>
<p>You can confirm values using <code>lspci -vvvxxxx</code>.</p>
<h4 id="amd-reset-bug">AMD reset bug<a class="headerlink" href="#amd-reset-bug" title="Permanent link">&para;</a></h4>
<p><a href="https://www.nicksherlock.com/2020/11/working-around-the-amd-gpu-reset-bug-on-proxmox/">Working around the AMD GPU Reset bug on Proxmox using vendor-reset – Nicholas Sherlock (nicksherlock.com)</a></p>
<blockquote>
<p>This is especially a problem if you only have one GPU in your system, because it will be your primary GPU and so be initialised by the host UEFI during boot, rendering it unusable for passthrough even a single time.</p>
</blockquote>
<h4 id="6500xt性能很差">6500xt性能很差<a class="headerlink" href="#6500xt性能很差" title="Permanent link">&para;</a></h4>
<p>巫师三1080p只有几十fps，并且有时候跑benchmark时，vm会自动关机。</p>
<p>发现不能安装amd最新驱动，类似于芯片组不识别</p>
<ul>
<li>can't install amd adrenalin software</li>
<li>
<p><a href="https://forums.unraid.net/topic/99447-unable-to-install-amd-gpu-drivers-in-windows-guest-vm/">Unable to install AMD GPU Drivers in Windows guest VM - VM Engine (KVM) - Unraid</a></p>
</li>
<li>
<p>BOSD问题</p>
</li>
<li>reset bug：Symptoms included the display going black and the GPU fans kicking on higher for no reason.<a href="https://www.reddit.com/r/VFIO/comments/jicm4c/radeon_adrenaline_software_installation_kills_the/">(7) Radeon Adrenaline Software installation kills the VM : VFIO (reddit.com)</a></li>
</ul>
<p>仔细研究后发现，amd reset bug是指重启虚拟机后会黑屏，不是所有卡都会遇到该问题。
并且amd vendor reset github仓库并不支持6500xt。因此貌似和这里的问题无关。</p>
<h3 id="unbind-gpu">unbind gpu<a class="headerlink" href="#unbind-gpu" title="Permanent link">&para;</a></h3>
<p>未测试
<a href="https://forum.proxmox.com/threads/recover-gpu-from-vm-after-it-shuts-down.126457/">(2) Recover GPU from VM after it shuts down | Proxmox Support Forum</a>
<div class="language-text highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>echo &quot;0000:01:00.0&quot; &gt; &quot;/sys/bus/pci/devices/0000:01:00.0/driver/unbind&quot; &amp;&amp; echo &quot;0000:01:00.0&quot; &gt; &quot;/sys/bus/pci/drivers/amdgpu/bind&quot;
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>echo &quot;0000:01:00.1&quot; &gt; &quot;/sys/bus/pci/devices/0000:01:00.1/driver/unbind&quot; &amp;&amp; echo &quot;0000:01:00.1&quot; &gt; &quot;/sys/bus/pci/drivers/snd_hda_intel/bind&quot;
</span></code></pre></div></p>
<h3 id="资料收集">资料收集<a class="headerlink" href="#资料收集" title="Permanent link">&para;</a></h3>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.1/html/installation_guide/appe-configuring_a_hypervisor_host_for_pci_passthrough">Appendix G. Configuring a Host for PCI Passthrough Red Hat Virtualization 4.1 | Red Hat Customer Portal --- 附录 G. 为 PCI 直通配置主机 红帽虚拟化 4.1 |红帽客户门户</a></p>
<p>iommu=pt能够提高性能
If <code>intel_iommu=on</code> or <code>amd_iommu=on</code> works, you can try replacing them with <code>iommu=pt</code> or <code>amd_iommu=pt</code>. The <code>pt</code> option <strong>only enables IOMMU for devices used in passthrough and will provide better host performance.</strong> However, the option may not be supported on all hardware. Revert to previous option if the <code>pt</code> option doesn't work for your host.</p>
<p>allow_unsafe_interrupts选项
If the passthrough fails because the hardware does not support interrupt remapping, you can consider enabling the <code>allow_unsafe_interrupts</code> option if the virtual machines are trusted. The <code>allow_unsafe_interrupts</code> is not enabled by default because enabling it potentially exposes the host to MSI attacks from virtual machines. To enable the option:</p>
<h4 id="redhat">redhat<a class="headerlink" href="#redhat" title="Permanent link">&para;</a></h4>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.4">Product Documentation for Red Hat Virtualization 4.4 | Red Hat Customer Portal</a>
<a href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.4/pdf/setting_up_an_nvidia_gpu_for_a_virtual_machine_in_red_hat_virtualization/red_hat_virtualization-4.4-setting_up_an_nvidia_gpu_for_a_virtual_machine_in_red_hat_virtualization-en-us.pdf">Red Hat Virtualization 4.4 Setting up an NVIDIA GPU for a virtual machine in Red Hat Virtualization</a></p>
<h2 id="其它问题">其它问题<a class="headerlink" href="#其它问题" title="Permanent link">&para;</a></h2>
<h3 id="直通ax200没有蓝牙解决">直通AX200没有蓝牙（解决）<a class="headerlink" href="#直通ax200没有蓝牙解决" title="Permanent link">&para;</a></h3>
<p><a href="https://forums.unraid.net/topic/120168-%E6%B1%82%E5%8A%A9-vm%E7%9B%B4%E9%80%9Aax210%E8%93%9D%E7%89%99%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98/">[求助] VM直通AX210蓝牙遇到问题 - Chinese / 简体中文 - Unraid</a>
- 看到别人都是lsusb能看到集成的蓝牙，但是我的没有。</p>
<p><a href="https://bbs.archlinux.org/viewtopic.php?id=272643">[SOLVED] No bluetooth adaptater on AX200 / Kernel &amp; Hardware / Arch Linux Forums</a>
我的输出没有任何firware load的信息</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>root@ryzen-pve ➜  ~ dmesg | grep firm
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>[    0.512405] Spectre V2 : Enabling Restricted Speculation for firmware calls
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>[    7.689816] platform regulatory.0: Direct firmware load for regulatory.db failed with error -2
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>root@ryzen-pve ➜  ~ ls /lib/firmware |grep a0
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>iwlwifi-cc-a0-66.ucode.xz
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>iwlwifi-cc-a0-72.ucode.xz
</span></code></pre></div>
<p>我这里没有AX200 Bluetooth，这是别人的输出
<div class="language-text highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>[(16:36:45)xeph:~]lsusb
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>Bus 003 Device 003: ID 8087:0029 Intel Corp. AX200 Bluetooth
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>Bus 003 Device 002: ID 046d:c52b Logitech, Inc. Unifying Receiver
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>Bus 002 Device 002: ID 05e3:0620 Genesys Logic, Inc. GL3523 Hub
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a>Bus 001 Device 004: ID 048d:c101 Integrated Technology Express, Inc. ITE Device(8910)
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>Bus 001 Device 003: ID 13d3:56ff IMC Networks Integrated Camera
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a>Bus 001 Device 002: ID 05e3:0610 Genesys Logic, Inc. Hub
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a>Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</span></code></pre></div></p>
<p>感觉可能是因为绑定了vifo-pci导致的？
<a href="https://forums.unraid.net/topic/119920-does-anyone-know-how-to-pass-through-the-wi-fi-6-ax200-network-card-to-a-virtual-machine-with-kali-linux-os/">Does anyone know how to pass through the Wi Fi 6 ax200 network card to a virtual machine with Kali Linux OS? - VM Engine (KVM) - Unraid --- 有谁知道如何通过Wi Fi 6 ax200网卡传递到带有Kali Linux操作系统的虚拟机？- 虚拟机引擎 （KVM） - 取消突袭</a>
<a href="https://forums.unraid.net/bug-reports/prereleases/6100-rc1-onboard-bluetooth-no-longer-able-to-passthrough-to-vm-r1524/">[6.10.0-RC1] Onboard Bluetooth no longer able to passthrough to VM - Prereleases - Unraid --- [6.10.0-RC1]板载蓝牙无法再直通到 VM - 售前赛 - 取消突袭</a></p>
<p>好像和我一样，蓝牙从usb中消失
<a href="https://forum.proxmox.com/threads/pve-7-4-home-assistant-intel-ax200-bluetooth-issues.126014/">PVE 7.4 + Home Assistant: Intel AX200 Bluetooth issues | Proxmox Support Forum --- PVE 7.4 + 家庭助理： 英特尔 AX200 蓝牙问题 |Proxmox 支持论坛</a></p>
<p>旧笔记本上的ax200 lsusb确实能看到设备</p>
<p>update：可能原因确实是绑定了vifo-pci，导致没有看到bluetooth。后面不知道怎么能看到usb蓝牙了。
但在win10虚拟机中，无法识别设备
解决方法为（如果无法移除，显示in use，那么就添加到blacklist中，然后重启host）
<div class="language-text highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>modprobe -r btusb
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>modprobe -r bluetooth
</span></code></pre></div></p>
<h3 id="修改hostname寄">修改hostname寄<a class="headerlink" href="#修改hostname寄" title="Permanent link">&para;</a></h3>
<p><a href="https://web-wilke.de/fix-proxmox-error-after-hostname-ip-change/">Fix Proxmox Error after hostname/ip change (web-wilke.de)</a>
修改了hostname后，容器虚拟机都看不见了。尝试修改/etc/hosts但是不够，最后没弄好，还是改回原来的hostname了。</p>
<h3 id="备份单个disk">备份单个disk<a class="headerlink" href="#备份单个disk" title="Permanent link">&para;</a></h3>
<p>zfs自己备份可以吗？
我创建的VM不知为何不支持快照。</p>
<p><a href="https://forum.proxmox.com/threads/backup-single-disk-in-vm.94543/">backup single disk in VM | Proxmox Support Forum</a></p>
<h3 id="zerotier无法启动">zerotier无法启动<a class="headerlink" href="#zerotier无法启动" title="Permanent link">&para;</a></h3>
<p><a href="https://pve.proxmox.com/wiki/OpenVPN_in_LXC">OpenVPN in LXC - Proxmox VE</a></p>
<p>特权容器或添加权限</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>vim /etc/pve/lxc/100.conf
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>...
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>onboot: 1
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>ostype: unmanaged
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>parent: basic
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>rootfs: local-zfs:subvol-100-disk-0,size=100G
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a>swap: 0
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>unprivileged: 1
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a>lxc.cgroup2.devices.allow: c 10:200 rwm
</span><span id="__span-44-11"><a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a>lxc.mount.entry: /dev/net dev/net none bind,create=dir
</span><span id="__span-44-12"><a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a>
</span><span id="__span-44-13"><a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a>[basic]
</span><span id="__span-44-14"><a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a>#%E5%9F%BA%E6%9C%AC%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%8Cddns%EF%BC%8Cwg_s2s%E5%8F%AF%E4%BB%A5%E8%BF%9E%E6%8E%A5op1,op3
</span><span id="__span-44-15"><a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a>arch: amd64
</span><span id="__span-44-16"><a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a>cores: 2
</span><span id="__span-44-17"><a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a>hostname: op2
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>chown 100000:100000 /dev/net/tun
</span></code></pre></div>
<h3 id="磁盘测速">磁盘测速<a class="headerlink" href="#磁盘测速" title="Permanent link">&para;</a></h3>
<p>ryzen虚拟机</p>
<h4 id="pcie40-爱国者2t">pcie4.0 爱国者2T<a class="headerlink" href="#pcie40-爱国者2t" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>➜  fio sudo fio --filename=test.bin ssd-win-likely.fio
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>seq-read-4m: (g=0): rw=read, bs=(R) 4096KiB-4096KiB, (W) 4096KiB-4096KiB, (T) 4096KiB-4096KiB, ioengine=libaio, iodepth=32
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>seq-write-4m: (g=1): rw=write, bs=(R) 4096KiB-4096KiB, (W) 4096KiB-4096KiB, (T) 4096KiB-4096KiB, ioengine=libaio, iodepth=32
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>rand-read-4k: (g=2): rw=randread, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=4
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>rand-write-4k: (g=3): rw=randwrite, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=4
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>fio-3.28
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>Starting 4 processes
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a>seq-read-4m: Laying out IO file (1 file / 10240MiB)
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a>Jobs: 1 (f=1): [_(3),w(1)][68.5%][w=80.5MiB/s][w=20.6k IOPS][eta 01m:10s]
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>seq-read-4m: (groupid=0, jobs=1): err= 0: pid=778450: Fri Sep 29 23:47:57 2023
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>  read: IOPS=556, BW=2226MiB/s (2334MB/s)(10.0GiB/4600msec)
</span><span id="__span-46-12"><a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>    slat (usec): min=47, max=7932, avg=478.16, stdev=665.62
</span><span id="__span-46-13"><a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a>    clat (msec): min=8, max=162, avg=56.62, stdev=22.04
</span><span id="__span-46-14"><a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a>     lat (msec): min=8, max=162, avg=57.10, stdev=21.94
</span><span id="__span-46-15"><a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a>    clat percentiles (msec):
</span><span id="__span-46-16"><a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a>     |  1.00th=[   15],  5.00th=[   23], 10.00th=[   28], 20.00th=[   36],
</span><span id="__span-46-17"><a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a>     | 30.00th=[   44], 40.00th=[   51], 50.00th=[   59], 60.00th=[   64],
</span><span id="__span-46-18"><a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a>     | 70.00th=[   69], 80.00th=[   74], 90.00th=[   82], 95.00th=[   91],
</span><span id="__span-46-19"><a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a>     | 99.00th=[  131], 99.50th=[  142], 99.90th=[  159], 99.95th=[  161],
</span><span id="__span-46-20"><a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a>     | 99.99th=[  163]
</span><span id="__span-46-21"><a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a>   bw (  MiB/s): min= 1993, max= 2336, per=99.89%, avg=2223.66, stdev=118.21, samples=8
</span><span id="__span-46-22"><a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a>   iops        : min=  498, max=  584, avg=555.63, stdev=29.56, samples=8
</span><span id="__span-46-23"><a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a>  lat (msec)   : 10=0.08%, 20=3.01%, 50=36.45%, 100=58.32%, 250=2.15%
</span><span id="__span-46-24"><a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a>  cpu          : usr=0.89%, sys=25.74%, ctx=2221, majf=1, minf=32780
</span><span id="__span-46-25"><a id="__codelineno-46-25" name="__codelineno-46-25" href="#__codelineno-46-25"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=0.2%, 8=0.3%, 16=0.6%, 32=98.8%, &gt;=64=0.0%
</span><span id="__span-46-26"><a id="__codelineno-46-26" name="__codelineno-46-26" href="#__codelineno-46-26"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-46-27"><a id="__codelineno-46-27" name="__codelineno-46-27" href="#__codelineno-46-27"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-46-28"><a id="__codelineno-46-28" name="__codelineno-46-28" href="#__codelineno-46-28"></a>     issued rwts: total=2560,0,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-46-29"><a id="__codelineno-46-29" name="__codelineno-46-29" href="#__codelineno-46-29"></a>     latency   : target=0, window=0, percentile=100.00%, depth=32
</span><span id="__span-46-30"><a id="__codelineno-46-30" name="__codelineno-46-30" href="#__codelineno-46-30"></a>seq-write-4m: (groupid=1, jobs=1): err= 0: pid=778524: Fri Sep 29 23:47:57 2023
</span><span id="__span-46-31"><a id="__codelineno-46-31" name="__codelineno-46-31" href="#__codelineno-46-31"></a>  write: IOPS=82, BW=330MiB/s (346MB/s)(10.0GiB/31034msec); 0 zone resets
</span><span id="__span-46-32"><a id="__codelineno-46-32" name="__codelineno-46-32" href="#__codelineno-46-32"></a>    slat (usec): min=76, max=221964, avg=1061.67, stdev=5512.31
</span><span id="__span-46-33"><a id="__codelineno-46-33" name="__codelineno-46-33" href="#__codelineno-46-33"></a>    clat (msec): min=4, max=7483, avg=385.10, stdev=1126.37
</span><span id="__span-46-34"><a id="__codelineno-46-34" name="__codelineno-46-34" href="#__codelineno-46-34"></a>     lat (msec): min=5, max=7484, avg=386.16, stdev=1126.51
</span><span id="__span-46-35"><a id="__codelineno-46-35" name="__codelineno-46-35" href="#__codelineno-46-35"></a>    clat percentiles (msec):
</span><span id="__span-46-36"><a id="__codelineno-46-36" name="__codelineno-46-36" href="#__codelineno-46-36"></a>     |  1.00th=[   12],  5.00th=[   22], 10.00th=[   27], 20.00th=[   34],
</span><span id="__span-46-37"><a id="__codelineno-46-37" name="__codelineno-46-37" href="#__codelineno-46-37"></a>     | 30.00th=[   43], 40.00th=[   52], 50.00th=[   64], 60.00th=[   74],
</span><span id="__span-46-38"><a id="__codelineno-46-38" name="__codelineno-46-38" href="#__codelineno-46-38"></a>     | 70.00th=[   96], 80.00th=[  142], 90.00th=[  502], 95.00th=[ 2970],
</span><span id="__span-46-39"><a id="__codelineno-46-39" name="__codelineno-46-39" href="#__codelineno-46-39"></a>     | 99.00th=[ 5604], 99.50th=[ 5604], 99.90th=[ 7483], 99.95th=[ 7483],
</span><span id="__span-46-40"><a id="__codelineno-46-40" name="__codelineno-46-40" href="#__codelineno-46-40"></a>     | 99.99th=[ 7483]
</span><span id="__span-46-41"><a id="__codelineno-46-41" name="__codelineno-46-41" href="#__codelineno-46-41"></a>   bw (  KiB/s): min=65667, max=2682078, per=100.00%, avg=823187.87, stdev=652362.03, samples=24
</span><span id="__span-46-42"><a id="__codelineno-46-42" name="__codelineno-46-42" href="#__codelineno-46-42"></a>   iops        : min=   16, max=  654, avg=200.58, stdev=159.18, samples=24
</span><span id="__span-46-43"><a id="__codelineno-46-43" name="__codelineno-46-43" href="#__codelineno-46-43"></a>  lat (msec)   : 10=0.82%, 20=2.77%, 50=34.80%, 100=32.73%, 250=15.51%
</span><span id="__span-46-44"><a id="__codelineno-46-44" name="__codelineno-46-44" href="#__codelineno-46-44"></a>  lat (msec)   : 500=3.20%, 750=1.64%, 1000=0.55%, 2000=1.41%, &gt;=2000=6.56%
</span><span id="__span-46-45"><a id="__codelineno-46-45" name="__codelineno-46-45" href="#__codelineno-46-45"></a>  cpu          : usr=3.45%, sys=5.12%, ctx=1899, majf=0, minf=15
</span><span id="__span-46-46"><a id="__codelineno-46-46" name="__codelineno-46-46" href="#__codelineno-46-46"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=0.2%, 8=0.3%, 16=0.6%, 32=98.8%, &gt;=64=0.0%
</span><span id="__span-46-47"><a id="__codelineno-46-47" name="__codelineno-46-47" href="#__codelineno-46-47"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-46-48"><a id="__codelineno-46-48" name="__codelineno-46-48" href="#__codelineno-46-48"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-46-49"><a id="__codelineno-46-49" name="__codelineno-46-49" href="#__codelineno-46-49"></a>     issued rwts: total=0,2560,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-46-50"><a id="__codelineno-46-50" name="__codelineno-46-50" href="#__codelineno-46-50"></a>     latency   : target=0, window=0, percentile=100.00%, depth=32
</span><span id="__span-46-51"><a id="__codelineno-46-51" name="__codelineno-46-51" href="#__codelineno-46-51"></a>rand-read-4k: (groupid=2, jobs=1): err= 0: pid=778956: Fri Sep 29 23:47:57 2023
</span><span id="__span-46-52"><a id="__codelineno-46-52" name="__codelineno-46-52" href="#__codelineno-46-52"></a>  read: IOPS=50.4k, BW=197MiB/s (207MB/s)(10.0GiB/51982msec)
</span><span id="__span-46-53"><a id="__codelineno-46-53" name="__codelineno-46-53" href="#__codelineno-46-53"></a>    slat (nsec): min=1170, max=3868.5k, avg=4517.95, stdev=7664.76
</span><span id="__span-46-54"><a id="__codelineno-46-54" name="__codelineno-46-54" href="#__codelineno-46-54"></a>    clat (nsec): min=220, max=1695.1M, avg=74038.40, stdev=2120026.59
</span><span id="__span-46-55"><a id="__codelineno-46-55" name="__codelineno-46-55" href="#__codelineno-46-55"></a>     lat (usec): min=12, max=1695.1k, avg=78.64, stdev=2120.05
</span><span id="__span-46-56"><a id="__codelineno-46-56" name="__codelineno-46-56" href="#__codelineno-46-56"></a>    clat percentiles (usec):
</span><span id="__span-46-57"><a id="__codelineno-46-57" name="__codelineno-46-57" href="#__codelineno-46-57"></a>     |  1.00th=[   18],  5.00th=[   21], 10.00th=[   23], 20.00th=[   26],
</span><span id="__span-46-58"><a id="__codelineno-46-58" name="__codelineno-46-58" href="#__codelineno-46-58"></a>     | 30.00th=[   33], 40.00th=[   76], 50.00th=[   81], 60.00th=[   84],
</span><span id="__span-46-59"><a id="__codelineno-46-59" name="__codelineno-46-59" href="#__codelineno-46-59"></a>     | 70.00th=[   88], 80.00th=[   93], 90.00th=[  105], 95.00th=[  123],
</span><span id="__span-46-60"><a id="__codelineno-46-60" name="__codelineno-46-60" href="#__codelineno-46-60"></a>     | 99.00th=[  210], 99.50th=[  293], 99.90th=[  627], 99.95th=[ 1074],
</span><span id="__span-46-61"><a id="__codelineno-46-61" name="__codelineno-46-61" href="#__codelineno-46-61"></a>     | 99.99th=[ 1975]
</span><span id="__span-46-62"><a id="__codelineno-46-62" name="__codelineno-46-62" href="#__codelineno-46-62"></a>   bw (  KiB/s): min= 5643, max=270960, per=100.00%, avg=205429.51, stdev=34312.15, samples=101
</span><span id="__span-46-63"><a id="__codelineno-46-63" name="__codelineno-46-63" href="#__codelineno-46-63"></a>   iops        : min= 1410, max=67740, avg=51357.30, stdev=8578.07, samples=101
</span><span id="__span-46-64"><a id="__codelineno-46-64" name="__codelineno-46-64" href="#__codelineno-46-64"></a>  lat (nsec)   : 250=0.01%, 500=0.01%, 750=0.01%, 1000=0.01%
</span><span id="__span-46-65"><a id="__codelineno-46-65" name="__codelineno-46-65" href="#__codelineno-46-65"></a>  lat (usec)   : 2=0.01%, 10=0.01%, 20=4.52%, 50=32.03%, 100=50.56%
</span><span id="__span-46-66"><a id="__codelineno-46-66" name="__codelineno-46-66" href="#__codelineno-46-66"></a>  lat (usec)   : 250=12.11%, 500=0.62%, 750=0.08%, 1000=0.02%
</span><span id="__span-46-67"><a id="__codelineno-46-67" name="__codelineno-46-67" href="#__codelineno-46-67"></a>  lat (msec)   : 2=0.05%, 4=0.01%, 10=0.01%, 20=0.01%, 50=0.01%
</span><span id="__span-46-68"><a id="__codelineno-46-68" name="__codelineno-46-68" href="#__codelineno-46-68"></a>  lat (msec)   : 500=0.01%, 2000=0.01%
</span><span id="__span-46-69"><a id="__codelineno-46-69" name="__codelineno-46-69" href="#__codelineno-46-69"></a>  cpu          : usr=7.47%, sys=29.84%, ctx=1440214, majf=0, minf=21
</span><span id="__span-46-70"><a id="__codelineno-46-70" name="__codelineno-46-70" href="#__codelineno-46-70"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
</span><span id="__span-46-71"><a id="__codelineno-46-71" name="__codelineno-46-71" href="#__codelineno-46-71"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-46-72"><a id="__codelineno-46-72" name="__codelineno-46-72" href="#__codelineno-46-72"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-46-73"><a id="__codelineno-46-73" name="__codelineno-46-73" href="#__codelineno-46-73"></a>     issued rwts: total=2621440,0,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-46-74"><a id="__codelineno-46-74" name="__codelineno-46-74" href="#__codelineno-46-74"></a>     latency   : target=0, window=0, percentile=100.00%, depth=4
</span><span id="__span-46-75"><a id="__codelineno-46-75" name="__codelineno-46-75" href="#__codelineno-46-75"></a>rand-write-4k: (groupid=3, jobs=1): err= 0: pid=779798: Fri Sep 29 23:47:57 2023
</span><span id="__span-46-76"><a id="__codelineno-46-76" name="__codelineno-46-76" href="#__codelineno-46-76"></a>  write: IOPS=20.3k, BW=79.1MiB/s (83.0MB/s)(4748MiB/60005msec); 0 zone resets
</span><span id="__span-46-77"><a id="__codelineno-46-77" name="__codelineno-46-77" href="#__codelineno-46-77"></a>    slat (nsec): min=1270, max=418621k, avg=6166.83, stdev=381021.38
</span><span id="__span-46-78"><a id="__codelineno-46-78" name="__codelineno-46-78" href="#__codelineno-46-78"></a>    clat (nsec): min=290, max=1815.5M, avg=190356.30, stdev=6618668.74
</span><span id="__span-46-79"><a id="__codelineno-46-79" name="__codelineno-46-79" href="#__codelineno-46-79"></a>     lat (usec): min=16, max=1815.5k, avg=196.62, stdev=6629.88
</span><span id="__span-46-80"><a id="__codelineno-46-80" name="__codelineno-46-80" href="#__codelineno-46-80"></a>    clat percentiles (usec):
</span><span id="__span-46-81"><a id="__codelineno-46-81" name="__codelineno-46-81" href="#__codelineno-46-81"></a>     |  1.00th=[   21],  5.00th=[   26], 10.00th=[   30], 20.00th=[   52],
</span><span id="__span-46-82"><a id="__codelineno-46-82" name="__codelineno-46-82" href="#__codelineno-46-82"></a>     | 30.00th=[   83], 40.00th=[   87], 50.00th=[   91], 60.00th=[   95],
</span><span id="__span-46-83"><a id="__codelineno-46-83" name="__codelineno-46-83" href="#__codelineno-46-83"></a>     | 70.00th=[  102], 80.00th=[  120], 90.00th=[  188], 95.00th=[  318],
</span><span id="__span-46-84"><a id="__codelineno-46-84" name="__codelineno-46-84" href="#__codelineno-46-84"></a>     | 99.00th=[ 1844], 99.50th=[ 2008], 99.90th=[ 4424], 99.95th=[ 7635],
</span><span id="__span-46-85"><a id="__codelineno-46-85" name="__codelineno-46-85" href="#__codelineno-46-85"></a>     | 99.99th=[20579]
</span><span id="__span-46-86"><a id="__codelineno-46-86" name="__codelineno-46-86" href="#__codelineno-46-86"></a>   bw (  KiB/s): min= 1920, max=185240, per=100.00%, avg=88600.73, stdev=62711.61, samples=108
</span><span id="__span-46-87"><a id="__codelineno-46-87" name="__codelineno-46-87" href="#__codelineno-46-87"></a>   iops        : min=  480, max=46310, avg=22150.14, stdev=15677.91, samples=108
</span><span id="__span-46-88"><a id="__codelineno-46-88" name="__codelineno-46-88" href="#__codelineno-46-88"></a>  lat (nsec)   : 500=0.01%, 750=0.01%, 1000=0.01%
</span><span id="__span-46-89"><a id="__codelineno-46-89" name="__codelineno-46-89" href="#__codelineno-46-89"></a>  lat (usec)   : 2=0.01%, 4=0.01%, 10=0.01%, 20=0.63%, 50=19.19%
</span><span id="__span-46-90"><a id="__codelineno-46-90" name="__codelineno-46-90" href="#__codelineno-46-90"></a>  lat (usec)   : 100=47.74%, 250=25.71%, 500=3.06%, 750=0.44%, 1000=0.25%
</span><span id="__span-46-91"><a id="__codelineno-46-91" name="__codelineno-46-91" href="#__codelineno-46-91"></a>  lat (msec)   : 2=2.46%, 4=0.39%, 10=0.08%, 20=0.02%, 50=0.01%
</span><span id="__span-46-92"><a id="__codelineno-46-92" name="__codelineno-46-92" href="#__codelineno-46-92"></a>  lat (msec)   : 100=0.01%, 500=0.01%, 750=0.01%, 1000=0.01%, 2000=0.01%
</span><span id="__span-46-93"><a id="__codelineno-46-93" name="__codelineno-46-93" href="#__codelineno-46-93"></a>  cpu          : usr=2.85%, sys=12.76%, ctx=889109, majf=0, minf=17
</span><span id="__span-46-94"><a id="__codelineno-46-94" name="__codelineno-46-94" href="#__codelineno-46-94"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
</span><span id="__span-46-95"><a id="__codelineno-46-95" name="__codelineno-46-95" href="#__codelineno-46-95"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-46-96"><a id="__codelineno-46-96" name="__codelineno-46-96" href="#__codelineno-46-96"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-46-97"><a id="__codelineno-46-97" name="__codelineno-46-97" href="#__codelineno-46-97"></a>     issued rwts: total=0,1215500,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-46-98"><a id="__codelineno-46-98" name="__codelineno-46-98" href="#__codelineno-46-98"></a>     latency   : target=0, window=0, percentile=100.00%, depth=4
</span><span id="__span-46-99"><a id="__codelineno-46-99" name="__codelineno-46-99" href="#__codelineno-46-99"></a>
</span><span id="__span-46-100"><a id="__codelineno-46-100" name="__codelineno-46-100" href="#__codelineno-46-100"></a>Run status group 0 (all jobs):
</span><span id="__span-46-101"><a id="__codelineno-46-101" name="__codelineno-46-101" href="#__codelineno-46-101"></a>   READ: bw=2226MiB/s (2334MB/s), 2226MiB/s-2226MiB/s (2334MB/s-2334MB/s), io=10.0GiB (10.7GB), run=4600-4600msec
</span><span id="__span-46-102"><a id="__codelineno-46-102" name="__codelineno-46-102" href="#__codelineno-46-102"></a>
</span><span id="__span-46-103"><a id="__codelineno-46-103" name="__codelineno-46-103" href="#__codelineno-46-103"></a>Run status group 1 (all jobs):
</span><span id="__span-46-104"><a id="__codelineno-46-104" name="__codelineno-46-104" href="#__codelineno-46-104"></a>  WRITE: bw=330MiB/s (346MB/s), 330MiB/s-330MiB/s (346MB/s-346MB/s), io=10.0GiB (10.7GB), run=31034-31034msec
</span><span id="__span-46-105"><a id="__codelineno-46-105" name="__codelineno-46-105" href="#__codelineno-46-105"></a>
</span><span id="__span-46-106"><a id="__codelineno-46-106" name="__codelineno-46-106" href="#__codelineno-46-106"></a>Run status group 2 (all jobs):
</span><span id="__span-46-107"><a id="__codelineno-46-107" name="__codelineno-46-107" href="#__codelineno-46-107"></a>   READ: bw=197MiB/s (207MB/s), 197MiB/s-197MiB/s (207MB/s-207MB/s), io=10.0GiB (10.7GB), run=51982-51982msec
</span><span id="__span-46-108"><a id="__codelineno-46-108" name="__codelineno-46-108" href="#__codelineno-46-108"></a>
</span><span id="__span-46-109"><a id="__codelineno-46-109" name="__codelineno-46-109" href="#__codelineno-46-109"></a>Run status group 3 (all jobs):
</span><span id="__span-46-110"><a id="__codelineno-46-110" name="__codelineno-46-110" href="#__codelineno-46-110"></a>  WRITE: bw=79.1MiB/s (83.0MB/s), 79.1MiB/s-79.1MiB/s (83.0MB/s-83.0MB/s), io=4748MiB (4979MB), run=60005-60005msec
</span><span id="__span-46-111"><a id="__codelineno-46-111" name="__codelineno-46-111" href="#__codelineno-46-111"></a>
</span><span id="__span-46-112"><a id="__codelineno-46-112" name="__codelineno-46-112" href="#__codelineno-46-112"></a>Disk stats (read/write):
</span><span id="__span-46-113"><a id="__codelineno-46-113" name="__codelineno-46-113" href="#__codelineno-46-113"></a>  sdb: ios=2641793/1235910, merge=38/87, ticks=1077282/5674545, in_queue=6778554, util=94.90%
</span></code></pre></div>
<h4 id="三星981at">三星981at<a class="headerlink" href="#三星981at" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>➜  fio sudo fio --directory=/root/ --filename=test.bin ssd-win-likely.fio
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>seq-read-4m: (g=0): rw=read, bs=(R) 4096KiB-4096KiB, (W) 4096KiB-4096KiB, (T) 4096KiB-4096KiB, ioengine=libaio, iodepth=32
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>seq-write-4m: (g=1): rw=write, bs=(R) 4096KiB-4096KiB, (W) 4096KiB-4096KiB, (T) 4096KiB-4096KiB, ioengine=libaio, iodepth=32
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>rand-read-4k: (g=2): rw=randread, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=4
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>rand-write-4k: (g=3): rw=randwrite, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=4
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>fio-3.28
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>Starting 4 processes
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>seq-read-4m: Laying out IO file (1 file / 10240MiB)
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>Jobs: 1 (f=0): [_(3),f(1)][100.0%][w=69.1MiB/s][w=17.7k IOPS][eta 00m:00s]
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a>seq-read-4m: (groupid=0, jobs=1): err= 0: pid=787066: Fri Sep 29 23:56:40 2023
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>  read: IOPS=460, BW=1841MiB/s (1930MB/s)(10.0GiB/5563msec)
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a>    slat (usec): min=53, max=9744, avg=478.53, stdev=703.84
</span><span id="__span-47-13"><a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a>    clat (msec): min=9, max=889, avg=68.36, stdev=87.28
</span><span id="__span-47-14"><a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a>     lat (msec): min=10, max=889, avg=68.84, stdev=87.24
</span><span id="__span-47-15"><a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a>    clat percentiles (msec):
</span><span id="__span-47-16"><a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a>     |  1.00th=[   16],  5.00th=[   23], 10.00th=[   28], 20.00th=[   36],
</span><span id="__span-47-17"><a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a>     | 30.00th=[   43], 40.00th=[   51], 50.00th=[   59], 60.00th=[   67],
</span><span id="__span-47-18"><a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a>     | 70.00th=[   74], 80.00th=[   82], 90.00th=[   91], 95.00th=[  106],
</span><span id="__span-47-19"><a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a>     | 99.00th=[  743], 99.50th=[  885], 99.90th=[  885], 99.95th=[  885],
</span><span id="__span-47-20"><a id="__codelineno-47-20" name="__codelineno-47-20" href="#__codelineno-47-20"></a>     | 99.99th=[  894]
</span><span id="__span-47-21"><a id="__codelineno-47-21" name="__codelineno-47-21" href="#__codelineno-47-21"></a>   bw (  MiB/s): min=  945, max= 2324, per=100.00%, avg=1988.74, stdev=387.84, samples=10
</span><span id="__span-47-22"><a id="__codelineno-47-22" name="__codelineno-47-22" href="#__codelineno-47-22"></a>   iops        : min=  236, max=  581, avg=496.70, stdev=96.92, samples=10
</span><span id="__span-47-23"><a id="__codelineno-47-23" name="__codelineno-47-23" href="#__codelineno-47-23"></a>  lat (msec)   : 10=0.04%, 20=2.54%, 50=36.60%, 100=54.69%, 250=4.92%
</span><span id="__span-47-24"><a id="__codelineno-47-24" name="__codelineno-47-24" href="#__codelineno-47-24"></a>  lat (msec)   : 750=0.39%, 1000=0.82%
</span><span id="__span-47-25"><a id="__codelineno-47-25" name="__codelineno-47-25" href="#__codelineno-47-25"></a>  cpu          : usr=0.58%, sys=21.22%, ctx=2383, majf=0, minf=32780
</span><span id="__span-47-26"><a id="__codelineno-47-26" name="__codelineno-47-26" href="#__codelineno-47-26"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=0.2%, 8=0.3%, 16=0.6%, 32=98.8%, &gt;=64=0.0%
</span><span id="__span-47-27"><a id="__codelineno-47-27" name="__codelineno-47-27" href="#__codelineno-47-27"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-47-28"><a id="__codelineno-47-28" name="__codelineno-47-28" href="#__codelineno-47-28"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-47-29"><a id="__codelineno-47-29" name="__codelineno-47-29" href="#__codelineno-47-29"></a>     issued rwts: total=2560,0,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-47-30"><a id="__codelineno-47-30" name="__codelineno-47-30" href="#__codelineno-47-30"></a>     latency   : target=0, window=0, percentile=100.00%, depth=32
</span><span id="__span-47-31"><a id="__codelineno-47-31" name="__codelineno-47-31" href="#__codelineno-47-31"></a>seq-write-4m: (groupid=1, jobs=1): err= 0: pid=787186: Fri Sep 29 23:56:40 2023
</span><span id="__span-47-32"><a id="__codelineno-47-32" name="__codelineno-47-32" href="#__codelineno-47-32"></a>  write: IOPS=235, BW=940MiB/s (986MB/s)(10.0GiB/10890msec); 0 zone resets
</span><span id="__span-47-33"><a id="__codelineno-47-33" name="__codelineno-47-33" href="#__codelineno-47-33"></a>    slat (usec): min=69, max=73786, avg=783.64, stdev=3051.53
</span><span id="__span-47-34"><a id="__codelineno-47-34" name="__codelineno-47-34" href="#__codelineno-47-34"></a>    clat (msec): min=2, max=2041, avg=135.28, stdev=287.50
</span><span id="__span-47-35"><a id="__codelineno-47-35" name="__codelineno-47-35" href="#__codelineno-47-35"></a>     lat (msec): min=2, max=2042, avg=136.06, stdev=287.42
</span><span id="__span-47-36"><a id="__codelineno-47-36" name="__codelineno-47-36" href="#__codelineno-47-36"></a>    clat percentiles (msec):
</span><span id="__span-47-37"><a id="__codelineno-47-37" name="__codelineno-47-37" href="#__codelineno-47-37"></a>     |  1.00th=[   14],  5.00th=[   21], 10.00th=[   27], 20.00th=[   36],
</span><span id="__span-47-38"><a id="__codelineno-47-38" name="__codelineno-47-38" href="#__codelineno-47-38"></a>     | 30.00th=[   46], 40.00th=[   57], 50.00th=[   68], 60.00th=[   83],
</span><span id="__span-47-39"><a id="__codelineno-47-39" name="__codelineno-47-39" href="#__codelineno-47-39"></a>     | 70.00th=[  102], 80.00th=[  126], 90.00th=[  182], 95.00th=[  326],
</span><span id="__span-47-40"><a id="__codelineno-47-40" name="__codelineno-47-40" href="#__codelineno-47-40"></a>     | 99.00th=[ 2022], 99.50th=[ 2022], 99.90th=[ 2039], 99.95th=[ 2039],
</span><span id="__span-47-41"><a id="__codelineno-47-41" name="__codelineno-47-41" href="#__codelineno-47-41"></a>     | 99.99th=[ 2039]
</span><span id="__span-47-42"><a id="__codelineno-47-42" name="__codelineno-47-42" href="#__codelineno-47-42"></a>   bw (  MiB/s): min=  370, max= 2341, per=100.00%, avg=1198.88, stdev=516.41, samples=16
</span><span id="__span-47-43"><a id="__codelineno-47-43" name="__codelineno-47-43" href="#__codelineno-47-43"></a>   iops        : min=   92, max=  585, avg=299.31, stdev=129.04, samples=16
</span><span id="__span-47-44"><a id="__codelineno-47-44" name="__codelineno-47-44" href="#__codelineno-47-44"></a>  lat (msec)   : 4=0.20%, 10=0.55%, 20=4.14%, 50=29.77%, 100=34.84%
</span><span id="__span-47-45"><a id="__codelineno-47-45" name="__codelineno-47-45" href="#__codelineno-47-45"></a>  lat (msec)   : 250=24.14%, 500=2.30%, 750=1.05%, 2000=1.76%, &gt;=2000=1.25%
</span><span id="__span-47-46"><a id="__codelineno-47-46" name="__codelineno-47-46" href="#__codelineno-47-46"></a>  cpu          : usr=7.14%, sys=12.19%, ctx=1959, majf=0, minf=14
</span><span id="__span-47-47"><a id="__codelineno-47-47" name="__codelineno-47-47" href="#__codelineno-47-47"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=0.2%, 8=0.3%, 16=0.6%, 32=98.8%, &gt;=64=0.0%
</span><span id="__span-47-48"><a id="__codelineno-47-48" name="__codelineno-47-48" href="#__codelineno-47-48"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-47-49"><a id="__codelineno-47-49" name="__codelineno-47-49" href="#__codelineno-47-49"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-47-50"><a id="__codelineno-47-50" name="__codelineno-47-50" href="#__codelineno-47-50"></a>     issued rwts: total=0,2560,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-47-51"><a id="__codelineno-47-51" name="__codelineno-47-51" href="#__codelineno-47-51"></a>     latency   : target=0, window=0, percentile=100.00%, depth=32
</span><span id="__span-47-52"><a id="__codelineno-47-52" name="__codelineno-47-52" href="#__codelineno-47-52"></a>rand-read-4k: (groupid=2, jobs=1): err= 0: pid=787189: Fri Sep 29 23:56:40 2023
</span><span id="__span-47-53"><a id="__codelineno-47-53" name="__codelineno-47-53" href="#__codelineno-47-53"></a>  read: IOPS=42.8k, BW=167MiB/s (175MB/s)(9.79GiB/60001msec)
</span><span id="__span-47-54"><a id="__codelineno-47-54" name="__codelineno-47-54" href="#__codelineno-47-54"></a>    slat (nsec): min=1180, max=378282k, avg=4607.87, stdev=236197.07
</span><span id="__span-47-55"><a id="__codelineno-47-55" name="__codelineno-47-55" href="#__codelineno-47-55"></a>    clat (nsec): min=240, max=1725.2M, avg=87451.41, stdev=4192102.00
</span><span id="__span-47-56"><a id="__codelineno-47-56" name="__codelineno-47-56" href="#__codelineno-47-56"></a>     lat (usec): min=12, max=1725.2k, avg=92.80, stdev=4327.60
</span><span id="__span-47-57"><a id="__codelineno-47-57" name="__codelineno-47-57" href="#__codelineno-47-57"></a>    clat percentiles (usec):
</span><span id="__span-47-58"><a id="__codelineno-47-58" name="__codelineno-47-58" href="#__codelineno-47-58"></a>     |  1.00th=[   18],  5.00th=[   21], 10.00th=[   22], 20.00th=[   26],
</span><span id="__span-47-59"><a id="__codelineno-47-59" name="__codelineno-47-59" href="#__codelineno-47-59"></a>     | 30.00th=[   30], 40.00th=[   47], 50.00th=[   92], 60.00th=[   96],
</span><span id="__span-47-60"><a id="__codelineno-47-60" name="__codelineno-47-60" href="#__codelineno-47-60"></a>     | 70.00th=[   99], 80.00th=[  104], 90.00th=[  115], 95.00th=[  129],
</span><span id="__span-47-61"><a id="__codelineno-47-61" name="__codelineno-47-61" href="#__codelineno-47-61"></a>     | 99.00th=[  212], 99.50th=[  306], 99.90th=[  578], 99.95th=[  742],
</span><span id="__span-47-62"><a id="__codelineno-47-62" name="__codelineno-47-62" href="#__codelineno-47-62"></a>     | 99.99th=[ 1893]
</span><span id="__span-47-63"><a id="__codelineno-47-63" name="__codelineno-47-63" href="#__codelineno-47-63"></a>   bw (  KiB/s): min=13755, max=264232, per=100.00%, avg=183324.63, stdev=52285.27, samples=111
</span><span id="__span-47-64"><a id="__codelineno-47-64" name="__codelineno-47-64" href="#__codelineno-47-64"></a>   iops        : min= 3438, max=66058, avg=45831.09, stdev=13071.34, samples=111
</span><span id="__span-47-65"><a id="__codelineno-47-65" name="__codelineno-47-65" href="#__codelineno-47-65"></a>  lat (nsec)   : 250=0.01%, 500=0.01%, 750=0.01%, 1000=0.01%
</span><span id="__span-47-66"><a id="__codelineno-47-66" name="__codelineno-47-66" href="#__codelineno-47-66"></a>  lat (usec)   : 2=0.01%, 4=0.01%, 10=0.01%, 20=4.54%, 50=35.97%
</span><span id="__span-47-67"><a id="__codelineno-47-67" name="__codelineno-47-67" href="#__codelineno-47-67"></a>  lat (usec)   : 100=31.58%, 250=27.11%, 500=0.66%, 750=0.10%, 1000=0.03%
</span><span id="__span-47-68"><a id="__codelineno-47-68" name="__codelineno-47-68" href="#__codelineno-47-68"></a>  lat (msec)   : 2=0.01%, 4=0.01%, 10=0.01%, 20=0.01%, 50=0.01%
</span><span id="__span-47-69"><a id="__codelineno-47-69" name="__codelineno-47-69" href="#__codelineno-47-69"></a>  lat (msec)   : 500=0.01%, 750=0.01%, 1000=0.01%, 2000=0.01%
</span><span id="__span-47-70"><a id="__codelineno-47-70" name="__codelineno-47-70" href="#__codelineno-47-70"></a>  cpu          : usr=7.24%, sys=27.70%, ctx=1476701, majf=0, minf=20
</span><span id="__span-47-71"><a id="__codelineno-47-71" name="__codelineno-47-71" href="#__codelineno-47-71"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
</span><span id="__span-47-72"><a id="__codelineno-47-72" name="__codelineno-47-72" href="#__codelineno-47-72"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-47-73"><a id="__codelineno-47-73" name="__codelineno-47-73" href="#__codelineno-47-73"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-47-74"><a id="__codelineno-47-74" name="__codelineno-47-74" href="#__codelineno-47-74"></a>     issued rwts: total=2567447,0,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-47-75"><a id="__codelineno-47-75" name="__codelineno-47-75" href="#__codelineno-47-75"></a>     latency   : target=0, window=0, percentile=100.00%, depth=4
</span><span id="__span-47-76"><a id="__codelineno-47-76" name="__codelineno-47-76" href="#__codelineno-47-76"></a>rand-write-4k: (groupid=3, jobs=1): err= 0: pid=788193: Fri Sep 29 23:56:40 2023
</span><span id="__span-47-77"><a id="__codelineno-47-77" name="__codelineno-47-77" href="#__codelineno-47-77"></a>  write: IOPS=30.2k, BW=118MiB/s (124MB/s)(7081MiB/60001msec); 0 zone resets
</span><span id="__span-47-78"><a id="__codelineno-47-78" name="__codelineno-47-78" href="#__codelineno-47-78"></a>    slat (nsec): min=1260, max=40475k, avg=6308.96, stdev=55626.04
</span><span id="__span-47-79"><a id="__codelineno-47-79" name="__codelineno-47-79" href="#__codelineno-47-79"></a>    clat (nsec): min=300, max=1630.1M, avg=125086.99, stdev=2894812.01
</span><span id="__span-47-80"><a id="__codelineno-47-80" name="__codelineno-47-80" href="#__codelineno-47-80"></a>     lat (usec): min=17, max=1630.1k, avg=131.50, stdev=2895.61
</span><span id="__span-47-81"><a id="__codelineno-47-81" name="__codelineno-47-81" href="#__codelineno-47-81"></a>    clat percentiles (usec):
</span><span id="__span-47-82"><a id="__codelineno-47-82" name="__codelineno-47-82" href="#__codelineno-47-82"></a>     |  1.00th=[   21],  5.00th=[   25], 10.00th=[   29], 20.00th=[   49],
</span><span id="__span-47-83"><a id="__codelineno-47-83" name="__codelineno-47-83" href="#__codelineno-47-83"></a>     | 30.00th=[   94], 40.00th=[   98], 50.00th=[  101], 60.00th=[  105],
</span><span id="__span-47-84"><a id="__codelineno-47-84" name="__codelineno-47-84" href="#__codelineno-47-84"></a>     | 70.00th=[  111], 80.00th=[  119], 90.00th=[  149], 95.00th=[  221],
</span><span id="__span-47-85"><a id="__codelineno-47-85" name="__codelineno-47-85" href="#__codelineno-47-85"></a>     | 99.00th=[  498], 99.50th=[  758], 99.90th=[ 3163], 99.95th=[ 6063],
</span><span id="__span-47-86"><a id="__codelineno-47-86" name="__codelineno-47-86" href="#__codelineno-47-86"></a>     | 99.99th=[23725]
</span><span id="__span-47-87"><a id="__codelineno-47-87" name="__codelineno-47-87" href="#__codelineno-47-87"></a>   bw (  KiB/s): min=10431, max=171952, per=100.00%, avg=122835.52, stdev=47622.27, samples=112
</span><span id="__span-47-88"><a id="__codelineno-47-88" name="__codelineno-47-88" href="#__codelineno-47-88"></a>   iops        : min= 2607, max=42988, avg=30708.83, stdev=11905.58, samples=112
</span><span id="__span-47-89"><a id="__codelineno-47-89" name="__codelineno-47-89" href="#__codelineno-47-89"></a>  lat (nsec)   : 500=0.01%, 750=0.01%, 1000=0.01%
</span><span id="__span-47-90"><a id="__codelineno-47-90" name="__codelineno-47-90" href="#__codelineno-47-90"></a>  lat (usec)   : 2=0.01%, 4=0.01%, 10=0.01%, 20=0.73%, 50=19.45%
</span><span id="__span-47-91"><a id="__codelineno-47-91" name="__codelineno-47-91" href="#__codelineno-47-91"></a>  lat (usec)   : 100=25.98%, 250=49.77%, 500=3.06%, 750=0.49%, 1000=0.19%
</span><span id="__span-47-92"><a id="__codelineno-47-92" name="__codelineno-47-92" href="#__codelineno-47-92"></a>  lat (msec)   : 2=0.17%, 4=0.07%, 10=0.05%, 20=0.02%, 50=0.01%
</span><span id="__span-47-93"><a id="__codelineno-47-93" name="__codelineno-47-93" href="#__codelineno-47-93"></a>  lat (msec)   : 100=0.01%, 250=0.01%, 750=0.01%, 2000=0.01%
</span><span id="__span-47-94"><a id="__codelineno-47-94" name="__codelineno-47-94" href="#__codelineno-47-94"></a>  cpu          : usr=4.53%, sys=20.36%, ctx=1376235, majf=0, minf=16
</span><span id="__span-47-95"><a id="__codelineno-47-95" name="__codelineno-47-95" href="#__codelineno-47-95"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
</span><span id="__span-47-96"><a id="__codelineno-47-96" name="__codelineno-47-96" href="#__codelineno-47-96"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-47-97"><a id="__codelineno-47-97" name="__codelineno-47-97" href="#__codelineno-47-97"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-47-98"><a id="__codelineno-47-98" name="__codelineno-47-98" href="#__codelineno-47-98"></a>     issued rwts: total=0,1812637,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-47-99"><a id="__codelineno-47-99" name="__codelineno-47-99" href="#__codelineno-47-99"></a>     latency   : target=0, window=0, percentile=100.00%, depth=4
</span><span id="__span-47-100"><a id="__codelineno-47-100" name="__codelineno-47-100" href="#__codelineno-47-100"></a>
</span><span id="__span-47-101"><a id="__codelineno-47-101" name="__codelineno-47-101" href="#__codelineno-47-101"></a>Run status group 0 (all jobs):
</span><span id="__span-47-102"><a id="__codelineno-47-102" name="__codelineno-47-102" href="#__codelineno-47-102"></a>   READ: bw=1841MiB/s (1930MB/s), 1841MiB/s-1841MiB/s (1930MB/s-1930MB/s), io=10.0GiB (10.7GB), run=5563-5563msec
</span><span id="__span-47-103"><a id="__codelineno-47-103" name="__codelineno-47-103" href="#__codelineno-47-103"></a>
</span><span id="__span-47-104"><a id="__codelineno-47-104" name="__codelineno-47-104" href="#__codelineno-47-104"></a>Run status group 1 (all jobs):
</span><span id="__span-47-105"><a id="__codelineno-47-105" name="__codelineno-47-105" href="#__codelineno-47-105"></a>  WRITE: bw=940MiB/s (986MB/s), 940MiB/s-940MiB/s (986MB/s-986MB/s), io=10.0GiB (10.7GB), run=10890-10890msec
</span><span id="__span-47-106"><a id="__codelineno-47-106" name="__codelineno-47-106" href="#__codelineno-47-106"></a>
</span><span id="__span-47-107"><a id="__codelineno-47-107" name="__codelineno-47-107" href="#__codelineno-47-107"></a>Run status group 2 (all jobs):
</span><span id="__span-47-108"><a id="__codelineno-47-108" name="__codelineno-47-108" href="#__codelineno-47-108"></a>   READ: bw=167MiB/s (175MB/s), 167MiB/s-167MiB/s (175MB/s-175MB/s), io=9.79GiB (10.5GB), run=60001-60001msec
</span><span id="__span-47-109"><a id="__codelineno-47-109" name="__codelineno-47-109" href="#__codelineno-47-109"></a>
</span><span id="__span-47-110"><a id="__codelineno-47-110" name="__codelineno-47-110" href="#__codelineno-47-110"></a>Run status group 3 (all jobs):
</span><span id="__span-47-111"><a id="__codelineno-47-111" name="__codelineno-47-111" href="#__codelineno-47-111"></a>  WRITE: bw=118MiB/s (124MB/s), 118MiB/s-118MiB/s (124MB/s-124MB/s), io=7081MiB (7425MB), run=60001-60001msec
</span><span id="__span-47-112"><a id="__codelineno-47-112" name="__codelineno-47-112" href="#__codelineno-47-112"></a>
</span><span id="__span-47-113"><a id="__codelineno-47-113" name="__codelineno-47-113" href="#__codelineno-47-113"></a>Disk stats (read/write):
</span><span id="__span-47-114"><a id="__codelineno-47-114" name="__codelineno-47-114" href="#__codelineno-47-114"></a>  sda: ios=2588374/1830074, merge=92/389, ticks=1241127/2284278, in_queue=3529480, util=95.33%
</span></code></pre></div>
<h4 id="n5105-铠侠rc20-500gb">n5105 铠侠rc20 500GB<a class="headerlink" href="#n5105-铠侠rc20-500gb" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>root@n5105-pve ➜  fio fio --filename=test.bin ssd-win-likely.fio
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>seq-read-4m: (g=0): rw=read, bs=(R) 4096KiB-4096KiB, (W) 4096KiB-4096KiB, (T) 4096KiB-4096KiB, ioengine=libaio, iodepth=32
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>seq-write-4m: (g=1): rw=write, bs=(R) 4096KiB-4096KiB, (W) 4096KiB-4096KiB, (T) 4096KiB-4096KiB, ioengine=libaio, iodepth=32
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>rand-read-4k: (g=2): rw=randread, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=4
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>rand-write-4k: (g=3): rw=randwrite, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=4
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>fio-3.33
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a>Starting 4 processes
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a>Jobs: 1 (f=1): [_(3),w(1)][59.0%][w=3081KiB/s][w=770 IOPS][eta 02m:19s]
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>seq-read-4m: (groupid=0, jobs=1): err= 0: pid=422690: Sat Sep 30 00:46:36 2023
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a>  read: IOPS=140, BW=560MiB/s (588MB/s)(10.0GiB/18274msec)
</span><span id="__span-48-11"><a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a>    slat (usec): min=5966, max=22258, avg=7123.69, stdev=945.70
</span><span id="__span-48-12"><a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a>    clat (usec): min=13, max=331888, avg=219709.66, stdev=21151.42
</span><span id="__span-48-13"><a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a>     lat (msec): min=6, max=338, avg=226.83, stdev=21.36
</span><span id="__span-48-14"><a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a>    clat percentiles (msec):
</span><span id="__span-48-15"><a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a>     |  1.00th=[  180],  5.00th=[  209], 10.00th=[  211], 20.00th=[  213],
</span><span id="__span-48-16"><a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a>     | 30.00th=[  218], 40.00th=[  218], 50.00th=[  220], 60.00th=[  222],
</span><span id="__span-48-17"><a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a>     | 70.00th=[  222], 80.00th=[  222], 90.00th=[  226], 95.00th=[  232],
</span><span id="__span-48-18"><a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a>     | 99.00th=[  296], 99.50th=[  330], 99.90th=[  330], 99.95th=[  330],
</span><span id="__span-48-19"><a id="__codelineno-48-19" name="__codelineno-48-19" href="#__codelineno-48-19"></a>     | 99.99th=[  334]
</span><span id="__span-48-20"><a id="__codelineno-48-20" name="__codelineno-48-20" href="#__codelineno-48-20"></a>   bw (  KiB/s): min=357840, max=614400, per=99.09%, avg=568612.03, stdev=44133.11, samples=36
</span><span id="__span-48-21"><a id="__codelineno-48-21" name="__codelineno-48-21" href="#__codelineno-48-21"></a>   iops        : min=   87, max=  150, avg=138.75, stdev=10.82, samples=36
</span><span id="__span-48-22"><a id="__codelineno-48-22" name="__codelineno-48-22" href="#__codelineno-48-22"></a>  lat (usec)   : 20=0.04%
</span><span id="__span-48-23"><a id="__codelineno-48-23" name="__codelineno-48-23" href="#__codelineno-48-23"></a>  lat (msec)   : 10=0.04%, 20=0.04%, 50=0.20%, 100=0.23%, 250=95.62%
</span><span id="__span-48-24"><a id="__codelineno-48-24" name="__codelineno-48-24" href="#__codelineno-48-24"></a>  lat (msec)   : 500=3.83%
</span><span id="__span-48-25"><a id="__codelineno-48-25" name="__codelineno-48-25" href="#__codelineno-48-25"></a>  cpu          : usr=0.33%, sys=26.03%, ctx=10676, majf=0, minf=32779
</span><span id="__span-48-26"><a id="__codelineno-48-26" name="__codelineno-48-26" href="#__codelineno-48-26"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=0.2%, 8=0.3%, 16=0.6%, 32=98.8%, &gt;=64=0.0%
</span><span id="__span-48-27"><a id="__codelineno-48-27" name="__codelineno-48-27" href="#__codelineno-48-27"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-48-28"><a id="__codelineno-48-28" name="__codelineno-48-28" href="#__codelineno-48-28"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-48-29"><a id="__codelineno-48-29" name="__codelineno-48-29" href="#__codelineno-48-29"></a>     issued rwts: total=2560,0,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-48-30"><a id="__codelineno-48-30" name="__codelineno-48-30" href="#__codelineno-48-30"></a>     latency   : target=0, window=0, percentile=100.00%, depth=32
</span><span id="__span-48-31"><a id="__codelineno-48-31" name="__codelineno-48-31" href="#__codelineno-48-31"></a>seq-write-4m: (groupid=1, jobs=1): err= 0: pid=447378: Sat Sep 30 00:46:36 2023
</span><span id="__span-48-32"><a id="__codelineno-48-32" name="__codelineno-48-32" href="#__codelineno-48-32"></a>  write: IOPS=29, BW=118MiB/s (123MB/s)(7168MiB/60944msec); 0 zone resets
</span><span id="__span-48-33"><a id="__codelineno-48-33" name="__codelineno-48-33" href="#__codelineno-48-33"></a>    slat (usec): min=1337, max=3922.2k, avg=33986.69, stdev=277349.50
</span><span id="__span-48-34"><a id="__codelineno-48-34" name="__codelineno-48-34" href="#__codelineno-48-34"></a>    clat (usec): min=13, max=4661.5k, avg=1053752.98, stdev=1375122.08
</span><span id="__span-48-35"><a id="__codelineno-48-35" name="__codelineno-48-35" href="#__codelineno-48-35"></a>     lat (msec): min=54, max=4680, avg=1087.74, stdev=1395.81
</span><span id="__span-48-36"><a id="__codelineno-48-36" name="__codelineno-48-36" href="#__codelineno-48-36"></a>    clat percentiles (msec):
</span><span id="__span-48-37"><a id="__codelineno-48-37" name="__codelineno-48-37" href="#__codelineno-48-37"></a>     |  1.00th=[   63],  5.00th=[   88], 10.00th=[  105], 20.00th=[  109],
</span><span id="__span-48-38"><a id="__codelineno-48-38" name="__codelineno-48-38" href="#__codelineno-48-38"></a>     | 30.00th=[  144], 40.00th=[  205], 50.00th=[  262], 60.00th=[  531],
</span><span id="__span-48-39"><a id="__codelineno-48-39" name="__codelineno-48-39" href="#__codelineno-48-39"></a>     | 70.00th=[ 1028], 80.00th=[ 2970], 90.00th=[ 3574], 95.00th=[ 3809],
</span><span id="__span-48-40"><a id="__codelineno-48-40" name="__codelineno-48-40" href="#__codelineno-48-40"></a>     | 99.00th=[ 4530], 99.50th=[ 4597], 99.90th=[ 4665], 99.95th=[ 4665],
</span><span id="__span-48-41"><a id="__codelineno-48-41" name="__codelineno-48-41" href="#__codelineno-48-41"></a>     | 99.99th=[ 4665]
</span><span id="__span-48-42"><a id="__codelineno-48-42" name="__codelineno-48-42" href="#__codelineno-48-42"></a>   bw (  KiB/s): min= 8208, max=787386, per=100.00%, avg=306489.37, stdev=235225.24, samples=46
</span><span id="__span-48-43"><a id="__codelineno-48-43" name="__codelineno-48-43" href="#__codelineno-48-43"></a>   iops        : min=    2, max=  192, avg=74.54, stdev=57.29, samples=46
</span><span id="__span-48-44"><a id="__codelineno-48-44" name="__codelineno-48-44" href="#__codelineno-48-44"></a>  lat (usec)   : 20=0.06%
</span><span id="__span-48-45"><a id="__codelineno-48-45" name="__codelineno-48-45" href="#__codelineno-48-45"></a>  lat (msec)   : 100=8.37%, 250=37.67%, 500=13.06%, 750=3.18%, 1000=6.19%
</span><span id="__span-48-46"><a id="__codelineno-48-46" name="__codelineno-48-46" href="#__codelineno-48-46"></a>  lat (msec)   : 2000=10.71%, &gt;=2000=20.76%
</span><span id="__span-48-47"><a id="__codelineno-48-47" name="__codelineno-48-47" href="#__codelineno-48-47"></a>  cpu          : usr=0.86%, sys=5.95%, ctx=26464, majf=0, minf=12
</span><span id="__span-48-48"><a id="__codelineno-48-48" name="__codelineno-48-48" href="#__codelineno-48-48"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=0.2%, 8=0.4%, 16=0.9%, 32=98.3%, &gt;=64=0.0%
</span><span id="__span-48-49"><a id="__codelineno-48-49" name="__codelineno-48-49" href="#__codelineno-48-49"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-48-50"><a id="__codelineno-48-50" name="__codelineno-48-50" href="#__codelineno-48-50"></a>     complete  : 0=0.0%, 4=99.9%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-48-51"><a id="__codelineno-48-51" name="__codelineno-48-51" href="#__codelineno-48-51"></a>     issued rwts: total=0,1792,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-48-52"><a id="__codelineno-48-52" name="__codelineno-48-52" href="#__codelineno-48-52"></a>     latency   : target=0, window=0, percentile=100.00%, depth=32
</span><span id="__span-48-53"><a id="__codelineno-48-53" name="__codelineno-48-53" href="#__codelineno-48-53"></a>rand-read-4k: (groupid=2, jobs=1): err= 0: pid=449479: Sat Sep 30 00:46:36 2023
</span><span id="__span-48-54"><a id="__codelineno-48-54" name="__codelineno-48-54" href="#__codelineno-48-54"></a>  read: IOPS=2352, BW=9409KiB/s (9634kB/s)(551MiB/60001msec)
</span><span id="__span-48-55"><a id="__codelineno-48-55" name="__codelineno-48-55" href="#__codelineno-48-55"></a>    slat (usec): min=6, max=24639, avg=421.40, stdev=272.49
</span><span id="__span-48-56"><a id="__codelineno-48-56" name="__codelineno-48-56" href="#__codelineno-48-56"></a>    clat (usec): min=2, max=36072, avg=1277.22, stdev=607.71
</span><span id="__span-48-57"><a id="__codelineno-48-57" name="__codelineno-48-57" href="#__codelineno-48-57"></a>     lat (usec): min=374, max=42067, avg=1698.61, stdev=744.53
</span><span id="__span-48-58"><a id="__codelineno-48-58" name="__codelineno-48-58" href="#__codelineno-48-58"></a>    clat percentiles (usec):
</span><span id="__span-48-59"><a id="__codelineno-48-59" name="__codelineno-48-59" href="#__codelineno-48-59"></a>     |  1.00th=[  996],  5.00th=[ 1037], 10.00th=[ 1074], 20.00th=[ 1106],
</span><span id="__span-48-60"><a id="__codelineno-48-60" name="__codelineno-48-60" href="#__codelineno-48-60"></a>     | 30.00th=[ 1139], 40.00th=[ 1156], 50.00th=[ 1188], 60.00th=[ 1237],
</span><span id="__span-48-61"><a id="__codelineno-48-61" name="__codelineno-48-61" href="#__codelineno-48-61"></a>     | 70.00th=[ 1287], 80.00th=[ 1352], 90.00th=[ 1483], 95.00th=[ 1614],
</span><span id="__span-48-62"><a id="__codelineno-48-62" name="__codelineno-48-62" href="#__codelineno-48-62"></a>     | 99.00th=[ 2507], 99.50th=[ 3032], 99.90th=[12518], 99.95th=[15401],
</span><span id="__span-48-63"><a id="__codelineno-48-63" name="__codelineno-48-63" href="#__codelineno-48-63"></a>     | 99.99th=[17695]
</span><span id="__span-48-64"><a id="__codelineno-48-64" name="__codelineno-48-64" href="#__codelineno-48-64"></a>   bw (  KiB/s): min= 1744, max=10080, per=99.99%, avg=9408.22, stdev=1395.59, samples=119
</span><span id="__span-48-65"><a id="__codelineno-48-65" name="__codelineno-48-65" href="#__codelineno-48-65"></a>   iops        : min=  436, max= 2520, avg=2351.96, stdev=348.88, samples=119
</span><span id="__span-48-66"><a id="__codelineno-48-66" name="__codelineno-48-66" href="#__codelineno-48-66"></a>  lat (usec)   : 4=0.01%, 500=0.01%, 750=0.03%, 1000=1.37%
</span><span id="__span-48-67"><a id="__codelineno-48-67" name="__codelineno-48-67" href="#__codelineno-48-67"></a>  lat (msec)   : 2=96.73%, 4=1.58%, 10=0.15%, 20=0.14%, 50=0.01%
</span><span id="__span-48-68"><a id="__codelineno-48-68" name="__codelineno-48-68" href="#__codelineno-48-68"></a>  cpu          : usr=0.87%, sys=9.69%, ctx=141627, majf=0, minf=13
</span><span id="__span-48-69"><a id="__codelineno-48-69" name="__codelineno-48-69" href="#__codelineno-48-69"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
</span><span id="__span-48-70"><a id="__codelineno-48-70" name="__codelineno-48-70" href="#__codelineno-48-70"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-48-71"><a id="__codelineno-48-71" name="__codelineno-48-71" href="#__codelineno-48-71"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-48-72"><a id="__codelineno-48-72" name="__codelineno-48-72" href="#__codelineno-48-72"></a>     issued rwts: total=141132,0,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-48-73"><a id="__codelineno-48-73" name="__codelineno-48-73" href="#__codelineno-48-73"></a>     latency   : target=0, window=0, percentile=100.00%, depth=4
</span><span id="__span-48-74"><a id="__codelineno-48-74" name="__codelineno-48-74" href="#__codelineno-48-74"></a>rand-write-4k: (groupid=3, jobs=1): err= 0: pid=505899: Sat Sep 30 00:46:36 2023
</span><span id="__span-48-75"><a id="__codelineno-48-75" name="__codelineno-48-75" href="#__codelineno-48-75"></a>  write: IOPS=776, BW=3105KiB/s (3179kB/s)(182MiB/60001msec); 0 zone resets
</span><span id="__span-48-76"><a id="__codelineno-48-76" name="__codelineno-48-76" href="#__codelineno-48-76"></a>    slat (usec): min=8, max=64884, avg=1276.50, stdev=1138.90
</span><span id="__span-48-77"><a id="__codelineno-48-77" name="__codelineno-48-77" href="#__codelineno-48-77"></a>    clat (usec): min=4, max=125427, avg=3870.75, stdev=2918.05
</span><span id="__span-48-78"><a id="__codelineno-48-78" name="__codelineno-48-78" href="#__codelineno-48-78"></a>     lat (usec): min=760, max=168093, avg=5147.25, stdev=3727.98
</span><span id="__span-48-79"><a id="__codelineno-48-79" name="__codelineno-48-79" href="#__codelineno-48-79"></a>    clat percentiles (usec):
</span><span id="__span-48-80"><a id="__codelineno-48-80" name="__codelineno-48-80" href="#__codelineno-48-80"></a>     |  1.00th=[  1680],  5.00th=[  2147], 10.00th=[  2245], 20.00th=[  2376],
</span><span id="__span-48-81"><a id="__codelineno-48-81" name="__codelineno-48-81" href="#__codelineno-48-81"></a>     | 30.00th=[  2507], 40.00th=[  2704], 50.00th=[  3032], 60.00th=[  3982],
</span><span id="__span-48-82"><a id="__codelineno-48-82" name="__codelineno-48-82" href="#__codelineno-48-82"></a>     | 70.00th=[  4817], 80.00th=[  5407], 90.00th=[  5997], 95.00th=[  6521],
</span><span id="__span-48-83"><a id="__codelineno-48-83" name="__codelineno-48-83" href="#__codelineno-48-83"></a>     | 99.00th=[  8848], 99.50th=[ 11338], 99.90th=[ 31065], 99.95th=[ 66323],
</span><span id="__span-48-84"><a id="__codelineno-48-84" name="__codelineno-48-84" href="#__codelineno-48-84"></a>     | 99.99th=[110625]
</span><span id="__span-48-85"><a id="__codelineno-48-85" name="__codelineno-48-85" href="#__codelineno-48-85"></a>   bw (  KiB/s): min= 1405, max= 5016, per=99.72%, avg=3096.45, stdev=976.25, samples=119
</span><span id="__span-48-86"><a id="__codelineno-48-86" name="__codelineno-48-86" href="#__codelineno-48-86"></a>   iops        : min=  351, max= 1254, avg=774.01, stdev=244.12, samples=119
</span><span id="__span-48-87"><a id="__codelineno-48-87" name="__codelineno-48-87" href="#__codelineno-48-87"></a>  lat (usec)   : 10=0.01%, 750=0.01%, 1000=0.01%
</span><span id="__span-48-88"><a id="__codelineno-48-88" name="__codelineno-48-88" href="#__codelineno-48-88"></a>  lat (msec)   : 2=1.54%, 4=58.60%, 10=39.19%, 20=0.46%, 50=0.12%
</span><span id="__span-48-89"><a id="__codelineno-48-89" name="__codelineno-48-89" href="#__codelineno-48-89"></a>  lat (msec)   : 100=0.03%, 250=0.03%
</span><span id="__span-48-90"><a id="__codelineno-48-90" name="__codelineno-48-90" href="#__codelineno-48-90"></a>  cpu          : usr=0.77%, sys=8.83%, ctx=99364, majf=0, minf=10
</span><span id="__span-48-91"><a id="__codelineno-48-91" name="__codelineno-48-91" href="#__codelineno-48-91"></a>  IO depths    : 1=0.1%, 2=0.1%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, &gt;=64=0.0%
</span><span id="__span-48-92"><a id="__codelineno-48-92" name="__codelineno-48-92" href="#__codelineno-48-92"></a>     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-48-93"><a id="__codelineno-48-93" name="__codelineno-48-93" href="#__codelineno-48-93"></a>     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%
</span><span id="__span-48-94"><a id="__codelineno-48-94" name="__codelineno-48-94" href="#__codelineno-48-94"></a>     issued rwts: total=0,46570,0,0 short=0,0,0,0 dropped=0,0,0,0
</span><span id="__span-48-95"><a id="__codelineno-48-95" name="__codelineno-48-95" href="#__codelineno-48-95"></a>     latency   : target=0, window=0, percentile=100.00%, depth=4
</span><span id="__span-48-96"><a id="__codelineno-48-96" name="__codelineno-48-96" href="#__codelineno-48-96"></a>
</span><span id="__span-48-97"><a id="__codelineno-48-97" name="__codelineno-48-97" href="#__codelineno-48-97"></a>Run status group 0 (all jobs):
</span><span id="__span-48-98"><a id="__codelineno-48-98" name="__codelineno-48-98" href="#__codelineno-48-98"></a>   READ: bw=560MiB/s (588MB/s), 560MiB/s-560MiB/s (588MB/s-588MB/s), io=10.0GiB (10.7GB), run=18274-18274msec
</span><span id="__span-48-99"><a id="__codelineno-48-99" name="__codelineno-48-99" href="#__codelineno-48-99"></a>
</span><span id="__span-48-100"><a id="__codelineno-48-100" name="__codelineno-48-100" href="#__codelineno-48-100"></a>Run status group 1 (all jobs):
</span><span id="__span-48-101"><a id="__codelineno-48-101" name="__codelineno-48-101" href="#__codelineno-48-101"></a>  WRITE: bw=118MiB/s (123MB/s), 118MiB/s-118MiB/s (123MB/s-123MB/s), io=7168MiB (7516MB), run=60944-60944msec
</span><span id="__span-48-102"><a id="__codelineno-48-102" name="__codelineno-48-102" href="#__codelineno-48-102"></a>
</span><span id="__span-48-103"><a id="__codelineno-48-103" name="__codelineno-48-103" href="#__codelineno-48-103"></a>Run status group 2 (all jobs):
</span><span id="__span-48-104"><a id="__codelineno-48-104" name="__codelineno-48-104" href="#__codelineno-48-104"></a>   READ: bw=9409KiB/s (9634kB/s), 9409KiB/s-9409KiB/s (9634kB/s-9634kB/s), io=551MiB (578MB), run=60001-60001msec
</span><span id="__span-48-105"><a id="__codelineno-48-105" name="__codelineno-48-105" href="#__codelineno-48-105"></a>
</span><span id="__span-48-106"><a id="__codelineno-48-106" name="__codelineno-48-106" href="#__codelineno-48-106"></a>Run status group 3 (all jobs):
</span><span id="__span-48-107"><a id="__codelineno-48-107" name="__codelineno-48-107" href="#__codelineno-48-107"></a>  WRITE: bw=3105KiB/s (3179kB/s), 3105KiB/s-3105KiB/s (3179kB/s-3179kB/s), io=182MiB (191MB), run=60001-60001msec
</span></code></pre></div>
<h4 id="pci-subvendor-id">pci subvendor id<a class="headerlink" href="#pci-subvendor-id" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>cat /sys/bus/pci/devices/*/uevent
</span></code></pre></div>
<h3 id="summary时间为1970">summary时间为1970<a class="headerlink" href="#summary时间为1970" title="Permanent link">&para;</a></h3>
<p><a href="https://dannyda.com/2021/12/30/how-to-fix-proxmox-ve-pve-keep-asking-request-login-pve-endless-login-web-gui-login-window-pve-rrd-error-statistics-error-not-updating-etc/#2-RRD-Error/RRD-1970/RRDC-update-error-etc.">How to Fix Proxmox VE (PVE) keep asking/request login / PVE endless login/web gui login window (&amp; PVE RRD error, statistics error/not updating etc.) &lt; Blog-D without Nonsense (dannyda.com)</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>systemctl stop rrdcached.service
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>rm -rf /var/lib/rrdcached
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>systemctl start rrdcached.service
</span></code></pre></div>







  
  




  



      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../../../../../%E6%9D%82%E6%96%87/2023/09/01/2023-09-01-%E5%86%8D%E6%AC%A1%E7%90%86%E8%A7%A3Cache%E8%AE%BE%E8%AE%A1/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 再次理解Cache设计">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                再次理解Cache设计
              </div>
            </div>
          </a>
        
        
          
          <a href="../../../../../%E6%8A%98%E8%85%BE/2023/10/30/2023-10-30-openwrt-x86%E5%8D%87%E7%BA%A7/" class="md-footer__link md-footer__link--next" aria-label="下一页: openwrt x86升级">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                openwrt x86升级
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/TheRainstorm" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.footer", "content.code.copy", "toc.follow", "toc.integrate"], "search": "../../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../../../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>